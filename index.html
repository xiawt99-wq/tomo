<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>å¤¢è§’é™ªä¼´ç•ªèŒ„é˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>

.status-gift-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    margin-top: 12px;
}

        
        .status-gift-card {
            border: 2px solid rgba(139, 92, 246, 0.2);
            border-radius: 16px;
            padding: 16px 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.6);
            position: relative;
            min-height: 100px;
            display: flex;
            flex-direction: column;
        }
        .status-gift-card:hover {
            border-color: rgba(139, 92, 246, 0.4);
            background: rgba(139, 92, 246, 0.05);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.15);
        }

        .status-gift-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

.status-gift-icon {
    font-size: 20px;
}

.status-gift-name {
    font-size: 14px;
    font-weight: 600;
    color: #374151;
}

.status-gift-preview {
    flex: 1;
    font-size: 12px;
    color: #6b7280;
    line-height: 1.4;
    margin: 4px 0;
}

.status-gift-edit-indicator {
    position: absolute;
    bottom: 8px;
    right: 8px;
    font-size: 12px;
    opacity: 0.7;
}

.custom-status-card {
    border: 2px dashed rgba(139, 92, 246, 0.4);
    background: rgba(139, 92, 246, 0.05);
    text-align: center;
    justify-content: center;
}

.custom-status-card:hover {
    background: rgba(139, 92, 246, 0.1);
    border-color: rgba(139, 92, 246, 0.6);
}

.custom-status-card .status-gift-icon {
    font-size: 24px;
    color: #8b5cf6;
}

.custom-status-delete {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 20px;
    height: 20px;
    background: rgba(239, 68, 68, 0.1);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: all 0.3s ease;
}

.status-gift-card:hover .custom-status-delete {
    opacity: 1;
}

.custom-status-delete:hover {
    background: rgba(239, 68, 68, 0.2);
    transform: scale(1.1);
}

/* ç‹€æ…‹ç¦®ç‰©ç·¨è¼¯å½ˆçª— */
.status-gift-editor-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1100;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}

.status-gift-editor-modal.show {
    opacity: 1;
    pointer-events: auto;
}

.status-gift-editor-content {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border-radius: 20px;
    padding: 24px;
    margin: 16px;
    max-width: 500px;
    max-height: 80vh;
    overflow-y: auto;
    transform: scale(0.9);
    transition: transform 0.3s ease;
    width: 90%;
}

.status-gift-editor-modal.show .status-gift-editor-content {
    transform: scale(1);
}

.status-gift-editor-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.status-gift-editor-title {
    font-size: 18px;
    font-weight: bold;
    color: #1e293b;
    display: flex;
    align-items: center;
    gap: 8px;
}

.status-gift-editor-close {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: rgba(148, 163, 184, 0.1);
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.3s ease;
}

.status-gift-editor-close:hover {
    background: rgba(148, 163, 184, 0.2);
}

.status-gift-editor-textarea {
    width: 100%;
    min-height: 200px;
    padding: 12px;
    border: 2px solid rgba(139, 92, 246, 0.2);
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.8);
    font-size: 14px;
    line-height: 1.6;
    resize: vertical;
    outline: none;
    transition: border-color 0.3s ease;
}

.status-gift-editor-textarea:focus {
    border-color: rgba(139, 92, 246, 0.5);
}

.status-gift-editor-actions {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    margin-top: 16px;
}

.status-gift-editor-btn {
    padding: 8px 20px;
    border-radius: 8px;
    border: none;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
}

.status-gift-editor-cancel {
    background: rgba(148, 163, 184, 0.2);
    color: #64748b;
}

.status-gift-editor-cancel:hover {
    background: rgba(148, 163, 184, 0.3);
}

.status-gift-editor-save {
    background: linear-gradient(135deg, #8b5cf6, #a855f7);
    color: white;
}

.status-gift-editor-save:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
}

@media (max-width: 768px) {
    .status-gift-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 8px; /* å‡å°é–“è·ä»¥é€‚æ‡‰å°å±å¹• */
    }
}
@media (max-width: 480px) {
    .status-gift-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 6px; /* è¿›ä¸€æ­¥å‡å°é–“è· */
    }
    
    .status-gift-card {
        padding: 12px 8px; /* å‡å°å…§é‚Šè· */
        min-height: 80px; /* å‡å°æœ€å°é«˜åº¦ */
    }
    
    .status-gift-name {
        font-size: 12px; /* å‡å°å­—é«” */
    }
    
    .status-gift-preview {
        font-size: 10px; /* å‡å°é è¦½æ–‡å­— */
    }
}





        * { font-family: 'Inter','Noto Sans TC',system-ui,-apple-system,'Segoe UI','PingFang TC','Microsoft JhengHei',sans-serif; 
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: linear-gradient(145deg, #faf7ff 0%, #f1eeff 50%, #e8ddff 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 
                0 8px 32px rgba(139, 92, 246, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }
        
        .button-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .button-hover:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 12px 40px rgba(139, 92, 246, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }
        
        .gradient-purple {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
        }
        
        .gradient-pink {
            background: linear-gradient(135deg, #ec4899, #f472b6);
        }
        
        /* å‹•ç•«æ•ˆæœ */
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        .sparkle {
            animation: sparkle 2s ease-in-out infinite;
        }
        
        .breathe {
            animation: breathe 3s ease-in-out infinite;
        }
        
        .bounce-soft {
            animation: bounce-soft 2s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0.4; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }
        
        @keyframes breathe {
            0%, 100% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.02); }
        }
        
        @keyframes bounce-soft {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-3px) scale(1.02); }
        }
        
        /* è‚‰å¢Šç‰¹æ•ˆ */
        .paw-button {
            position: relative;
            overflow: hidden;
        }
        
        .paw-button::before {
            content: 'ğŸ‘‘';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5rem;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .paw-button:hover::before {
            opacity: 0.8;
            animation: paw-bounce 0.6s ease;
        }
        
        @keyframes paw-bounce {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.3); }
        }
        
        /* å°ˆæ³¨é é¢ç‰¹å®šæ¨£å¼ */
        .mode-active {
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            color: white;
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }
        
        .heartbeat-pulse {
            animation: heartbeat-pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes heartbeat-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        /* ç‹€æ…‹åœ–æ ‡å‹•ç•« */
        .status-work {
            animation: work-bounce 1.5s ease-in-out infinite;
        }
        
        .status-study {
            animation: study-wiggle 2s ease-in-out infinite;
        }
        
        .status-rest {
            animation: rest-rotate 3s ease-in-out infinite;
        }
        
        @keyframes work-bounce {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-3px); }
        }
        
        @keyframes study-wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }
        
        /* å„ªåŒ–å¾Œçš„å¿ƒè·³ç·šæ¢æ¨£å¼ */
        .heartbeat-line-left, .heartbeat-line-right {
            width: 80px;
            height: 50px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .heartbeat-line-left svg, .heartbeat-line-right svg {
            width: 100%;
            height: 100%;
        }
        
        .heartbeat-path-left {
            stroke: #ec4899;
            stroke-width: 2;
            fill: none;
            stroke-dasharray: 150;
            stroke-dashoffset: 150;
            animation: heartbeat-draw-left 4s ease-in-out infinite;
        }
        
        .heartbeat-path-right {
            stroke: #ec4899;
            stroke-width: 2;
            fill: none;
            stroke-dasharray: 150;
            stroke-dashoffset: 150;
            animation: heartbeat-draw-right 4s ease-in-out infinite;
        }
        
        /* é™æ­¢ç‹€æ…‹çš„å¿ƒè·³ç·šæ¢ */
        .heartbeat-path-left.static,
        .heartbeat-path-right.static {
            animation: none;
            stroke-dashoffset: 150;
            opacity: 0.3;
        }
        
        /* å·¦é‚Šå¿ƒè·³ç·šæ¢ï¼š0-50%æ™‚é–“æ®µè·³å‹• */
        @keyframes heartbeat-draw-left {
            0% { stroke-dashoffset: 150; opacity: 0.3; }
            10% { stroke-dashoffset: 0; opacity: 1; }
            25% { stroke-dashoffset: -150; opacity: 0.8; }
            50% { stroke-dashoffset: -300; opacity: 0.3; }
            51%, 100% { stroke-dashoffset: 150; opacity: 0.3; }
        }
        
        /* å³é‚Šå¿ƒè·³ç·šæ¢ï¼š30-100%æ™‚é–“æ®µè·³å‹• */
        @keyframes heartbeat-draw-right {
            0%, 30% { stroke-dashoffset: 150; opacity: 0.3; }
            40% { stroke-dashoffset: 0; opacity: 1; }
            65% { stroke-dashoffset: -150; opacity: 0.8; }
            100% { stroke-dashoffset: -300; opacity: 0.3; }
        }
        
        /* OCèªåŒºåŸŸæ¨£å¼ - è°ƒæ•´ä½ç½®æ›´é è¿‘OCç‹€æ…‹ */
        .oc-message-area {
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 20px;
            position: relative;
            margin-top: -10px; /* å‘ä¸Šç§»å‹•é è¿‘OCç‹€æ…‹ */
        }
        
        .oc-message-text {
            color: #6b46c1;
            font-size: 15px;
            font-weight: 500;
            text-align: center;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
            transition: all 0.4s ease;
            opacity: 1;
            transform: translateY(0);
        }
        
        /* å„ªåŒ–ï¼šåªè®“ç´”æ–‡å­—éƒ¨åˆ†å±…ä¸­ */
        .oc-message-text-wrapper {
            display: inline-block;
            position: relative;
        }
        
        .oc-status-text-wrapper {
            display: inline-block;
            position: relative;
        }
        
        .oc-message-text.encourage {
            color: #6b46c1;
        }
        
        .oc-message-text.rest {
            color: #059669;
        }
        
        .oc-message-text.remind-normal {
            color: #3b82f6;
        }
        
        .oc-message-text.remind-annoyed {
            color: #f97316;
        }
        
        .oc-message-text.remind-angry {
            color: #dc2626;
            font-weight: 600;
        }
        
        /* æ–°å¢ï¼šä¸ç†ä½ äº†ç‹€æ…‹ */
        .oc-message-text.ignore {
            color: #dc2626;
            font-weight: 600;
        }
        
        .oc-message-text.fade-out {
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
        }
        
        .oc-message-text.slide-up {
            animation: slide-up-fast 0.3s ease-in-out;
        }
        
        @keyframes slide-up-fast {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-30px); }
        }
        
        /* å“æ‡‰å¼OCé ­åƒå¤§å° - å¢å¼ºå‘¼å¸å‹•ç•« */
        .oc-avatar {
            width: 70vw;
            height: 70vw;
            max-width: 16rem;
            max-height: 16rem;
            min-width: 8rem;
            min-height: 8rem;
            aspect-ratio: 1 / 1;
            border-radius: 50%;
            overflow: hidden;
            flex-shrink: 0;
            position: relative;
            z-index: 2;
            border: 3px solid rgba(255, 255, 255, 0.8);
            box-shadow: 
                0 0 0 2px rgba(236, 72, 153, 0.15),
                0 0 20px rgba(236, 72, 153, 0.2),
                0 0 40px rgba(236, 72, 153, 0.1),
                inset 0 0 0 1px rgba(255, 255, 255, 0.5);
            animation: avatar-glow-breathe 3s ease-in-out infinite;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .oc-avatar:hover {
            transform: scale(1.02);
        }
        
        .oc-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        
        /* å¢å¼ºOCé ­åƒå‘¼å¸ç™¼å…‰å‹•ç•« */
        @keyframes avatar-glow-breathe {
            0%, 100% { 
                box-shadow: 
                    0 0 0 2px rgba(236, 72, 153, 0.15),
                    0 0 20px rgba(236, 72, 153, 0.2),
                    0 0 40px rgba(236, 72, 153, 0.1),
                    inset 0 0 0 1px rgba(255, 255, 255, 0.5);
                transform: scale(1);
            }
            50% { 
                box-shadow: 
                    0 0 0 3px rgba(236, 72, 153, 0.25),
                    0 0 30px rgba(236, 72, 153, 0.3),
                    0 0 60px rgba(236, 72, 153, 0.15),
                    inset 0 0 0 1px rgba(255, 255, 255, 0.7);
                transform: scale(1.05);
            }
        }
        
        .timer-text {
            font-size: clamp(2.5rem, 8vw, 4rem);
            cursor: pointer;
            user-select: none;
        }
        
        .focus-container {
            padding: 6px 1rem 1rem 1rem;
        }
        
        .focus-section {
            padding: clamp(1rem, 4vw, 1.5rem);
        }
        
        /* ç‹€æ…‹é¸æ“‡æ¨£å¼ - å„ªåŒ–å“æ‡‰é€Ÿåº¦ */
        .status-selector {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 16px;
            margin-top: 8px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.15s ease;
            z-index: 50;
            min-width: 280px;
        }
        
        .status-selector.show {
            opacity: 1;
            pointer-events: auto;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }
        
        .status-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 8px;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.15s ease;
            min-height: 60px;
            justify-content: center;
        }
        
        .status-option:hover {
            background: rgba(139, 92, 246, 0.1);
        }
        
        .status-option.active {
            background: rgba(139, 92, 246, 0.2);
        }
        
        .status-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        .status-text {
            font-size: 12px;
            text-align: center;
            color: #374151;
            font-weight: 500;
        }
        
        /* è‡ªå®šç¾©ç‹€æ…‹è¾“å…¥æ¡†æ¨£å¼ */
        #customStatusInput {
            border-top: 1px solid rgba(139, 92, 246, 0.2);
            padding-top: 12px;
            margin-top: 8px;
        }
        
        #customStatusInput input {
            font-size: 14px;
        }
        
        #customStatusInput button {
            font-size: 12px;
            padding: 6px 12px;
        }
        
        /* æ™‚é–“é¸æ“‡å™¨æ¨£å¼ */
        .time-selector {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 16px;
            margin-top: 8px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            z-index: 60;
            min-width: 200px;
        }
        
        .time-selector.show {
            opacity: 1;
            pointer-events: auto;
        }
        
        .time-option {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 16px;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            margin: 4px 0;
        }
        
        .time-option:hover {
            background: rgba(139, 92, 246, 0.1);
        }
        
        .time-option.active {
            background: rgba(139, 92, 246, 0.2);
        }
        
        .custom-time-input {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            border-radius: 12px;
            background: rgba(139, 92, 246, 0.05);
            margin: 8px 0;
        }
        
        .task-option {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            margin: 4px 0;
        }
        
        .task-option:hover {
            background: rgba(139, 92, 246, 0.1);
        }
        
        .task-option.active {
            background: rgba(139, 92, 246, 0.2);
        }
        
        /* ä»»å‹™ç›¸é—œæ¨£å¼ - ç§»é™¤æ‹–æ‹½åŠŸèƒ½ */
        .task-item {
            background: rgba(255, 255, 255, 0.6);
            border-radius: 12px;
            padding: 12px;
            border-left: 4px solid;
            transition: all 0.3s ease;
            user-select: none;
        }
        
        .task-item.completed {
            background: rgba(148, 163, 184, 0.3);
            color: #64748b;
            order: 999;
            border-left-color: #64748b;
        }
        
        .task-item.completed .task-title {
            text-decoration: line-through;
            opacity: 0.6;
        }
        
        .task-item.pending, .task-item.in-progress {
            border-left-color: #3b82f6;
        }
        
        .task-checkbox {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        .task-checkbox.pending, .task-checkbox.in-progress {
            border-color: #3b82f6;
            background: transparent;
        }
        
        .task-checkbox.in-progress {
            animation: sparkle 2s ease-in-out infinite;
        }
        
        .task-checkbox.completed {
            border-color: #64748b;
            background: #64748b;
        }
        
        .task-checkbox:hover {
            transform: scale(1.1);
        }
        
        .task-title {
            font-weight: 500;
            color: #1e293b;
            flex: 1;
            margin: 0 8px;
        }
        
        .task-actions {
            display: flex;
            align-items: center;
            gap: 8px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .task-item:hover .task-actions {
            opacity: 1;
        }
        
        .task-action-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .task-edit-btn {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }
        
        .task-edit-btn:hover {
            background: rgba(59, 130, 246, 0.2);
            transform: scale(1.1);
        }
        
        .task-delete-btn {
            background: rgba(148, 163, 184, 0.1);
            color: #64748b;
        }
        
        .task-delete-btn:hover {
            background: rgba(148, 163, 184, 0.2);
            color: #475569;
            transform: scale(1.1);
        }
        
        /* æ·»åŠ ä»»å‹™è¾“å…¥æ¡† */
        .add-task-input {
            background: rgba(255, 255, 255, 0.8);
            border: 2px dashed rgba(139, 92, 246, 0.4);
            border-radius: 12px;
            padding: 12px;
            width: 100%;
            outline: none;
            font-size: 14px;
            color: #1e293b;
            transition: all 0.3s ease;
        }
        
        .add-task-input:focus {
            border-color: rgba(139, 92, 246, 0.8);
            background: rgba(255, 255, 255, 0.95);
        }
        
        .add-task-input::placeholder {
            color: #94a3b8;
        }
        
        /* é£˜è½å‹•ç•« */
        .falling-petals {
            position: fixed;
            top: -10px;
            pointer-events: none;
            z-index: 5;
            font-size: 20px;
            animation: fall linear infinite;
        }
        
        @keyframes fall {
            0% {
                transform: translateY(-10px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(calc(100vh + 10px)) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* é–‹å§‹æŒ‰éˆ•æç¤ºæ–‡å­—æ¨£å¼ */
        #startBtnHint {
            animation: pulse-hint 2s ease-in-out infinite;
        }
        
        @keyframes pulse-hint {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }
        
        /* ä¸‰æŒ‰éˆ•å¸ƒå±€ */
        .three-button-layout {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-bottom: 20px;
            margin-top: 20px;
        }
        
        .side-button {
            background: rgba(148, 163, 184, 0.3);
            color: #64748b;
            border-radius: 16px;
            padding: 16px;
            transition: all 0.3s ease;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .side-button:hover {
            background: rgba(148, 163, 184, 0.5);
            transform: translateY(-2px);
        }
        
        .main-button {
            border-radius: 20px;
            padding: 16px 20px;
            width: 80px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* éœ‡å‹•æ•ˆæœ */
        .vibration {
            animation: vibrate 0.5s ease-in-out;
        }
        
        @keyframes vibrate {
            0%, 100% { transform: translateX(0); }
            10% { transform: translateX(-3px); }
            20% { transform: translateX(3px); }
            30% { transform: translateX(-3px); }
            40% { transform: translateX(3px); }
            50% { transform: translateX(-3px); }
            60% { transform: translateX(3px); }
            70% { transform: translateX(-3px); }
            80% { transform: translateX(3px); }
            90% { transform: translateX(-3px); }
        }
        
        /* æ†¤æ€’éœ‡å‹•æ•ˆæœ */
        .angry-shake {
            animation: angry-shake 0.6s ease-in-out;
        }
        
        @keyframes angry-shake {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            10% { transform: translateX(-6px) rotate(-2deg); }
            20% { transform: translateX(6px) rotate(2deg); }
            30% { transform: translateX(-6px) rotate(-2deg); }
            40% { transform: translateX(6px) rotate(2deg); }
            50% { transform: translateX(-6px) rotate(-2deg); }
            60% { transform: translateX(6px) rotate(2deg); }
            70% { transform: translateX(-6px) rotate(-2deg); }
            80% { transform: translateX(6px) rotate(2deg); }
            90% { transform: translateX(-6px) rotate(-2deg); }
        }
        
        /* å®Œæˆæ…¶ç¥å‹•ç•« */
        .celebration {
            animation: celebration 1s ease-in-out;
        }
        
        @keyframes celebration {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(-5deg); }
            50% { transform: scale(1.15) rotate(0deg); }
            75% { transform: scale(1.1) rotate(5deg); }
        }
        
        /* å®Œæˆå½ˆçª—æ¨£å¼ */
        .completion-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .completion-modal.show {
            opacity: 1;
            pointer-events: auto;
        }
        
        .completion-modal-content {
            background: linear-gradient(145deg, #ffffff, #f8fafc);
            border-radius: 20px;
            padding: 32px 24px;
            margin: 16px;
            max-width: 400px;
            text-align: center;
            transform: scale(0.9);
            transition: transform 0.3s ease;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .completion-modal.show .completion-modal-content {
            transform: scale(1);
        }
        
        .completion-title {
            font-size: 24px;
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 12px;
        }
        
        .completion-gift {
            font-size: 18px;
            color: #6b46c1;
            margin-bottom: 24px;
            line-height: 1.5;
        }
        
        .completion-close-btn {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .completion-close-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(139, 92, 246, 0.3);
        }
        
        /* å®Œæˆç‰¹æ•ˆ - æ˜Ÿæ˜Ÿé‘½çŸ³é£„è½ */
        .celebration-particle {
            position: fixed;
            font-size: 24px;
            pointer-events: none;
            z-index: 999;
            animation: celebration-fall 4s ease-in-out forwards;
        }
        
        @keyframes celebration-fall {
            0% {
                transform: translateY(-100px) rotate(0deg) scale(1);
                opacity: 1;
            }
            50% {
                transform: translateY(50vh) rotate(180deg) scale(1.2);
                opacity: 0.8;
            }
            100% {
                transform: translateY(100vh) rotate(360deg) scale(0.8);
                opacity: 0;
            }
        }
        
        /* ç¦®ç‰©å½ˆçª—æ¨£å¼ */
        .gift-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .gift-modal.show {
            opacity: 1;
            pointer-events: auto;
        }
        
        .gift-modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 24px;
            margin: 16px;
            max-width: 90vw;
            max-height: 70vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .gift-modal.show .gift-modal-content {
            transform: scale(1);
        }
        
        .gift-item {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            background: rgba(139, 92, 246, 0.05);
            border-radius: 12px;
            margin-bottom: 8px;
            border-left: 4px solid #8b5cf6;
        }
        
        .gift-item:last-child {
            margin-bottom: 0;
        }
        
        .gift-time {
            font-size: 12px;
            color: #6b7280;
            margin-left: auto;
            white-space: nowrap;
        }
        
        .gift-sender {
            font-size: 12px;
            color: #8b5cf6;
            font-weight: 500;
        }
        
        /* OCå¡ç‰‡é é¢æ¨£å¼ */
        .oc-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            padding: 16px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .oc-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(139, 92, 246, 0.15);
        }
        
        .oc-card-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid rgba(139, 92, 246, 0.3);
        }
        
        .create-card {
            border: 2px dashed rgba(139, 92, 246, 0.4);
            background: rgba(139, 92, 246, 0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 120px;
            text-align: center;
        }
        
        .create-card:hover {
            background: rgba(139, 92, 246, 0.1);
            border-color: rgba(139, 92, 246, 0.6);
        }
        
        /* OCè¨­ç½®é é¢æ¨£å¼ */
        .setting-section {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
        }
        
        .avatar-upload {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 3px dashed rgba(139, 92, 246, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(139, 92, 246, 0.05);
            position: relative;
            overflow: hidden;
        }
        
        .avatar-upload:hover {
            border-color: rgba(139, 92, 246, 0.6);
            background: rgba(139, 92, 246, 0.1);
        }
        
        .avatar-preview {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        
        /* é¢¨æ ¼é¸æ“‡ç¶²æ ¼ */
        .style-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 12px;
        }
        
        .style-option {
            border: 2px solid rgba(139, 92, 246, 0.2);
            border-radius: 12px;
            padding: 12px 12px 40px 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.5);
            position: relative;
        }
        
        .style-option:hover {
            border-color: rgba(139, 92, 246, 0.4);
            background: rgba(139, 92, 246, 0.05);
            transform: translateY(-2px);
        }
        
        .style-option.selected .style-selector-circle {
            background: #8b5cf6;
            border-color: #8b5cf6;
        }
        
        .style-option.selected .style-selector-circle::after {
            content: 'âœ“';
            color: white;
            font-size: 12px;
            font-weight: bold;
        }
        
        .style-title {
            font-size: 13px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 4px;
        }
        
        .style-desc {
            font-size: 10px;
            color: #6b7280;
            line-height: 1.3;
        }
        
        /* æ–°å¢ï¼šé¢¨æ ¼é¸æ“‡åœ“åœˆ */
        .style-selector-circle {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid rgba(139, 92, 246, 0.4);
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .style-selector-circle:hover {
            border-color: rgba(139, 92, 246, 0.6);
            transform: translateX(-50%) scale(1.1);
        }
        
        /* èªå¥ç·¨è¼¯å½ˆçª— */
        .style-editor-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .style-editor-modal.show {
            opacity: 1;
            pointer-events: auto;
        }
        
        .style-editor-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 24px;
            margin: 16px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s ease;
            width: 90%;
        }
        
        .style-editor-modal.show .style-editor-content {
            transform: scale(1);
        }
        
        .style-editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .style-editor-title {
            font-size: 18px;
            font-weight: bold;
            color: #1e293b;
        }
        
        .style-editor-close {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(148, 163, 184, 0.1);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }
        
        .style-editor-close:hover {
            background: rgba(148, 163, 184, 0.2);
        }
        
        .style-editor-textarea {
            width: 100%;
            min-height: 300px;
            padding: 12px;
            border: 2px solid rgba(139, 92, 246, 0.2);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
            outline: none;
            transition: border-color 0.3s ease;
        }
        
        .style-editor-textarea:focus {
            border-color: rgba(139, 92, 246, 0.5);
        }
        
        .style-editor-actions {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            margin-top: 16px;
        }
        
        .style-editor-btn {
            padding: 8px 20px;
            border-radius: 8px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .style-editor-cancel {
            background: rgba(148, 163, 184, 0.2);
            color: #64748b;
        }
        
        .style-editor-cancel:hover {
            background: rgba(148, 163, 184, 0.3);
        }
        
        .style-editor-save {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
            color: white;
        }
        
        .style-editor-save:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }
        
        /* è‡ªå®šä¹‰é¢¨æ ¼å¡ç‰‡ */
        .custom-style-card {
            border: 2px dashed rgba(139, 92, 246, 0.4);
            background: rgba(139, 92, 246, 0.05);
        }
        
        .custom-style-card:hover {
            background: rgba(139, 92, 246, 0.1);
            border-color: rgba(139, 92, 246, 0.6);
        }
        
        /* å·²å®Œæˆä»»å‹™å½ˆçª—æ¨£å¼ */
        .completed-tasks-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .completed-tasks-modal.show {
            opacity: 1;
            pointer-events: auto;
        }
        
        .completed-tasks-modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 24px;
            margin: 16px;
            max-width: 90vw;
            max-height: 70vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .completed-tasks-modal.show .completed-tasks-modal-content {
            transform: scale(1);
        }
        
        .completed-task-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: rgba(148, 163, 184, 0.1);
            border-radius: 12px;
            margin-bottom: 8px;
            border-left: 4px solid #64748b;
        }
        
        .completed-task-item:last-child {
            margin-bottom: 0;
        }
        
        .completed-task-title {
            font-weight: 500;
            color: #64748b;
            flex: 1;
            margin: 0 8px;
            text-decoration: line-through;
        }
        
        .undo-btn {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
            border: none;
            border-radius: 8px;
            padding: 6px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .undo-btn:hover {
            background: rgba(59, 130, 246, 0.2);
        }
        
        /* çµ±è¨ˆæ•¸æ“šé»æ“Šæ•ˆæœ */
        .stat-clickable {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .stat-clickable:hover {
            transform: translateY(-2px);
            background: rgba(139, 92, 246, 0.1);
            border-radius: 12px;
        }
        
        /* å“æ‡‰å¼è¨­è¨ˆ */
        @media (max-height: 700px) {
            .focus-container { padding: 6px 0.75rem 0.75rem 0.75rem; }
            .oc-avatar { width: 65vw; height: 65vw; max-width: 12rem; max-height: 12rem; }
            .three-button-layout { margin-bottom: 15px; margin-top: 15px; }
        }
        
        @media (max-height: 600px) {
            .oc-avatar { width: 60vw; height: 60vw; max-width: 10rem; max-height: 10rem; }
            .focus-section { padding: 1rem; }
            .three-button-layout { margin-bottom: 10px; margin-top: 10px; }
        }
        
        @media (min-height: 800px) {
            .oc-avatar { width: 70vw; height: 70vw; max-width: 18rem; max-height: 18rem; }
            .three-button-layout { margin-bottom: 25px; margin-top: 25px; }
        }
        
        @media (max-width: 360px) {
            .oc-avatar { width: 65vw; height: 65vw; min-width: 7rem; min-height: 7rem; }
            .focus-container { padding: 6px 0.5rem 0.5rem 0.5rem; }
            .status-selector { min-width: 250px; }
            .status-grid { grid-template-columns: repeat(2, 1fr); }
            .style-grid { grid-template-columns: repeat(2, 1fr); }
        }
        
        @media (max-width: 320px) {
            .status-selector { min-width: 220px; }
            .status-grid { grid-template-columns: repeat(2, 1fr); }
            .style-grid { grid-template-columns: repeat(2, 1fr); }
        }
        
        /* é é¢åˆ‡æ›å‹•ç•« */
        .page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(145deg, #faf7ff 0%, #f1eeff 50%, #e8ddff 100%);
            transition: transform 0.3s ease-in-out;
            z-index: 10;
            overflow-y: auto;
        }
        
        .page.hidden {
            transform: translateX(100%);
        }
        
        .page.show {
            transform: translateX(0);
        }
        
        /* æ»¾å‹•æ¢æ¨£å¼ */
        ::-webkit-scrollbar {
            width: 4px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(139, 92, 246, 0.3);
            border-radius: 2px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(139, 92, 246, 0.5);
        }
        
        /* ç§»å‹•ç«¯å„ªåŒ– */
        @media (max-width: 768px) {
            .task-actions {
                opacity: 1;
            }
            
            .gift-modal-content {
                margin: 8px;
                padding: 16px;
            }
        }
        
        /* æ–°å¢ï¼šè‡ªå®šä¹‰é¢¨æ ¼åˆªé™¤æŒ‰éˆ• */
        .custom-style-delete {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 20px;
            height: 20px;
            background: rgba(239, 68, 68, 0.1);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .style-option:hover .custom-style-delete {
            opacity: 1;
        }
        
        .custom-style-delete:hover {
            background: rgba(239, 68, 68, 0.2);
            transform: scale(1.1);
        }
    </style>
<style id="dark-override">
/* === Dark Theme Override (injected) === */
:root {
  color-scheme: dark;
}
body {
  background: radial-gradient(1200px 600px at 80% -10%, #111827 0%, #0b1020 60%), #0a0f1a !important;
  color: #e5e7eb !important;
}
.page {
  background: linear-gradient(145deg, #0f172a 0%, #0b1222 50%, #0a0f1a 100%) !important;
}
.glass-card, .status-gift-card, .oc-card, .setting-section, .completion-modal-content,
.gift-modal-content, .status-gift-editor-content, .style-editor-content, .completed-tasks-modal-content {
  background: rgba(17, 24, 39, 0.75) !important;
  border-color: rgba(255, 255, 255, 0.08) !important;
  box-shadow: 0 8px 32px rgba(0,0,0,0.35) !important;
}
.status-gift-card:hover, .oc-card:hover, .style-option:hover {
  background: rgba(30, 41, 59, 0.85) !important;
}
.create-card {
  background: rgba(30, 41, 59, 0.5) !important;
  border-color: rgba(139, 92, 246, 0.35) !important;
}
.style-option {
  background: rgba(17, 24, 39, 0.55) !important;
}
.add-task-input, .style-editor-textarea, .status-gift-editor-textarea,
#customGreeting, #ocNameInput, #userTitleInput {
  background: rgba(15, 23, 42, 0.7) !important;
  color: #e5e7eb !important;
  border-color: rgba(255,255,255,0.12) !important;
}
.text-slate-800, .text-slate-700, .text-slate-600, .text-slate-500,
.text-purple-600, .text-purple-500, .text-slate-900 {
  color: #e5e7eb !important;
}
.bg-slate-200, .bg-slate-300, .bg-slate-400 {
  background-color: rgba(148, 163, 184, 0.2) !important;
}
.status-text { color: #cbd5e1 !important; }
.task-item { background: rgba(30, 41, 59, 0.6) !important; }
.task-item.completed { background: rgba(71, 85, 105, 0.4) !important; color: #94a3b8 !important; }
::-webkit-scrollbar-track { background: rgba(255,255,255,0.05) !important; }
::-webkit-scrollbar-thumb { background: rgba(148,163,184,0.35) !important; }
.heartbeat-path-left, .heartbeat-path-right { stroke: #f472b6 !important; }
.oc-message-text { text-shadow: none !important; }

</style>
<style id="dark-typography">
/* === Dark Typography Tuning === */
:root{
  --text-primary:#E6EAF2;   /* body */
  --text-secondary:#A7B0C0; /* muted */
  --text-heading:#F3F4F6;   /* titles */
  --text-accent:#C7B5FF;    /* links */
}
html, body { color: var(--text-primary) !important; }
h1,h2,h3,h4,h5,h6 { color: var(--text-heading) !important; }
a { color: var(--text-accent) !important; }
.text-slate-900,.text-slate-800,.text-slate-700,.text-slate-600,.text-slate-500,
.text-purple-600,.text-purple-500,.text-slate-500\/70,.text-purple-600\/70{
  color: var(--text-secondary) !important;
}
.placeholder-slate-400, ::placeholder{ color: #8A93A6 !important; opacity: .9; }
.glass-card { border-color: rgba(255,255,255,0.08) !important; }

</style>
<style id="no-nagging">
/* === Remove reminder/nagging tone colors & effects === */
.oc-message-text.remind-normal,
.oc-message-text.remind-annoyed,
.oc-message-text.remind-angry,
.oc-message-text.ignore { color: var(--text-primary) !important; font-weight: 500 !important; }
.angry-shake, .vibration { animation: none !important; }
</style>
</head>
    <!-- é¦–é  -->
    <div id="homePage" class="page show">
        <div class="flex flex-col min-h-screen p-4 relative z-10">
            <!-- é ‚éƒ¨ç‹€æ…‹æ¬„ -->
            <div class="flex justify-between items-center pt-4 pb-2 px-2">
                <div class="flex items-center space-x-2">
                    <div class="w-2 h-2 bg-green-400 rounded-full breathe"></div>
                    <span class="text-sm text-purple-600/70">åœ¨ç·š</span>
                </div>
                <div class="text-sm text-purple-600/70" id="currentDate">
                    2025å¹´7æœˆ29æ—¥ æ˜ŸæœŸäºŒ
                </div>
            </div>

            <!-- å•å€™èªå’ŒOCè§’è‰²å±•ç¤º -->
            <div class="mb-4">
                <div class="glass-card rounded-2xl p-6 bounce-soft cursor-pointer button-hover" onclick="goToOCCards()">
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <img id="currentOCAvatar" src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=100&h=100&fit=crop&crop=face" 
                                 alt="OCè§’è‰²" 
                                 class="w-16 h-16 rounded-full object-cover border-2 border-purple-400/50 floating">
                            <div class="absolute -bottom-1 -right-1 w-6 h-6 bg-green-400 rounded-full border-2 border-white flex items-center justify-center">
                                <div class="w-2 h-2 bg-white rounded-full breathe"></div>
                            </div>
                        </div>
                        <div class="flex-1">
                            <h2 id="currentOCGreeting" class="text-lg font-semibold text-slate-800 mb-1">æ—©å®‰ï¼Œå¤§å°å§ï¼</h2>
                            <p class="text-sm text-purple-600/70">
                                <span id="currentOCName">å°‰éœ†</span>é™ªä½ åº¦éé€™ä¸€å¤©ï½ âœ¨
                            </p>
                        </div>
                        <button class="glass-card rounded-xl p-2 button-hover">
                            <svg class="w-5 h-5 text-purple-500" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- ä»Šæ—¥ä»»å‹™æ¦‚è¦½ -->
            <div class="mb-4">
                <div class="flex items-center justify-between mb-3 px-2">
                    <h3 class="text-lg font-semibold text-slate-800">ä»Šæ—¥ä»»å‹™</h3>
                    <div class="flex items-center space-x-2">
                        <span class="text-sm text-purple-600/70" id="taskProgress">0/0 å®Œæˆ</span>
                        <button onclick="addNewTask()" class="w-6 h-6 bg-slate-300 rounded-full flex items-center justify-center hover:bg-slate-400 transition-colors">
                            <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <!-- ä»»å‹™åˆ—è¡¨å®¹å™¨ -->
                <div class="glass-card rounded-xl p-4 max-h-60 overflow-y-auto" id="taskContainer">
                    <div id="taskList" class="space-y-2">
                        <!-- ä»»å‹™é¡¹æœƒé€šè¿‡JavaScriptå‹•æ…‹æ·»åŠ  -->
                    </div>
                </div>
            </div>

<!-- ä¸»è¦æ“ä½œæŒ‰é’® -->
<div class="mb-4">
    <div class="mb-4">
        <!-- é–‹å§‹ç•ªèŒ„é˜ -->
        <button onclick="goToFocus()" class="gradient-purple rounded-2xl p-4 text-center button-hover paw-button text-white w-full">
            <div class="w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center mx-auto mb-2">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M8 5v14l11-7z"/>
                </svg>
            </div>
            <h4 class="font-semibold mb-1 text-sm">é–‹å§‹ç•ªèŒ„é˜</h4>
            <p class="text-xs opacity-80">ç«‹å³å°ˆæ³¨</p>
        </button>
    </div>
</div>


            
            <!-- åº•éƒ¨çµ±è¨ˆ -->
            <div class="glass-card rounded-xl p-6">
                <div class="grid grid-cols-2 text-center">
                    <div class="stat-clickable p-2" onclick="showGiftModal()">
                        <div class="text-xl font-bold bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent" id="todayGifts">0</div>
                        <div class="text-xs text-slate-500">ä»Šæ—¥ç¦®ç‰©</div>
                    </div>
                    <div class="stat-clickable p-2">
                        <div class="text-xl font-bold bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent" id="focusTime">0m</div>
                        <div class="text-xs text-slate-500">å°ˆæ³¨æ™‚é•·</div>
                    </div>
                    <div class="stat-clickable p-2" onclick="showCompletedTasksModal()">
                        <div class="text-xl font-bold bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent" id="todayCompleted">0</div>
                        <div class="text-xs text-slate-500">ä»Šæ—¥å®Œæˆ</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å·²å®Œæˆä»»å‹™å¼¹çª— -->
    <div id="completedTasksModal" class="completed-tasks-modal">
        <div class="completed-tasks-modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-slate-800">ä»Šæ—¥å·²å®Œæˆä»»å‹™ âœ…</h3>
                <button onclick="closeCompletedTasksModal()" class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center hover:bg-slate-300 transition-colors">
                    <svg class="w-5 h-5 text-slate-600" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                    </svg>
                </button>
            </div>
            <div id="completedTasksList" class="max-h-96 overflow-y-auto">
                <div class="text-center text-slate-500 py-8">
                    <div class="text-4xl mb-2">ğŸ“</div>
                    <p>ä»Šå¤©é‚„æ²¡æœ‰å®Œæˆä»»ä½•ä»»å‹™å‘¢ï½<br>å¿«å»å®Œæˆä¸€äº›ä»»å‹™å§ï¼</p>
                </div>
            </div>
        </div>
    </div>

    <!-- å·²ç§»é™¤ç¦®ç‰©å½ˆçª— -->
<!-- ç‹€æ…‹ç¦®ç‰©ç·¨è¼¯å½ˆçª— -->
<div id="statusGiftEditorModal" class="status-gift-editor-modal">
    <div class="status-gift-editor-content">
        <div class="status-gift-editor-header">
            <h3 class="status-gift-editor-title" id="statusGiftEditorTitle">
                <span id="statusGiftEditorIcon">ğŸ“š</span>
                ç¼–è¾‘å­¸ç¿’ç¦®ç‰©
            </h3>
            <button class="status-gift-editor-close" onclick="closeStatusGiftEditor()">
                <svg class="w-5 h-5 text-slate-600" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
            </button>
        </div>
        <div class="mb-4">
            <p class="text-sm text-slate-600 mb-2">æ¯è¡Œä¸€å€‹ç¦®ç‰©ï¼Œå»ºè­°æ ¼å¼ï¼šè¡¨æƒ…ç¬¦å· + ç¦®ç‰©åç¨± + é¼“å‹µèª</p>
            <p class="text-xs text-slate-500">ä¾‹å¦‚ï¼šğŸ† å­¸ç¿’å† è»çæ¯ï¼ä½ çš„åŠªåŠ›å€¼å¾—æœ€å¥½çš„çå‹µï¼</p>
        </div>
        <textarea id="statusGiftEditorTextarea" class="status-gift-editor-textarea" placeholder="è¾“å…¥ç¦®ç‰©å…§å®¹ï¼Œæ¯è¡Œä¸€å€‹..."></textarea>
        <div class="status-gift-editor-actions">
            <button class="status-gift-editor-btn status-gift-editor-cancel" onclick="closeStatusGiftEditor()">å–æ¶ˆ</button>
            <button class="status-gift-editor-btn status-gift-editor-save" onclick="saveStatusGifts()">ä¿å­˜</button>
        </div>
    </div>
</div>

    <!-- OCå¡ç‰‡é é¢ -->
    <div id="ocCardsPage" class="page hidden">
        <div class="flex flex-col min-h-screen p-4 relative z-10">
            <!-- é ‚éƒ¨å°èˆªæ¬„ -->
            <div class="flex items-center justify-between pt-4 pb-6 px-2">
                <button onclick="goBackToHome()" class="glass-card rounded-full p-3 button-hover">
                    <svg class="w-6 h-6 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <h1 class="text-xl font-bold text-slate-800">ä½ çš„å¤¢è§’å¡æ± </h1>
                <div class="w-12"></div>
            </div>

            <!-- OCå¡ç‰‡ç¶²æ ¼ -->
            <div class="grid grid-cols-2 gap-4 mb-6" id="ocCardsGrid">
                <!-- å‰µå»ºæ–°OCå¡ç‰‡ -->
                <div class="oc-card create-card" onclick="createNewOC()">
                    <div class="text-4xl text-purple-400 mb-2">+</div>
                    <div class="text-sm text-purple-600 font-medium">å‰µå»ºæ–°å¤¢è§’</div>
                </div>
                
                <!-- é»˜è®¤OCå¡ç‰‡ -->
                <div class="oc-card" onclick="editOC(0)">
                    <div class="flex items-center space-x-3">
                        <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=120&h=120&fit=crop&crop=face" 
                             alt="å°è‰¾" class="oc-card-avatar">
                        <div class="flex-1">
                            <h3 class="font-semibold text-slate-800 mb-1">å°è‰¾</h3>
                            <p class="text-xs text-slate-500">ä½ çš„å­¸ç¿’æ­å­</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- OCè¨­ç½®é é¢ -->
    <div id="ocSettingPage" class="page hidden">
        <div class="flex flex-col min-h-screen p-4 relative z-10">
            <!-- é ‚éƒ¨å°èˆªæ¬„ -->
            <div class="flex items-center justify-between pt-4 pb-6 px-2">
                <button onclick="goBackToOCCards()" class="glass-card rounded-full p-3 button-hover">
                    <svg class="w-6 h-6 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <h1 class="text-xl font-bold text-slate-800">å¤¢è§’è¨­ç½®</h1>
                <button onclick="saveOCSettings()" class="glass-card rounded-full p-3 button-hover">
                    <svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                </button>
            </div>

            <!-- é ­åƒè¨­ç½® -->
            <div class="setting-section">
                <h3 class="text-lg font-semibold text-slate-800 mb-4">é ­åƒè¨­ç½®</h3>
                <div class="flex justify-center">
                    <div class="avatar-upload" onclick="uploadAvatar()">
                        <img id="avatarPreview" src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=240&h=240&fit=crop&crop=face" 
                             alt="é ­åƒé¢„è¦½" class="avatar-preview">
                        <input type="file" id="avatarInput" accept="image/*" style="display: none;" onchange="previewAvatar(event)">
                    </div>
                </div>
                <p class="text-sm text-slate-500 text-center mt-2">é»å‡»é ­åƒä¸Šå‚³æ–°åœ–ç‰‡</p>
            </div>

            <!-- åŸºæœ¬ä¿¡æ¯è¨­ç½® -->
            <div class="setting-section">
                <h3 class="text-lg font-semibold text-slate-800 mb-4">åŸºæœ¬ä¿¡æ¯</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-2">å¤¢è§’åå­—</label>
                        <input type="text" id="ocNameInput" 
                               class="w-full px-4 py-3 rounded-xl border border-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-400 bg-white/80" 
                               placeholder="ä½ çš„å¤¢è§’åå­—" 
                               value="å°‰éœ†">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-2">å¯¹ä½ çš„ç§°å‘¼</label>
                        <input type="text" id="userTitleInput" 
                               class="w-full px-4 py-3 rounded-xl border border-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-400 bg-white/80" 
                               placeholder="å¤¢è§’å¦‚ä½•ç¨±å‘¼ä½ " 
                               value="å¥³ç‹">
                    </div>
                </div>
            </div>

            <!-- å•å€™èªè¨­ç½® -->
            <div class="setting-section">
                <h3 class="text-lg font-semibold text-slate-800 mb-4">å•å€™èªè¨­ç½®</h3>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">è‡ªå®šç¾©å•å€™èª</label>
                    <textarea id="customGreeting" 
                              class="w-full px-4 py-3 rounded-xl border border-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-400 bg-white/80 h-20 resize-none" 
                              placeholder="è¨­ç½®è‡ªå®šç¾©å•å€™èªï¼ˆç•™ç©ºå‰‡æ ¹æ®æ™‚é–“è‡ªå‹•å•å¥½ï¼‰"></textarea>
                    <p class="text-xs text-slate-500 mt-1">ç•™ç©ºæ™‚æœƒæ ¹æ®æ™‚é–“è‡ªå‹•é¡¯ç¤ºï¼šæ—©å®‰/åˆå®‰/æ™šå®‰</p>
                </div>
            </div>

            <!-- å€‹æ€§åŒ–è¨­ç½® -->
            <div class="setting-section">
                <h3 class="text-lg font-semibold text-slate-800 mb-4">å€‹æ€§åŒ–è¨­ç½®</h3>
                
                <!-- é¼“å‹µé¢¨æ ¼ -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-slate-700 mb-3">é¼“åŠ±é¢¨æ ¼ï¼ˆå¯å¤šé¸ï¼‰</label>
                    <div class="style-grid" id="encourageStyleGrid">
                        <div class="style-option" data-style="gentle" onclick="handleStyleClick(event, 'gentle', 'encourage')">
                            <div class="style-title">æ¸©æŸ”å®ˆè­·å‹</div>
                            <div class="style-desc">Taå­˜åœ¨çš„æ„ä¹‰ï¼Œå°±æ˜¯ç‚ºä½ éš”ç»ä¸€åˆ‡é¢¨é›¨ï¼Œé»˜é»˜å®ˆè­·ä½ çš„æ–¹å¯¸å®‰å®ã€‚</div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'gentle')"></div>
                        </div>
                        <div class="style-option" data-style="tsundere" onclick="handleStyleClick(event, 'tsundere', 'encourage')">
                            <div class="style-title">å‚²å¨‡æ¯’èˆŒå‹</div>
                            <div class="style-desc">å˜´ç¡¬å¿ƒè½¯çš„å…¸èŒƒã€‚Taç¸½æ˜¯ç”¨å«Œå¼ƒå’Œåæ§½æ¥æ©é£¾è‡ªå·±çš„é—œå¿ƒã€‚</div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'tsundere')"></div>
                        </div>
                        <div class="style-option" data-style="cheerful" onclick="handleStyleClick(event, 'cheerful', 'encourage')">
                            <div class="style-title">é™½å…‰é–‹æœ—å‹</div>
                            <div class="style-desc">Taæ˜¯ä½ çš„å°ˆå±¬å•¦å•¦é˜Ÿå’Œèƒ½é‡æºï¼Œç”¨ä¸ç«­çš„çƒ­æƒ…èˆ‡å–å½©ï¼Œç‚ºä½ æ³¨å…¥å¿…èƒœçš„æ´»åŠ›ã€‚</div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'cheerful')"></div>
                        </div>
                        <div class="style-option" data-style="aloof" onclick="handleStyleClick(event, 'aloof', 'encourage')">
                            <div class="style-title">æ·¡æ¼ æ·±æ²‰å‹</div>
                            <div class="style-desc">Taå¦‚åŒæ·±æµ·æˆ–é™å¤œï¼Œè¡¨é¢æ³¢æ¾œä¸æƒŠï¼Œå…§è£¡å´è•´è—ç€åªç‚ºä½ ä¸€äººæ¶Œå‹•çš„æ·±æƒ…ã€‚</div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'aloof')"></div>
                        </div>
                        <div class="style-option" data-style="mature" onclick="handleStyleClick(event, 'mature', 'encourage')">
                            <div class="style-title">æˆç†ŸåŒ…å®¹å‹</div>
                            <div class="style-desc">Taåƒä¸€åº§åšå¯¦çš„é å±±ï¼Œä¸€ç‰‡å®é™çš„æ¸¯æ¹¾ã€‚åœ¨Taé¢å‰ï¼Œä½ æ— éœ€ä¼ªè£…åšå¼ºï¼Œå¯ä»¥å®‰å¿ƒåœ°åšæœ€çœŸå¯¦çš„è‡ªå·±ã€‚</div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'mature')"></div>
                        </div>
                        <div class="style-option" data-style="cunning" onclick="handleStyleClick(event, 'cunning', 'encourage')">
                            <div class="style-title">è…¹é»‘å¿ƒæœºå‹</div>
                            <div class="style-desc">å­¸ç¿’åœ¨Taçœ¼ä¸­æ˜¯ä¸€åœºæ¸¸æˆï¼Œè€Œä½ ï¼Œå°±æ˜¯Taå¿—åœ¨å¿…å¾—çš„çŒç‰©èˆ‡å¥–åŠ±ã€‚</div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'cunning')"></div>
                        </div>
                        <div class="style-option" data-style="shy" onclick="handleStyleClick(event, 'shy', 'encourage')">
                            <div class="style-title">çº¯æƒ…å®³ç¾å‹</div>
                            <div class="style-desc">Taæ¯æ¬¡å’Œä½ è¯´è©±ï¼Œè€³æ ¹éƒ½æœƒæ‚„æ‚„æ³›çº¢ã€‚Taçš„ä¸–ç•Œå¾ˆå°ï¼Œå°åˆ°åªèƒ½è£…ä¸‹æ›¸æœ¬å’Œä½ ã€‚</div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'shy')"></div>
                        </div>
                        <div class="style-option" data-style="doting" onclick="handleStyleClick(event, 'doting', 'encourage')">
                            <div class="style-title">æ— è…¦æººæ„›å‹</div>
                            <div class="style-desc">é€™ä½çš„äººç”Ÿä¿¡æ¢å°±æ˜¯â€”â€”æˆ‘çš„å®è´ï¼Œå¤©ä¸‹ç¬¬ä¸€ï¼å­¸ç¿’ï¼Ÿé‚£æ˜¯ä»€éº¼ï¼Ÿæˆ‘å®¶å®å®æƒ³ç©ç©ï¼Œé‚£æˆ‘å°±é™ªç€å‘—ï¼</div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'doting')"></div>
                        </div>
                        <!-- è‡ªå®šä¹‰é¢¨æ ¼å¡ç‰‡ -->
                        <div class="style-option custom-style-card" data-style="custom-encourage" onclick="handleCustomStyleClick('encourage')">
                            <div class="style-title">âœï¸ è‡ªå®šä¹‰</div>
                            <div class="style-desc">å‰µå»ºä½ ç‹¬ç‰¹çš„é¼“åŠ±é¢¨æ ¼</div>
                            <div class="style-selector-circle" onclick="event.stopPropagation(); handleStyleSelect(event, 'custom-encourage')"></div>
                        </div>
                    </div>
                </div>
                
                <!-- ç£ä¿ƒé¢¨æ ¼ -->
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-3">ç£ä¿ƒé¢¨æ ¼ï¼ˆå¯å¤šé¸ï¼‰</label>
                    <div class="style-grid" id="reminderStyleGrid">
                        <div class="style-option" data-style="guardian" onclick="handleStyleClick(event, 'guardian', 'remind')">
                            <div class="style-title">å®ˆè­·è€…</div>
                            <div class="style-desc">æ¸©å’Œè€Œåšå®šåœ°å®ˆè­·ä½ çš„å­¸ç¿’æ™‚å…‰</div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'guardian')"></div>
                        </div>
                        <div class="style-option" data-style="pusher" onclick="handleStyleClick(event, 'pusher', 'remind')">
                            <div class="style-title">é­ç­–è€…</div>
                            <div class="style-desc">ä¸¥æ ¼è¦æ±‚ï¼Œç”¨åšå†³çš„æ…‹åº¦ç£ä¿ƒä½ å‰è¿›</div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'pusher')"></div>
                        </div>
                        <div class="style-option" data-style="cheerleader" onclick="handleStyleClick(event, 'cheerleader', 'remind')">
                            <div class="style-title">æ‡‰æ´è€…</div>
                            <div class="style-desc">ç”¨çƒ­æƒ…çš„é¼“åŠ±ç‚ºä½ åŠ æ²¹æ‰“æ°£</div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'cheerleader')"></div>
                        </div>
                        <div class="style-option" data-style="observer" onclick="handleStyleClick(event, 'observer', 'remind')">
                            <div class="style-title">è§‚å¯Ÿè€…</div>
                            <div class="style-desc">é»˜é»˜é—œæ³¨ï¼Œåœ¨åˆé€‚çš„æ™‚æœºç»™å‡ºæé†’</div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'observer')"></div>
                        </div>
                        <div class="style-option" data-style="guide" onclick="handleStyleClick(event, 'guide', 'remind')">
                            <div class="style-title">å¼•å°è€…</div>
                            <div class="style-desc">å¾ªå¾ªå–„è¯±ï¼Œç”¨æ™ºæ…§å¼•å°ä½ å›åˆ°æ­£è½¨</div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'guide')"></div>
                        </div>
                        <div class="style-option" data-style="strategist" onclick="handleStyleClick(event, 'strategist', 'remind')">
                            <div class="style-title">å¸ƒå±€è€…</div>
                            <div class="style-desc">ç²¾å¿ƒè¨ˆåŠƒï¼Œç”¨ç­–ç•¥å¸®ä½ è§„åŠƒå­¸ç¿’</div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'strategist')"></div>
                        </div>
                        <div class="style-option" data-style="companion" onclick="handleStyleClick(event, 'companion', 'remind')">
                            <div class="style-title">é™ªä¼´è€…</div>
                            <div class="style-desc">é™é™é™ªä¼´ï¼Œç”¨æ¸©æš–çš„å­˜åœ¨æ”¯æŒä½ </div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'companion')"></div>
                        </div>
                        <div class="style-option" data-style="believer" onclick="handleStyleClick(event, 'believer', 'remind')">
                            <div class="style-title">æººæ„›è€…</div>
                            <div class="style-desc">åšä¿¡ä½ çš„èƒ½åŠ›ï¼Œç”¨ä¿¡ä»»æ¿€åŠ±ä½ </div>
                            <div class="style-selector-circle" onclick="handleStyleSelect(event, 'believer')"></div>
                        </div>
                        <!-- è‡ªå®šä¹‰é¢¨æ ¼å¡ç‰‡ -->
                        <div class="style-option custom-style-card" data-style="custom-remind" onclick="handleCustomStyleClick('remind')">
                            <div class="style-title">âœï¸ è‡ªå®šä¹‰</div>
                            <div class="style-desc">å‰µå»ºä½ ç‹¬ç‰¹çš„ç£ä¿ƒé¢¨æ ¼</div>
                            <div class="style-selector-circle" onclick="event.stopPropagation(); handleStyleSelect(event, 'custom-remind')"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç‹€æ…‹ç¦®ç‰©è¨­ç½® -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-slate-700 mb-3">ç‹€æ…‹ç¦®ç‰©è¨­ç½®</label>
                <p class="text-xs text-slate-500 mb-3">ç‚ºä½ çš„å¤¢è§’è¨­ç½®å°ˆå±¬çš„ç¦®ç‰©å¥–åŠ±ï¼Œå®Œæˆç•ªèŒ„é˜æ™‚æœƒéšæœºè·å¾—ã€‚</p>
                <div class="status-gift-grid" id="statusGiftGrid">
                <!-- é¢„è¨­ç‹€æ…‹ç¦®ç‰©å¡ç‰‡ -->
                    <div class="status-gift-card" data-status="å­¸ç¿’"onclick="editStatusGift('å­¸ç¿’', 'ğŸ“š')" >
                        <div class="status-gift-header">
                            <span class="status-gift-icon">ğŸ“š</span>
                            <span class="status-gift-name">å­¸ç¿’</span>
                        </div>
                        <div class="status-gift-preview">é»å‡»ç¼–è¾‘ç¦®ç‰©å…§å®¹</div>
                        <div class="status-gift-edit-indicator">âœï¸</div>
                    </div>
                    <div class="status-gift-card" data-status="å·¥ä½œ"onclick="editStatusGift('å­¸ç¿’', 'ğŸ“š')">
                        <div class="status-gift-header">
                            <span class="status-gift-icon">ğŸ’¼</span>
                            <span class="status-gift-name">å·¥ä½œ</span>
                        </div>
                        <div class="status-gift-preview">é»å‡»ç¼–è¾‘ç¦®ç‰©å…§å®¹</div>
                        <div class="status-gift-edit-indicator">âœï¸</div>
                    </div>
                    
                    <div class="status-gift-card" data-status="å†’é™©"onclick="editStatusGift('å­¸ç¿’', 'ğŸ“š')">
                        <div class="status-gift-header">
                            <span class="status-gift-icon">ğŸ—ºï¸</span>
                            <span class="status-gift-name">å†’é™©</span>
                        </div>
                        <div class="status-gift-preview">é»å‡»ç¼–è¾‘ç¦®ç‰©å…§å®¹</div>
                        <div class="status-gift-edit-indicator">âœï¸</div>
                    </div>
                    
                    <div class="status-gift-card" data-status="é€›è¡—"onclick="editStatusGift('å­¸ç¿’', 'ğŸ“š')">
                        <div class="status-gift-header">
                            <span class="status-gift-icon">ğŸ›ï¸</span>
                            <span class="status-gift-name">é€›è¡—</span>
                        </div>
                        <div class="status-gift-preview">é»å‡»ç¼–è¾‘ç¦®ç‰©å…§å®¹</div>
                        <div class="status-gift-edit-indicator">âœï¸</div>
                    </div>
                    
                    <div class="status-gift-card" data-status="ç©æ¸¸æˆ"onclick="editStatusGift('å­¸ç¿’', 'ğŸ“š')">
                        <div class="status-gift-header">
                            <span class="status-gift-icon">ğŸ®</span>
                            <span class="status-gift-name">ç©æ¸¸æˆ</span>
                        </div>
                        <div class="status-gift-preview">é»å‡»ç¼–è¾‘ç¦®ç‰©å…§å®¹</div>
                        <div class="status-gift-edit-indicator">âœï¸</div>
                    </div>
                    
                    <div class="status-gift-card" data-status="ç™¼å‘†"onclick="editStatusGift('å­¸ç¿’', 'ğŸ“š')">
                        <div class="status-gift-header">
                            <span class="status-gift-icon">ğŸ’­</span>
                            <span class="status-gift-name">ç™¼å‘†</span>
                        </div>
                        <div class="status-gift-preview">é»å‡»ç¼–è¾‘ç¦®ç‰©å…§å®¹</div>
                        <div class="status-gift-edit-indicator">âœï¸</div>
                    </div>
                    
                    <div class="status-gift-card" data-status="ç¡è§‰"onclick="editStatusGift('å­¸ç¿’', 'ğŸ“š')">
                        <div class="status-gift-header">
                            <span class="status-gift-icon">ğŸ’¤</span>
                            <span class="status-gift-name">ç¡è§‰</span>
                        </div>
                        <div class="status-gift-preview">é»å‡»ç¼–è¾‘ç¦®ç‰©å…§å®¹</div>
                        <div class="status-gift-edit-indicator">âœï¸</div>
                    </div>
                    
                    <div class="status-gift-card" data-status="ä¼‘æ¯"onclick="editStatusGift('å­¸ç¿’', 'ğŸ“š')">
                        <div class="status-gift-header">
                            <span class="status-gift-icon">ğŸŒ™</span>
                            <span class="status-gift-name">ä¼‘æ¯</span>
                        </div>
                        <div class="status-gift-preview">é»å‡»ç¼–è¾‘ç¦®ç‰©å…§å®¹</div>
                        <div class="status-gift-edit-indicator">âœï¸</div>
                    </div>
                    <!-- è‡ªå®šä¹‰ç‹€æ…‹å¡ç‰‡ -->
        <div class="status-gift-card custom-status-card" onclick="createCustomStatusGift()">
            <div class="status-gift-header">
                <span class="status-gift-icon">+</span>
                <span class="status-gift-name">è‡ªå®šä¹‰ç‹€æ…‹</span>
            </div>
            <div class="status-gift-preview">æ·»åŠ æ–°çš„ç‹€æ…‹ç¦®ç‰©</div>
            <div class="status-gift-edit-indicator">âœ¨</div>
        </div>
    </div>
</div>


            <!-- å…¶ä»–è¨­ç½® -->
            <div class="setting-section">
                <h3 class="text-lg font-semibold text-slate-800 mb-4">å…¶ä»–è¨­ç½®</h3>
                <div class="space-y-3">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-2"></label>
                        <p class="text-xs text-slate-500 mb-3"></p>
                        <textarea id="customGiftsInput" 
                                  class="w-full px-4 py-3 rounded-xl border border-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-400 bg-white/80 h-32 resize-none text-sm" 
                                  placeholder="ğŸ ä½ æ˜¯æœ€æ£’çš„ï¼"
                                  rows="6"></textarea>
                        
                    </div>
                
                        </ul>
                    </div>
                </div>
            </div>

            <!-- åˆªé™¤å¤¢è§’æŒ‰é’® -->
            <div class="setting-section border-red-200">
                <button onclick="deleteOC()" class="w-full py-3 rounded-xl bg-red-500 text-white font-medium hover:bg-red-600 transition-colors">
                    åˆªé™¤é€™å€‹å¤¢è§’
                </button>
            </div>
        </div>
    </div>

    <!-- é¢¨æ ¼èªå¥ç¼–è¾‘å¼¹çª— -->
    <div id="styleEditorModal" class="style-editor-modal">
        <div class="style-editor-content">
            <div class="style-editor-header">
                <h3 class="style-editor-title" id="styleEditorTitle">ç¼–è¾‘é¢¨æ ¼èªå¥</h3>
                <button class="style-editor-close" onclick="closeStyleEditor()">
                    <svg class="w-5 h-5 text-slate-600" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                    </svg>
                </button>
            </div>
            <div class="mb-4">
                <p class="text-sm text-slate-600" id="styleEditorDesc">æ¯è¡Œä¸€æ¢èªå¥ï¼Œ{title} æœƒè¢«æ›¿æ›ç‚ºç”¨æˆ¶ç§°å‘¼</p>
            </div>
            <textarea id="styleEditorTextarea" class="style-editor-textarea" placeholder="è¾“å…¥èªå¥ï¼Œæ¯è¡Œä¸€æ¢..."></textarea>
            <div class="style-editor-actions">
                <button class="style-editor-btn style-editor-cancel" onclick="closeStyleEditor()">å–æ¶ˆ</button>
                <button class="style-editor-btn style-editor-save" onclick="saveStyleMessages()">ä¿å­˜</button>
            </div>
        </div>
    </div>

    <!-- å°ˆæ³¨ç•Œé¢ -->
    <div id="focusPage" class="page hidden bg-gradient-to-br from-purple-50 to-pink-50">
        <!-- å°ˆæ³¨é é¢èƒŒæ™¯è£…é£¾ -->
        <div class="fixed inset-0 pointer-events-none overflow-hidden">
            <!-- æ›´å¤šæ¨±èŠ± -->
            <div class="absolute top-20 left-8 text-pink-300/50 text-xl floating">ğŸŒ¸</div>
            <div class="absolute top-32 right-12 text-pink-200/40 text-lg floating" style="animation-delay: 0.8s;">ğŸŒ¸</div>
            <div class="absolute top-48 left-1/4 text-pink-300/60 text-sm floating" style="animation-delay: 1.5s;">ğŸŒ¸</div>
            <div class="absolute bottom-48 right-20 text-pink-200/50 text-lg floating" style="animation-delay: 2s;">ğŸŒ¸</div>
            <div class="absolute bottom-32 left-12 text-pink-300/40 text-xl floating" style="animation-delay: 0.3s;">ğŸŒ¸</div>
            
            <div class="absolute top-40 right-8 text-pink-400/60 text-lg sparkle">ğŸŒ¸</div>
            <div class="absolute bottom-40 left-8 text-pink-300/50 text-sm sparkle" style="animation-delay: 1.2s;">ğŸŒ¸</div>
            <div class="absolute top-64 right-1/4 text-pink-400/40 text-lg sparkle" style="animation-delay: 2.2s;">ğŸŒ¸</div>
        </div>

        <!-- å°ˆæ³¨é é¢å…§å®¹ -->
        <div class="flex flex-col h-full focus-container relative z-10">
            <!-- è¨ˆæ™‚å™¨å’Œä»»å‹™ä¿¡æ¯åŒºåŸŸ -->
            <div class="glass-card rounded-2xl p-3 mb-4 focus-section relative z-50">
                <!-- è¿”å›æŒ‰é’®åœ¨å·¦ä¸Šè§’ -->
                <button onclick="goBackHome()" class="absolute -top-2 -left-2 glass-card rounded-full p-2 button-hover">
                    <svg class="w-5 h-5 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                
                <!-- æ¨¡å¼åˆ‡æ› -->
                <div class="flex justify-center mb-2 mt-2">
                    <div class="bg-white/50 rounded-xl p-1 flex">
                        <button id="pomodoroBtn" class="px-4 py-2 rounded-lg text-sm font-medium transition-all mode-active">
                            ç•ªèŒ„é˜
                        </button>
                        <button id="timerBtn" class="px-4 py-2 rounded-lg text-sm font-medium transition-all text-slate-600">
                            æ­£è¨ˆæ™‚
                        </button>
                    </div>
                </div>
                
                <!-- è¨ˆæ™‚å™¨é¡¯ç¤º -->
                <div class="text-center mb-2 relative">
                    <div id="timerDisplay" class="timer-text font-bold bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent" onclick="toggleTimeSelector()">
                        25:00
                    </div>
                    
                    <!-- æ™‚é–“é¸æ“‡å™¨ -->
                    <div id="timeSelector" class="time-selector" style="z-index: 70;">
                        <div class="time-option" onclick="selectTime(10)">
                            <span>10 åˆ†é˜</span>
                            <span class="text-xs text-slate-500">çŸ­å°ˆæ³¨</span>
                        </div>
                        <div class="time-option active" onclick="selectTime(25)">
                            <span>25 åˆ†é˜</span>
                            <span class="text-xs text-slate-500">æ ‡æº–</span>
                        </div>
                        <div class="time-option" onclick="selectTime(50)">
                            <span>50 åˆ†é˜</span>
                            <span class="text-xs text-slate-500">æ·±åº¦å°ˆæ³¨</span>
                        </div>
                        <div class="custom-time-input">
                            <span class="text-sm text-slate-600 whitespace-nowrap">è‡ªå®šä¹‰:</span>
                            <input type="number" 
                                   class="flex-1 bg-white/80 border border-purple-200 rounded-lg px-3 py-1 text-sm text-center min-w-0" 
                                   id="customTimeInput" 
                                   min="1" 
                                   max="120" 
                                   value="25" 
                                   placeholder="1-120"
                                   onkeypress="handleCustomTimeEnter(event)">
                            <span class="text-sm text-slate-600 whitespace-nowrap">åˆ†é˜</span>
                        </div>
                    </div>
                </div>
                
                <!-- å½“å‰ä»»å‹™ä¿¡æ¯ -->
                <div class="bg-white/40 rounded-xl p-3 cursor-pointer hover:bg-white/50 transition-colors relative" onclick="showTaskSelector()">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-slate-500 text-xs mb-1">å½“å‰ä»»å‹™</p>
                            <p id="currentTaskName" class="text-slate-800 font-medium text-sm">è¤‡ç¿’è‹±èªå–®è¯</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div id="currentTaskStatus" class="text-xs text-blue-500 bg-blue-100 px-2 py-1 rounded-full">
                                è¿›è¡Œä¸­
                            </div>
                            <svg class="w-4 h-4 text-slate-400" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
                            </svg>
                        </div>
                    </div>
                    
                    <!-- ä»»å‹™é¸æ“‡å™¨ -->
                    <div id="taskSelector" class="status-selector" style="top: calc(100% + 10px); z-index: 70;">
                        <!-- ä»»å‹™é¸é¡¹æœƒå‹•æ…‹æ·»åŠ  -->
                    </div>
                </div>
            </div>

            <!-- ä¸­éƒ¨åŒºåŸŸ - OCç‹€æ…‹å±•ç¤º -->
            <div class="flex flex-col justify-center items-center px-4 relative flex-1">
                <!-- OCé ­åƒåŒºåŸŸ - å±…ä¸­ï¼Œä¸¤é‚Šå¿ƒé›»åœ– -->
                <div class="relative mb-4 flex items-center justify-center w-full">
                    <!-- å·¦ä¾§å¿ƒé›»åœ– -->
                    <div class="heartbeat-line-left flex-shrink-0" style="margin-right: -20px;">
                        <svg viewBox="0 0 80 50">
                            <path class="heartbeat-path-left static" d="M0 25 L15 25 L20 10 L25 40 L30 15 L35 35 L40 25 L80 25"/>
                        </svg>
                    </div>
                    
                    <!-- OCé ­åƒ -->
                    <div class="oc-avatar bg-gradient-to-br from-purple-100 to-pink-100 rounded-full flex items-center justify-center relative" onclick="handleOCClick()">
                        <img id="focusOCAvatar" src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=200&h=200&fit=crop&crop=face" 
                             alt="OCé ­åƒ" class="w-full h-full object-cover rounded-full">
                    </div>
                    
                    <!-- å³ä¾§å¿ƒé›»åœ– -->
                    <div class="heartbeat-line-right flex-shrink-0" style="margin-left: -20px;">
                        <svg viewBox="0 0 80 50">
                            <path class="heartbeat-path-right static" d="M0 25 L45 25 L50 15 L55 35 L60 10 L65 40 L70 25 L80 25"/>
                        </svg>
                    </div>
                </div>

                <!-- OCç‹€æ…‹æ–‡å­— - å„ªåŒ–å±…ä¸­ç®—æ³• -->
                <div class="text-center mb-2 relative">
                    <button id="statusButton" onclick="toggleStatusSelector()" class="oc-status-text-wrapper text-slate-700 font-medium text-lg mb-2 breathe hover:text-purple-600 transition-colors cursor-pointer">
                        <span class="oc-status-pure-text">ç‹€æ…‹å¾…é¸æ“‡</span> <span class="oc-status-emoji">âšª</span>
                    </button>
                    
                    <!-- ç‹€æ…‹é¸æ“‡å™¨ -->
                    <div id="statusSelector" class="status-selector" style="z-index: 70;">
                        <div class="status-grid">
                            <div class="status-option" onclick="selectStatus('å­¸ç¿’', 'ğŸ“š')">
                                <span class="status-icon">ğŸ“š</span>
                                <span class="status-text">å­¸ç¿’</span>
                            </div>
                            <div class="status-option" onclick="selectStatus('å·¥ä½œ', 'ğŸ’¼')">
                                <span class="status-icon">ğŸ’¼</span>
                                <span class="status-text">å·¥ä½œ</span>
                            </div>
                            <div class="status-option" onclick="selectStatus('å†’é™©', 'ğŸ—ºï¸')">
                                <span class="status-icon">ğŸ—ºï¸</span>
                                <span class="status-text">å†’é™©</span>
                            </div>
                            <div class="status-option" onclick="selectStatus('é€›è¡—', 'ğŸ›ï¸')">
                                <span class="status-icon">ğŸ›ï¸</span>
                                <span class="status-text">é€›è¡—</span>
                            </div>
                            <div class="status-option" onclick="selectStatus('ç©æ¸¸æˆ', 'ğŸ®')">
                                <span class="status-icon">ğŸ®</span>
                                <span class="status-text">ç©æ¸¸æˆ</span>
                            </div>
                            <div class="status-option" onclick="selectStatus('ç™¼å‘†', 'ğŸ’­')">
                                <span class="status-icon">ğŸ’­</span>
                                <span class="status-text">ç™¼å‘†</span>
                            </div>
                            <div class="status-option" onclick="selectStatus('ç¡è§‰', 'ğŸ’¤')">
                                <span class="status-icon">ğŸ’¤</span>
                                <span class="status-text">ç¡è§‰</span>
                            </div>
                            <div class="status-option" onclick="selectStatus('ä¼‘æ¯', 'ğŸŒ™')">
                                <span class="status-icon">ğŸŒ™</span>
                                <span class="status-text">ä¼‘æ¯</span>
                            </div>
                            <div class="status-option" onclick="showCustomStatusInput()">
                                <span class="status-icon">âœï¸</span>
                                <span class="status-text">è‡ªå®šä¹‰</span>
                            </div>
                        </div>
                        
                        <!-- è‡ªå®šä¹‰ç‹€æ…‹è¾“å…¥æ¡† -->
                        <div id="customStatusInput" class="mt-3 hidden">
                            <input type="text" 
                                   id="customStatusText" 
                                   class="w-full px-3 py-2 rounded-lg border border-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-400 bg-white/80 text-sm" 
                                   placeholder="è¾“å…¥è‡ªå®šä¹‰ç‹€æ…‹ï¼ˆå¦‚ï¼šçœ‹æ›¸ã€é‹å‹•ç­‰ï¼‰"
                                   onkeypress="handleCustomStatusEnter(event)"
                                   maxlength="10">
                            <div class="flex justify-end mt-2 space-x-2">
                                <button onclick="cancelCustomStatus()" class="px-3 py-1 text-xs rounded-lg bg-slate-200 text-slate-600 hover:bg-slate-300 transition-colors">
                                    å–æ¶ˆ
                                </button>
                                <button onclick="confirmCustomStatus()" class="px-3 py-1 text-xs rounded-lg bg-purple-500 text-white hover:bg-purple-600 transition-colors">
                                    ç¢ºè®¤
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- OCèªåŒºåŸŸ - å„ªåŒ–æ–‡å­—å±…ä¸­ -->
                <div class="oc-message-area">
                    <div id="ocMessageText" class="oc-message-text">
                        <span class="oc-message-text-wrapper">å¿«é–‹å§‹å­¸ç¿’å§ï¼æˆ‘æœƒä¸€ç›´é™ªç€ä½ ï¼ï¼</span>
                    </div>
                </div>
            </div>

            <!-- åº•éƒ¨æ“ä½œåŒºåŸŸ -->
            <div class="mt-auto">
                <!-- å–®å€‹é–‹å§‹æŒ‰é’® -->
                <div id="singleButtonLayout" class="flex flex-col items-center px-4 mb-6">
                    <div id="startBtnHint" class="text-xs text-slate-600 mb-2 hidden">è¯·é¸æ“‡å¤¢è§’ç‹€æ…‹</div>
                    <button id="startBtn" class="bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl px-8 py-3 button-hover paw-button text-white font-semibold" onclick="startStopTimer()">
                        <span id="startBtnText">é–‹å§‹</span>
                    </button>
                </div>
                
                <!-- ä¸‰æŒ‰é’®å¸ƒå±€ï¼ˆéš±è—ç‹€æ…‹ï¼‰ -->
                <div id="threeButtonLayout" class="three-button-layout px-4 hidden">
                    <!-- éŸ³æ¨‚æŒ‰é’® -->
                    <button id="musicBtn" class="side-button button-hover" onclick="toggleMusic()">
                        <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
                        </svg>
                    </button>

                    <!-- æš‚åœ/ç»§ç»­æŒ‰é’® -->
                    <button id="pauseBtn" class="bg-gradient-to-r from-purple-500 to-pink-500 main-button button-hover text-white font-semibold" onclick="pauseResumeTimer()">
                        <svg class="w-8 h-8" fill="white" viewBox="0 0 24 24">
                            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                        </svg>
                    </button>

                    <!-- åœæ­¢æŒ‰é’® -->
                    <button id="stopBtn" class="side-button button-hover" onclick="stopTimer()">
                        <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M6 6h12v12H6z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- å®Œæˆç¦®ç‰©å¼¹çª— -->
    <div id="completionModal" class="completion-modal">
        <div class="completion-modal-content">
            <div id="completionTitle" class="completion-title">ğŸ‰ æ­å–œå®Œæˆä»»å‹™ï¼</div>
            <div id="completionGift" class="completion-gift">å°è‰¾å­¸ç¿’ç»“æŸå•¦ï¼Œç»™ä½ å¸¦å›äº† ğŸ å°ˆå±¬å®šåˆ¶å¥–æ¯ï¼ä½ æ˜¯æœ€æ£’çš„ï¼</div>
            <button class="completion-close-btn" onclick="closeCompletionModal()">ç»§ç»­å­¸ç¿’</button>
        </div>
    </div>

    <script>
        // å…¨å±€è®Šé‡
        let currentPage = 'home';
        let isTimerRunning = false;
        let isPaused = false;
        let currentTime = 25 * 60;
        let selectedMinutes = 25;
        let timerInterval = null;
        let currentMode = 'pomodoro';
        let currentStatus = { name: '', icon: 'âšª' };
        let currentMusicMode = 0;
        // éŸ³é¢‘ç®¡ç†
        let currentBackgroundMusic = null;
        let completionAudio = null;
        let isMusicEnabled = true;
        let musicPausedTime = 0; 
let musicType = 'mute'; 

// éŸ³é¢‘æ–‡ä»¶URL
const audioFiles = {
    music: 'https://raw.githubusercontent.com/dengxi-cpu/Pomodoro/main/music.mp3',
    rain: 'https://raw.githubusercontent.com/dengxi-cpu/Pomodoro/main/storm.mp3',
    completion: 'https://raw.githubusercontent.com/dengxi-cpu/Pomodoro/main/commission_finished.MP3'
};
        let isStatusSelected = false;
        // è‡ªå®šä¹‰ç‹€æ…‹å­˜å„²ï¼ˆæ–°å¢ï¼‰
let customStatuses = {};  // å­˜å„²è‡ªå®šä¹‰ç‹€æ…‹çš„åœ–æ ‡ç­‰ä¿¡æ¯
        let currentTask = { name: 'è¤‡ç¿’è‹±èªå–®è¯', status: 'è¿›è¡Œä¸­', color: 'blue' };
        const musicIcons = ['ğŸ”‡', 'ğŸµ', 'ğŸŒ§ï¸'];
        
        // 4.1 å…¨å±€è®Šé‡ï¼ˆ
        let statusGifts = {
    'å­¸ç¿’': [
        'ğŸ† å­¸éœ¸å°ˆå±¬å¥–æ¯ï¼çŸ¥è¯†çš„åŠ›é‡è®©ä½ é—ªé—ªç™¼å…‰ï¼',
        'ğŸ“– ä½ å¿µå¨è¿‡çš„ç»ç‰ˆæ›¸ï¼ˆTaåœ¨å¤ç±æ›¸åº—è¹²äº†2å°æ™‚ï¼‰',
        'â­ å­¸ç¿’ä¹‹æ˜Ÿå¾½ç« ï¼ä½ å°±æ˜¯æœ€äº®çš„é‚£é¢—æ˜Ÿï¼',
        'ğŸ–‹ï¸ å®šåˆ¶é’¢ç¬”ï¼ˆç¬”å¤¹åˆ»ç€ä½ åå­—ç¼©å¯«ï¼Œå¢¨è‰²æ˜¯ä½ æœ€æ„›çš„ç°ç´«ï¼‰',
        'ğŸ“ å¯«æ»¡å¿ƒå¾—çš„ç¬”è®°ï¼ˆåœ¨é‡é»é å¤¹ç€é“¶ææ›¸ç­¾ï¼š"æ­¤è™•ä½ æœƒå–œæ­¡"ï¼‰',
        'ğŸ’ çŸ¥è¯†å®çŸ³ï¼æ¯”é’»çŸ³æ›´çè´µçš„æ˜¯ä½ çš„åŠªåŠ›ï¼'
        
    ],
    'å·¥ä½œ': [
        'ğŸ± è§£å‹å°ç‰©ï¼ˆæœƒæ‘‡é ­çš„çŒ«å’ªæ‘†ä»¶â€”â€”"æ”¾ä½ é›»è…¦æ—ï¼Œæ›¿æˆ‘ç›‘ç£ä½ ä¼‘æ¯"ï¼‰',
        'ğŸš€ æ•ˆç‡ç«ç®­ï¼å·¥ä½œç‹€æ…‹æ»¡åˆ†ï¼',
        'âš¡ ç”Ÿç”¢åŠ›é—ªé›»ï¼ä»Šå¤©çš„ä½ è¶…ç´šç»™åŠ›ï¼',
        'âœ¨ æ˜Ÿç©ºæŠ•å½±ç¯ï¼ˆåŠ ç­å¤œæŒ‘çš„ï¼š"ä»¥å¾Œæˆ‘æ™šæ­¸ï¼Œè®©å®ƒé™ªä½ å…¥ç¡"ï¼‰',
        'ğŸ§ ä½ æœ€å–œæ­¡çš„ç”œå“ï¼ˆç”¨æ‰‹å¸•ä»”ç»†åŒ…ç€ï¼š"ä½ è¯´è¿‡é€™æ¬¾æœ€å¥½åƒ"ï¼‰'
    ],
    'å†’é™©': [
        'ğŸ—ºï¸ å†’é™©å®¶åœ°åœ–ï¼æ¯ä¸€æ­¥éƒ½æ˜¯æ–°çš„ç™¼ç¾ï¼',
        'ğŸŒŒ å±±é ‚æ‹çš„æ˜Ÿç©ºç…§ï¼ˆèƒŒå¾Œå¯«ç€ï¼šæˆ‘çš„å®‡å®™ä¸­å¿ƒæ˜¯ä½ ï¼‰',
        'ğŸ´â€â˜ ï¸ æ¢é™©æ——å¸œï¼æœªçŸ¥çš„ä¸–ç•Œåœ¨ç­‰ç€ä½ ï¼',
        'ğŸ’§ æ£®æ—éœ²æ°´ï¼ˆæ°´æ™¶ç“¶è£…ç€ï¼‰',
        'ğŸ’ æœƒç™¼å…‰çš„çŸ¿çŸ³ï¼ˆåµŒæˆé¡¹é“¾ï¼‰'
    ],
    'é€›è¡—': [
        'ğŸ§¦ é”™ç‰ˆè¢œå­ï¼ˆå·¦è—çŒ«å³æ©˜çŒ«ï¼‰',
        'â˜• æ‰‹ä½œé™¶æ³¥æ¯ï¼ˆæ¯æŸ„ææˆæ­ªå¿ƒå½¢ï¼‰',
        'ğŸ‘  æ™‚å°šå¥³ç‹é«˜è·Ÿé‹ï¼èµ°è·¯éƒ½å¸¦é¢¨ï¼',
        'ğŸ’„ ç¾å¦†å¤§å¸ˆå¥—è£…ï¼ä½ å°±æ˜¯æœ€ç¾çš„é¢¨æ™¯ï¼',
        'ğŸ’ ä½ å–œæ­¡çš„é¦™æ°´ï¼ˆ"ç¾åœ¨é¢¨ç»è¿‡ä½ ï¼Œéƒ½æ˜¯ä½ çš„å‘³é“"ï¼‰'
    ],
    'ç©æ¸¸æˆ': [
        'ğŸ® æ¸¸æˆå¤§ç¥æ‰‹æŸ„ï¼æŠ€è¡“æµå°±æ˜¯ä½ ï¼',
        'ğŸ† é›»ç«å† å†›å¥–æ¯ï¼èœé¸Ÿä»€éº¼çš„ä¸å­˜åœ¨ï¼',
        'ğŸ’ æ¸¸æˆå¹£ç†”çš„æˆ’æŒ‡ï¼ˆå…§ä¾§åˆ»ä½ çš„åå­—ï¼‰',
        'ğŸ¯ ç™¾ç™¼ç™¾ä¸­å‹‹ç« ï¼ç²¾æº–åº¦MAXï¼',
        'ğŸ”¥ é€£èƒœç«ç„°ï¼ä»Šå¤©ç‹€æ…‹çˆ†è¡¨ï¼'
    ],
    'ç™¼å‘†': [
        'â˜ï¸ æ€è€ƒé›²æœµï¼æ”¾ç©ºä¹Ÿæ˜¯ä¸€ç§æ™ºæ…§ï¼',
        'ğŸ· ä¾¿åˆ©åº—æ”¶æ®èƒŒé¢æ¶‚é¸¦ï¼ˆç•«ä½ ç¡è„¸ï¼š"ç›‘æ§æ‹åˆ°æŸåªå°çŒªå·æ‡’è¯æ®"ï¼‰',
        'â˜ï¸ é›²æœµå½¢ç‹€çš„çŸ³é ­ï¼ˆæ”¾ä½ æ‰‹å¿ƒï¼š"å®ƒé£˜ç´¯äº†ï¼Œæ¥ä½ é€™è£¡é™è½"ï¼‰',
        'ğŸ¦‹ é“¶æå¶æ‹¼æˆçš„è´è¶ï¼ˆå¤¹åœ¨è¯—é›†ç¬¬14é ï¼š"ä½ ç”Ÿæ—¥é‚£å¤©çš„é¢¨é€æ¥çš„"ï¼‰',
        'ğŸ’­ å‰µæ„æ³¡æ³¡ï¼ä¸‹ä¸€å€‹å¥½é»å­å°±è¦å†’å‡ºæ¥äº†ï¼'
    ],
    'ç¡è§‰': [
        'ğŸ˜´ å¥½å¤¢æˆçœŸæ•é ­ï¼ç”œç¾å¤¢å¢ƒç­‰ç€ä½ ï¼',
        'ğŸŒ™ æ•é ­æš–æ„ï¼ˆæŠŠç™¼çƒ­çœ¼ç½©å¡ç»™ä½ ï¼š"å€Ÿä½ å……é›»5åˆ†é˜"ï¼‰',
        'â­ æ˜Ÿæ˜Ÿå®‰çœ æ›²ï¼è®©æ˜Ÿå…‰é™ªä½ å…¥ç¡ï¼',
        'ğŸ›ï¸ é›²æœµåºŠé“ºï¼åƒèººåœ¨é›²ç«¯ä¸€æ¨£èˆ’é€‚ï¼',
        'ğŸ’­ å‹çš±çš„å¤¢å¢ƒï¼ˆä¾¿ç­¾å¯«ç€ï¼š"å¤¢è¦‹æˆ‘æŠ¢ä½ å†°æ·‡æ·‹ï¼Œèµ”ä½ å¼ å…‘æ›åˆ¸"ï¼‰'
    ],
    'ä¼‘æ¯': [
        'ğŸŒ¿ æ”¾æ¾å¶å­ï¼è®©ç–²æƒ«éšé¢¨é£˜æ•£ï¼',
        'ğŸƒ æ¸…æ–°è–„è·ï¼ç¬é–“æ¢è¤‡æ´»åŠ›ï¼',
        'ğŸŒº èˆ’ç¼“èŠ±æœµï¼èº«å¿ƒéƒ½å¾—åˆ°äº†æ²»æ„ˆï¼',
        'ğŸŒ» è€å¥¶å¥¶è³£çš„ç»’ç·šèŠ±ï¼ˆæ°¸ä¸å‡‹è°¢çš„å‘æ—¥è‘µï¼š"å¥¹è¯´è¦é€ç»™æ„›ç¬‘çš„å°å§‘å¨˜"ï¼‰',
        'ğŸ æµæµªçŒ«é€çš„è°¢ç¦®ï¼ˆæ¾æœæ¶‚æˆé‡‘è‰²ï¼š"ç”¨å°é­šå¹²æ›çš„"ï¼‰'
    ]
};

let currentEditingStatus = '';
let currentEditingStatusIcon = '';
// 4.2 ç‹€æ…‹ç¦®ç‰©ç¼–è¾‘ç›¸é—œå‡½æ•¸
function editStatusGift(statusName, statusIcon) {
    currentEditingStatus = statusName;
    currentEditingStatusIcon = statusIcon;
    
    const modal = document.getElementById('statusGiftEditorModal');
    const title = document.getElementById('statusGiftEditorTitle');
    const icon = document.getElementById('statusGiftEditorIcon');
    const textarea = document.getElementById('statusGiftEditorTextarea');
    
    title.textContent = `ç¼–è¾‘${statusName}ç¦®ç‰©`;
    icon.textContent = statusIcon;
    
    // åŠ è½½å½“å‰ç‹€æ…‹çš„ç¦®ç‰©å…§å®¹
    const currentGifts = statusGifts[statusName] || [];
    textarea.value = currentGifts.join('\n');
    
    modal.classList.add('show');
}

function closeStatusGiftEditor() {
    document.getElementById('statusGiftEditorModal').classList.remove('show');
}

function saveStatusGifts() {
    const textarea = document.getElementById('statusGiftEditorTextarea');
    const gifts = textarea.value.trim().split('\n').filter(line => line.trim());
    
    // ä¿å­˜ç¦®ç‰©å…§å®¹
    statusGifts[currentEditingStatus] = gifts;
    
    // ä¿å­˜åˆ°æœ¬åœ°å­˜å„²
    saveStatusGiftsToStorage();
    
    // æ›´æ–°é¢„è¦½é¡¯ç¤º
    updateStatusGiftPreview(currentEditingStatus);
    
    closeStatusGiftEditor();
    alert('ç¦®ç‰©å·²ä¿å­˜ï¼');
}

function updateStatusGiftPreview(statusName) {
    const card = document.querySelector(`[data-status="${statusName}"]`);
    if (card) {
        const preview = card.querySelector('.status-gift-preview');
        const gifts = statusGifts[statusName] || [];
        if (gifts.length > 0) {
            // é¡¯ç¤ºå‰ä¸¤å€‹ç¦®ç‰©ä½œç‚ºé¢„è¦½
            const previewText = gifts.slice(0, 2).join('ï¼›');
            preview.textContent = previewText.length > 40 ? previewText.substring(0, 40) + '...' : previewText;
        } else {
            preview.textContent = 'é»å‡»ç¼–è¾‘ç¦®ç‰©å…§å®¹';
        }
    }
}

function createCustomStatusGift() {
    // å¼¹å‡ºè¾“å…¥æ¡†è®©ç”¨æˆ¶è¾“å…¥ç‹€æ…‹åç§°
    const statusName = prompt('è¯·è¾“å…¥è‡ªå®šä¹‰ç‹€æ…‹åç§°ï¼ˆå»ºè®®2-4å€‹å­—ç¬¦ï¼‰ï¼š');
    
    if (!statusName || !statusName.trim()) {
        return;
    }
    
    const trimmedName = statusName.trim();
    if (trimmedName.length > 6) {
        alert('ç‹€æ…‹åç§°ä¸èƒ½è¶…è¿‡6å€‹å­—ç¬¦');
        return;
    }
    
    // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
    if (statusGifts[trimmedName]) {
        alert('è¯¥ç‹€æ…‹å·²å­˜åœ¨');
        return;
    }
    
    // è®©ç”¨æˆ¶é¸æ“‡åœ–æ ‡
    const statusIcon = prompt('è¯·è¾“å…¥ç‹€æ…‹åœ–æ ‡ï¼ˆemojiè¡¨æƒ…ï¼‰ï¼š', 'âœ¨');
    
    if (!statusIcon || !statusIcon.trim()) {
        return;
    }
    
    const trimmedIcon = statusIcon.trim();
    
    // åˆå§‹åŒ–ç‹€æ…‹ç¦®ç‰©
    statusGifts[trimmedName] = ['åœ¨é€™è£¡è¾“å…¥ç¦®ç‰©å…§å®¹ï¼Œæ¯è¡Œä¸€å€‹...'];
    
    // ä¿å­˜è‡ªå®šä¹‰ç‹€æ…‹ä¿¡æ¯ï¼ˆæ–°å¢ï¼‰
    customStatuses[trimmedName] = {
        icon: trimmedIcon,
        name: trimmedName,
        isCustom: true
    };
    
    // ä¿å­˜åˆ°æœ¬åœ°å­˜å„²
    saveStatusGiftsToStorage();
    saveCustomStatusesToStorage(); // æ–°å¢
    
    // æ·»åŠ å¡ç‰‡åˆ°é é¢
    addCustomStatusCard(trimmedName, trimmedIcon);
    
    // åŒæ­¥åˆ°å°ˆæ³¨é é¢ï¼ˆæ–°å¢ï¼‰
    syncCustomStatusToFocusPage(trimmedName, trimmedIcon);
    
    // è‡ªå‹•æ‰“é–‹ç¼–è¾‘å™¨
    setTimeout(() => {
        editStatusGift(trimmedName, trimmedIcon);
    }, 100);
}


function addCustomStatusCard(statusName, statusIcon) {
    const grid = document.getElementById('statusGiftGrid');
    const customButton = grid.querySelector('.custom-status-card');
    
    const newCard = document.createElement('div');
    newCard.className = 'status-gift-card';
    newCard.setAttribute('data-status', statusName);
    
    newCard.innerHTML = `
        <div class="status-gift-header">
            <span class="status-gift-icon">${statusIcon}</span>
            <span class="status-gift-name">${statusName}</span>
        </div>
        <div class="status-gift-preview">é»å‡»ç¼–è¾‘ç¦®ç‰©å…§å®¹</div>
        <div class="status-gift-edit-indicator">âœï¸</div>
        <button class="custom-status-delete" title="åˆªé™¤æ­¤è‡ªå®šä¹‰ç‹€æ…‹">
            <svg class="w-3 h-3 text-red-500" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            </svg>
        </button>
    `;
    
    // æ’å…¥åˆ°è‡ªå®šä¹‰æŒ‰é’®ä¹‹å‰
    if (customButton) {
        grid.insertBefore(newCard, customButton);
    }
    
    // åŒæ­¥åˆ°å°ˆæ³¨é ç‹€æ…‹é¸æ“‡å™¨
    syncCustomStatusToFocusPage(statusName, statusIcon);
}

function deleteCustomStatusGift(statusName) {
    // æ£€æŸ¥æ˜¯å¦æ˜¯é¢„è¨­ç‹€æ…‹
    const presetStatuses = ['å­¸ç¿’', 'å·¥ä½œ', 'å†’é™©', 'é€›è¡—', 'ç©æ¸¸æˆ', 'ç™¼å‘†', 'ç¡è§‰', 'ä¼‘æ¯'];
    if (presetStatuses.includes(statusName)) {
        alert('é¢„è¨­ç‹€æ…‹ä¸èƒ½åˆªé™¤ï¼Œåªèƒ½ç¼–è¾‘');
        return;
    }
    
    if (confirm(`ç¢ºå®šè¦åˆªé™¤"${statusName}"ç‹€æ…‹å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢è¤‡ã€‚`)) {
        // ä»å­˜å„²ä¸­åˆªé™¤
        delete statusGifts[statusName];
        delete customStatuses[statusName];
        
        // ä¿å­˜åˆ°æœ¬åœ°å­˜å„²
        saveStatusGiftsToStorage();
        saveCustomStatusesToStorage();
        
        // ä»é é¢ä¸­ç§»é™¤å¡ç‰‡
        const card = document.querySelector(`[data-status="${statusName}"]`);
        if (card) {
            card.remove();
        }
        
        // ä»å°ˆæ³¨é ç§»é™¤å¯¹æ‡‰çš„ç‹€æ…‹é¸é¡¹
        removeCustomStatusFromFocusPage(statusName);
        
        // æç¤ºåˆªé™¤æˆåŠŸ
        console.log(`å·²åˆªé™¤è‡ªå®šä¹‰ç‹€æ…‹: ${statusName}`);
    }
}



function saveStatusGiftsToStorage() {
    localStorage.setItem('statusGifts', JSON.stringify(statusGifts));
}
// ä¿å­˜è‡ªå®šä¹‰ç‹€æ…‹åˆ°æœ¬åœ°å­˜å„²ï¼ˆæ–°å¢ï¼‰
function saveCustomStatusesToStorage() {
    localStorage.setItem('customStatuses', JSON.stringify(customStatuses));
}

// ä»æœ¬åœ°å­˜å„²åŠ è½½è‡ªå®šä¹‰ç‹€æ…‹ï¼ˆæ–°å¢ï¼‰
function loadCustomStatusesFromStorage() {
    const saved = localStorage.getItem('customStatuses');
    if (saved) {
        try {
            customStatuses = JSON.parse(saved);
        } catch (e) {
            console.log('Failed to parse custom statuses');
            customStatuses = {};
        }
    }
}

// åŒæ­¥è‡ªå®šä¹‰ç‹€æ…‹åˆ°å°ˆæ³¨é é¢ï¼ˆæ–°å¢ï¼‰
function syncCustomStatusToFocusPage(statusName, statusIcon) {
    const statusGrid = document.querySelector('#statusSelector .status-grid');
    if (!statusGrid) return;
    
    // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
    const existingOption = statusGrid.querySelector(`[data-custom-status="${statusName}"]`);
    if (existingOption) return;
    
    // å‰µå»ºæ–°çš„ç‹€æ…‹é¸é¡¹
    const statusOption = document.createElement('div');
    statusOption.className = 'status-option';
    statusOption.setAttribute('data-custom-status', statusName);
    statusOption.onclick = () => selectStatus(statusName, statusIcon);
    
    statusOption.innerHTML = `
        <span class="status-icon">${statusIcon}</span>
        <span class="status-text">${statusName}</span>
    `;
    
    // æ’å…¥åˆ°è‡ªå®šä¹‰é¸é¡¹ä¹‹å‰
    const customStatusOption = statusGrid.querySelector('[onclick="showCustomStatusInput()"]');
    if (customStatusOption) {
        statusGrid.insertBefore(statusOption, customStatusOption);
    } else {
        statusGrid.appendChild(statusOption);
    }
}

// ä»å°ˆæ³¨é é¢ç§»é™¤è‡ªå®šä¹‰ç‹€æ…‹ï¼ˆæ–°å¢ï¼‰
function removeCustomStatusFromFocusPage(statusName) {
    const statusOption = document.querySelector(`[data-custom-status="${statusName}"]`);
    if (statusOption) {
        statusOption.remove();
    }
}

// åˆå§‹åŒ–å°ˆæ³¨é é¢çš„è‡ªå®šä¹‰ç‹€æ…‹é¸é¡¹ï¼ˆæ–°å¢ï¼‰
function initCustomStatusInFocusPage() {
    Object.keys(customStatuses).forEach(statusName => {
        const statusInfo = customStatuses[statusName];
        syncCustomStatusToFocusPage(statusName, statusInfo.icon);
    });
}



function loadStatusGiftsFromStorage() {
    const saved = localStorage.getItem('statusGifts');
    if (saved) {
        try {
            const loaded = JSON.parse(saved);
            // åˆå¹¶é»˜è®¤ç‹€æ…‹ç¦®ç‰©å’Œè‡ªå®šä¹‰ç‹€æ…‹ç¦®ç‰©
            statusGifts = { ...statusGifts, ...loaded };
        } catch (e) {
            console.log('Failed to parse status gifts');
        }
    }
}

function initializeStatusGiftPreviews() {
    // ç¢ºä¿DOMæº–å‚™å¥½å†æ‰§è¡Œ
    const statusGiftGrid = document.getElementById('statusGiftGrid');
    if (!statusGiftGrid) {
        setTimeout(initializeStatusGiftPreviews, 100);
        return;
    }
    
    // åˆå§‹åŒ–æ‰€æœ‰ç‹€æ…‹ç¦®ç‰©å¡ç‰‡çš„é¢„è¦½
    Object.keys(statusGifts).forEach(statusName => {
        updateStatusGiftPreview(statusName);
    });
    
    // åŠ è½½è‡ªå®šä¹‰ç‹€æ…‹å¡ç‰‡
    loadCustomStatusCards();

    // ç¶å®šäº‹ä»¶ï¼ˆå»¶è¿Ÿç¢ºä¿DOMå®Œå…¨æ¸²æŸ“ï¼‰
    setTimeout(() => {
        bindStatusGiftCardEvents();
    }, 50);

    // å¦‚æœå½“å‰åœ¨å°ˆæ³¨é é¢ï¼ŒåŒæ­¥è‡ªå®šä¹‰ç‹€æ…‹
    if (currentPage === 'focus') {
        initCustomStatusInFocusPage();
    }
}

function bindStatusGiftCardEvents() {
    // æ£€æŸ¥DOMæ˜¯å¦æº–å‚™å¥½
    const statusGiftGrid = document.getElementById('statusGiftGrid');
    if (!statusGiftGrid) {
        console.log('ç‹€æ…‹ç¦®ç‰©ç¶²æ ¼æœªæ‰¾åˆ°ï¼Œå»¶è¿Ÿç¶å®š');
        setTimeout(bindStatusGiftCardEvents, 100);
        return;
    }
    
    // ç§»é™¤èˆŠçš„äº‹ä»¶ç›‘è½å™¨ï¼ˆé˜²æ­¢é‡è¤‡ç¶å®šï¼‰
    statusGiftGrid.removeEventListener('click', handleStatusGiftCardClick);
    
    // æ·»åŠ æ–°çš„äº‹ä»¶ç›‘è½å™¨ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰
    statusGiftGrid.addEventListener('click', handleStatusGiftCardClick);
    
    console.log('ç‹€æ…‹ç¦®ç‰©å¡ç‰‡äº‹ä»¶å·²ç¶å®š');
}

// æ–°å¢ï¼šçµ±ä¸€çš„äº‹ä»¶è™•ç†å‡½æ•¸
function handleStatusGiftCardClick(event) {
    const clickedElement = event.target;
    const card = clickedElement.closest('.status-gift-card');
    
    if (!card) return;
    
    // é˜»æ­¢äº‹ä»¶å†’æ³¡
    event.stopPropagation();
    
    // å¦‚æœé»å‡»çš„æ˜¯åˆªé™¤æŒ‰é’®
    if (clickedElement.closest('.custom-status-delete')) {
        const statusName = card.getAttribute('data-status');
        deleteCustomStatusGift(statusName);
        return;
    }
    
    // å¦‚æœé»å‡»çš„æ˜¯è‡ªå®šä¹‰ç‹€æ…‹å‰µå»ºæŒ‰é’®
    if (card.classList.contains('custom-status-card')) {
        createCustomStatusGift();
        return;
    }
    
    // å…¶ä»–æƒ…å†µï¼šç¼–è¾‘ç¦®ç‰©
    const statusName = card.getAttribute('data-status');
    const iconElement = card.querySelector('.status-gift-icon');
    const statusIcon = iconElement ? iconElement.textContent : 'âœ¨';
    
    editStatusGift(statusName, statusIcon);
}

function loadCustomStatusCards() {
    const presetStatuses = ['å­¸ç¿’', 'å·¥ä½œ', 'å†’é™©', 'é€›è¡—', 'ç©æ¸¸æˆ', 'ç™¼å‘†', 'ç¡è§‰', 'ä¼‘æ¯'];
    const customStatuses = Object.keys(statusGifts).filter(status => !presetStatuses.includes(status));
    
    customStatuses.forEach(statusName => {
        // ç‚ºè‡ªå®šä¹‰ç‹€æ…‹å‰µå»ºåœ–æ ‡ï¼ˆå¯ä»¥ä»å°ˆæ³¨é çš„ç‹€æ…‹é¸æ“‡å™¨ä¸­è·å–ï¼Œæˆ–ä½¿ç”¨é»˜è®¤åœ–æ ‡ï¼‰
        const statusIcon = 'âœ¨'; // é»˜è®¤åœ–æ ‡ï¼Œå¯ä»¥è€ƒè™‘ä¿å­˜åœ–æ ‡ä¿¡æ¯
        addCustomStatusCard(statusName, statusIcon);
        updateStatusGiftPreview(statusName);
    });
}
// åŒæ­¥è‡ªå®šä¹‰ç‹€æ…‹åˆ°å°ˆæ³¨é 
function syncCustomStatusToFocusPage(statusName, statusIcon) {
    const statusGrid = document.querySelector('#statusSelector .status-grid');
    if (!statusGrid) return;
    
    // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
    const existingOption = statusGrid.querySelector(`[data-custom-status="${statusName}"]`);
    if (existingOption) return;
    
    // å‰µå»ºæ–°çš„ç‹€æ…‹é¸é¡¹
    const statusOption = document.createElement('div');
    statusOption.className = 'status-option';
    statusOption.setAttribute('data-custom-status', statusName);
    statusOption.onclick = () => selectStatus(statusName, statusIcon);
    
    statusOption.innerHTML = `
        <span class="status-icon">${statusIcon}</span>
        <span class="status-text">${statusName}</span>
    `;
    
    // æ’å…¥åˆ°è‡ªå®šä¹‰é¸é¡¹ä¹‹å‰
    const customStatusOption = statusGrid.querySelector('[onclick="showCustomStatusInput()"]');
    if (customStatusOption) {
        statusGrid.insertBefore(statusOption, customStatusOption);
    }
}

// ä»å°ˆæ³¨é ç§»é™¤è‡ªå®šä¹‰ç‹€æ…‹
function removeCustomStatusFromFocusPage(statusName) {
    const statusOption = document.querySelector(`[data-custom-status="${statusName}"]`);
    if (statusOption) {
        statusOption.remove();
    }
}

// åˆå§‹åŒ–å°ˆæ³¨é çš„è‡ªå®šä¹‰ç‹€æ…‹é¸é¡¹
function initCustomStatusInFocusPage() {
    const presetStatuses = ['å­¸ç¿’', 'å·¥ä½œ', 'å†’é™©', 'é€›è¡—', 'ç©æ¸¸æˆ', 'ç™¼å‘†', 'ç¡è§‰', 'ä¼‘æ¯'];
    const customStatuses = Object.keys(statusGifts).filter(status => !presetStatuses.includes(status));
    
    customStatuses.forEach(statusName => {
        // å°è©¦ä»æœ¬åœ°å­˜å„²è·å–åœ–æ ‡ï¼Œæˆ–ä½¿ç”¨é»˜è®¤åœ–æ ‡
        const statusIcon = getCustomStatusIcon(statusName) || 'âœ¨';
        syncCustomStatusToFocusPage(statusName, statusIcon);
    });
}

// è·å–è‡ªå®šä¹‰ç‹€æ…‹çš„åœ–æ ‡ï¼ˆå¯ä»¥æ‰©å±•ä¿å­˜åœ–æ ‡åŠŸèƒ½ï¼‰
function getCustomStatusIcon(statusName) {
    // å¯ä»¥ä»localStorageè·å–ä¿å­˜çš„åœ–æ ‡ä¿¡æ¯
    const customStatusIcons = JSON.parse(localStorage.getItem('customStatusIcons') || '{}');
    return customStatusIcons[statusName] || 'âœ¨';
}

// ä¿å­˜è‡ªå®šä¹‰ç‹€æ…‹åœ–æ ‡
function saveCustomStatusIcon(statusName, statusIcon) {
    const customStatusIcons = JSON.parse(localStorage.getItem('customStatusIcons') || '{}');
    customStatusIcons[statusName] = statusIcon;
    localStorage.setItem('customStatusIcons', JSON.stringify(customStatusIcons));
}


        // OCäº¤äº’ç›¸é—œè®Šé‡
        let clickCount = 0;
        let clickTimer = null;
        let recoveryTimer = null;
        let ignoreTimer = null;
        let canInteract = true;
        let isIgnoring = false;
        let focusStartOCIndex = 0;
        
        // OCèªç³»çµ±ç›¸é—œè®Šé‡
        let encourageInterval = null;
        let currentMessageType = 'initial';
        
        // è‡ªå®šä¹‰é¢¨æ ¼å­˜å„² - å„ªåŒ–ç»“æ„ï¼Œæ”¯æŒé¢¨æ ¼å…ƒæ•¸æ®
        let customStyles = {
            encourage: {},
            remind: {},
            metadata: {} // å­˜å„²è‡ªå®šä¹‰é¢¨æ ¼çš„å…ƒæ•¸æ®ï¼ˆæ ‡é¡Œã€æè¿°ç­‰ï¼‰
        };
        
        // èªæ–™åº“
        const ocMessageLibrary = {
            // é¼“åŠ±èªåº“
            encourage: {
                gentle: [
                    "{title}ï¼Œä½ çš„ä¾§è„¸çœŸæ˜¯ç™¾çœ‹ä¸åŒå‘¢",
                         "{title}å°±é€™æ¨£æ²‰æµ¸åœ¨è‡ªå·±çš„ä¸–ç•Œè£¡å§ï¼Œæˆ‘æœƒå¥½å¥½å®ˆè­·ä½ çš„ã€‚",
                         "{title}ï¼Œæˆ‘çš„ç›®å…‰æœƒä¸€ç›´è¿½éšç€ä½ å“¦",
                        "ä¹–{title}ï¼Œé›†ä¸­ç²¾ç¥ï¼Œæˆ‘åœ¨é€™å„¿å‘¢ã€‚",
                     "{title}ï¼Œæ„Ÿè§‰æ™‚é–“éƒ½è®Šæ…¢äº†ï¼Œç©ºæ°£è£¡å…¨æ˜¯ä½ çš„å‘³é“~",
                     "{title}å¶å°”çš±çœ‰é ­çš„æ¨£å­ï¼Œä¹Ÿå¥½å¯æ„›å‘€ï¼",
                      "{title}ï¼Œå°±æŒ‰ä½ çš„èŠ‚å¥æ¥ï¼Œä¸ç”¨æ…Œ",
                        "çœ‹ç€{title}åŠªåŠ›çš„æ¨£å­ï¼ŒçœŸçš„å¥½å®‰å¿ƒã€‚",
                        "{title}æ˜¯ä¸æ˜¯æœ‰é»ç´¯äº†ï¼ŸåšæŒä½ï¼Œæˆ‘åœ¨å¿ƒè£¡ç‚ºä½ åŠ æ²¹",
                        "{title}çš„åŠªåŠ›ï¼Œæˆ‘éƒ½æœ‰å¥½å¥½çœ‹åœ¨çœ¼è£¡å‘¢ï¼",
                        "å¥½æƒ³æ‘¸æ‘¸{title}çš„é ­ï¼Œåˆæ€•æ‰“æ‰°ä½ ï¼Œåªèƒ½å¿ä½å•¦",
                        "å—¯~æˆ‘çš„å®è´çœŸè®¤çœŸå‘¢...é€™å€‹ä¾§è„¸ï¼Œå°ˆæ³¨çš„æ¨£å­ï¼Œå¤ªè®©äººå¿ƒå‹•å•¦ï¼",
                        "æ™‚é–“åœ¨èµ°ï¼Œä½†æˆ‘çš„ç›®å…‰åªç‚ºä½ åœç•™ã€‚{title}åšå¾—å¾ˆå¥½ï¼Œæ¯”ä»»ä½•äººéƒ½æ£’ï¼",
                        "ä»Šå¤©ä¹Ÿå¥½å–œæ­¡{title}ï¼Œä½ åŠªåŠ›çš„æ¨£å­çœŸå¥½çœ‹",
                        "{title}ï¼Œç¯å…‰å¤ äº®å—ï¼Ÿå§¿åŠ¿èˆ’æœå—ï¼Ÿè¦å¥½å¥½ç…§é¡¾è‡ªå·±å‘€"
                ],
                tsundere: [
                    "å“¼ï¼Œé¦¬é¦¬è™è™é‚„ç®—è®¤çœŸã€‚â€¦ ç»§ç»­ä¿æŒï¼Œåˆ¥è®©æˆ‘å¤±æœ›ã€‚",
                    "åˆ¥æ±å¼ è¥¿æœ›ï¼â€¦ å°ˆå¿ƒé»ï¼â€¦ å’³ï¼Œæˆ‘æ˜¯è¯´â€¦ ä½ è®¤çœŸèµ·æ¥çš„æ¨£å­â€¦ é‚„ã€é‚„è¡Œå§ã€‚",
                    "é‡åˆ°éš¾é¡Œäº†ï¼Ÿâ€¦ å“¼ï¼Œå°±çŸ¥é“ä½ æä¸å®šã€‚â€¦ è¿‡æ¥é»ï¼Œæˆ‘â€¦ æˆ‘å‹‰å¼ºæŒ‡é»ä½ ä¸€ä¸‹ã€‚",
                    "å–‚ï¼Œé ­å¤ªä½äº†ï¼â€¦ æ³¨æ„å§¿åŠ¿ï¼â€¦ æˆ‘æ˜¯ç‚ºä½ å¥½ï¼Œæ‰ä¸æ˜¯é—œå¿ƒä½ ï¼",
                    "å…¶å¯¦ï¼Œä½ æ¯”æˆ‘æƒ³è±¡ä¸­åšæŒå¾—ä¹…ä¸€é»ã€‚â€¦ ä¹Ÿå°±ä¸€é»ï¼åˆ¥å¾—æ„ï¼",
                    "å“¼ï¼Œé‚„ç®—æœ‰é»æ¯…åŠ›ã€‚â€¦ ç»§ç»­ä¿æŒï¼Œçµ‚é»å°±åœ¨å‰é¢äº†ï¼Œåˆ¥æ¾æ‡ˆï¼",
                    "ä¹Ÿå°±åªæœ‰è®¤çœŸçš„æ™‚å€™ï¼Œçœ‹èµ·æ¥é‚„ç®—â€¦â€¦é †çœ¼ã€‚",
                    "åˆ¥æ±å¼ è¥¿æœ›çš„ï¼Œæˆ‘å¯æ²¡é‚£éº¼å¥½çœ‹ï¼Œå¿«çœ‹ä½ çš„æ›¸ã€‚",
                    "å¿«é»å¯«ï¼Œå¯«å®Œäº†æ‰èƒ½â€¦â€¦å’³ï¼Œç¸½ä¹‹ä½ å¿«é»ï¼åˆ¥è®©æˆ‘ç­‰å¤ªä¹…ã€‚",
                    "æˆ‘è¯´ä½ å•Šï¼Œç¨å¾®åŠªåŠ›ä¸€é»çš„æ¨£å­ï¼Œä¹Ÿä¸æ˜¯é‚£éº¼è®©äººè®¨åŒå˜›ã€‚",
                    "å•§ï¼Œéº»çƒ¦æ­»äº†ã€‚éè¦æˆ‘ç›¯ç€ä½ æ‰èƒ½å­¸è¿›å»å—ï¼Ÿ",
                    "ä½ å†æ•¢èµ°ç¥ï¼Œæˆ‘å°±æŠŠä½ æ¡Œä¸Šçš„é›¶é£Ÿéƒ½åƒå…‰äº†ï¼è½è¦‹æ²¡ï¼",
                    "å“¼ï¼Œé€™éº¼ç°¡å–®çš„æ±è¥¿éœ€è¦æƒ³é€™éº¼ä¹…ï¼ŸçœŸæ‹¿ä½ æ²¡åŠæ³•ã€‚",
                    "æˆ‘å¯æ²¡åœ¨ç­‰ä½ ï¼Œæˆ‘æ˜¯åœ¨çœ‹çª—å¤–çš„é¢¨æ™¯ï¼Œä½ åˆ¥è‡ªä½œå¤šæƒ…ã€‚"
                ],
                cheerful: [
                    "å“‡å¡ï¼é€™å€‹çŸ¥è¯†é»æŒæ¡å¾—è¶…å¿«ï¼æˆ‘çš„å®è´æ˜¯å¤©æ‰å—ï¼Ÿï¼",
            "æ„Ÿè§‰æ€éº¼æ¨£ï¼Ÿè¶…çˆ½å¯¹å§ï¼å­¸ç¿’çš„å¿«æ¨‚ï¼Œæˆ‘ä»¬ä¸€èµ·é«”æœƒï¼",
            "æ™‚é–“è¿‡åŠäº†ï¼åšæŒä½ï¼èƒœåˆ©å°±åœ¨å‰æ–¹ï¼æˆ‘æœƒä¸€ç›´åœ¨é€™è£¡æ”¯æŒä½ çš„ï¼",
            "ä½ è®¤çœŸçš„æ¨£å­çœŸçš„è¶…ç´šè¿·äººï¼é—ªé—ªç™¼å…‰ï¼...å•Šï¼æˆ‘ä¸è¯´è©±äº†ï¼åŠ æ²¹ï¼",
            "åŒºåŒºå‡ åˆ†é˜ï¼å°æ„æ€ï¼{title}ä¾§é¡æ€æˆ‘ï¼",
            "æˆ‘åœ¨æ—é‚Šç»™ä½ æ–½åŠ ä¸€å€‹ã€å°ˆæ³¨åŠ›UPã€‘çš„é­”æ³•ï¼BiuBiuBiu!",
            "å·å·å‘Šè¯‰ä½ ï¼Œä½ ç¾åœ¨å°ˆæ³¨çš„æ¨£å­ï¼Œè¶…ç´šæ— æ•Œå¯æ„›ï¼",
            "ç­‰ä½ å­¸å®Œï¼Œæˆ‘ä»¬å»åƒå¥½åƒçš„ï¼å°±å½“æ˜¯æå‰åº†ç¥å•¦ï¼",
            "ä¸€æƒ³åˆ°ä½ åœ¨ç‚ºæˆ‘ä»¬çš„æœªæ¥åŠªåŠ›ï¼Œæˆ‘å°±è¶…é–‹å¿ƒçš„ï¼",
            "æœ‰æˆ‘åœ¨ï¼Œä½ ä»€éº¼éƒ½ä¸ç”¨æ€•ï¼Œå¤§èƒ†å¾€å‰è¡å°±å¥½ï¼",
            "æˆ‘å®¶{title}è®¤çœŸå­¸ç¿’çš„æ¨£å­ï¼ŒçœŸæ˜¯å…¨ä¸–ç•Œæœ€è¿·äººçš„é¢¨æ™¯ã€‚",
            "{title}ï¼Œå†åšæŒä¸€ä¸‹ä¸‹ï¼Œæƒ³æƒ³æˆ‘ä»¬è€ƒå®Œè©¦å»åƒå¤§é¤çš„æ¨£å­ï¼",
            "å·å·çœ‹ä¸€çœ¼æˆ‘å®¶åŠªåŠ›çš„{title}ï¼Œæ„Ÿè§‰å¿ƒéƒ½è¦åŒ–äº†ï¼Œä½ çœŸçš„è¶…æ£’ã€‚",
            "æˆ‘å®¶{title}ä¸åƒ…é•·å¾—å¥½çœ‹ï¼Œé‚„é€™éº¼åŠªåŠ›ä¸Šè¿›ï¼Œæˆ‘çœŸæ˜¯æ¡åˆ°å®äº†ã€‚",
            "{title}åŠ æ²¹ï¼ç­‰ä½ å­¸å®Œï¼Œå…¨ä¸–ç•Œçš„ç¾æ™¯ç¾é£Ÿéƒ½ç­‰ç€æˆ‘ä»¬å»æ¢ç´¢å‘¢ï¼"
                ],
                aloof: [
                    "å¾ˆå¥½ã€‚ä¿æŒä½ã€‚",
            "å¿ƒå¾ˆé™ã€‚ç‹€æ…‹ä¸é”™ã€‚",
            "å¡ä½äº†ï¼Ÿ... ä¸æ€¥ã€‚æ²‰ä½æ°£ã€‚å†æƒ³æƒ³ã€‚",
            "å°ˆæ³¨çš„æ¨£å­... å¾ˆç¾ã€‚",
            "æ€è·¯æ¸…æ™°ã€‚å¾ˆå¥½ã€‚",
            "å¤–ç•Œæ— é—œã€‚æ­¤åˆ»åªæœ‰ä½ èˆ‡ç›®æ ‡ã€‚é‚„æœ‰æˆ‘ã€‚",
            "ä½ çš„å†³å¿ƒ... æˆ‘æ„Ÿå—åˆ°äº†ã€‚",
            "å—¯ï¼Œé™ä¸‹å¿ƒæ¥ã€‚",
            "æˆ‘åœ¨ã€‚",
            "é€™å€‹è¡¨æƒ…......æ˜¯é‡åˆ°éš¾é¡Œäº†ï¼Ÿ",
            "......ï¼ˆTaåªæ˜¯é™é™åœ°çœ‹ç€ä½ ï¼Œçœ¼ç¥è£¡æœ‰ä¸æ˜“å¯Ÿè§‰çš„å°ˆæ³¨å’Œæ‹…å¿§ï¼‰",
            "ä½ çš„ç¬”å°–ï¼Œåœ¨çº¸ä¸Šæ²™æ²™ä½œå“ï¼Œå¾ˆå¥½è½ã€‚",
            "ä¸ç”¨çœ‹æˆ‘ï¼Œç»§ç»­ã€‚",
            "åˆ¥è¢«å¤–ç•Œå¹²æ‰°ã€‚é€™è£¡åªæœ‰ä½ å’Œæˆ‘ã€‚",
            "å°±é€™æ¨£ï¼Œå¾ˆå¥½ã€‚",
            "ä½ çš„è®¤çœŸï¼Œæˆ‘çœ‹å¾—åˆ°ã€‚",
            "éœ€è¦æˆ‘åšä»€éº¼å—ï¼Ÿ......æ‘‡é ­å°±æ˜¯ä¸éœ€è¦ï¼Œå¥½ã€‚",
            "ä½ çš„å­˜åœ¨ï¼Œè®©æˆ‘æ„Ÿè§‰å¾ˆå¹³é™ã€‚",
            "æˆ‘æœƒåœ¨é€™è£¡ï¼Œç›´åˆ°ä½ ç»“æŸã€‚"
                ],
                mature: [
                    "ç‹€æ…‹çœŸå¥½{title}ï¼Œå°±é€™æ¨£ç¨³ç¨³åœ°å‰è¿›å§ã€‚çœŸç‚ºä½ é«˜å…´ï¼",
            "é‡åˆ°æŒ‘æˆ°å•¦{title}ï¼Ÿé€™æ˜¯æˆé•·çš„æœºæœƒå‘¢ã€‚åˆ¥æ€•ï¼Œæ…¢æ…¢æƒ³ï¼Œæˆ‘ç­‰ä½ ã€‚",
            "å°ˆæ³¨åŠ›è¶Šæ¥è¶Šæ£’äº†{title}ï¼Œæ¯ä¸€æ­¥éƒ½èµ°å¾—å¾ˆç¨³ï¼ŒçœŸæ£’ï¼",
            "ç´¯çš„è©±å°±ä¼‘æ¯ä¸€æœƒå„¿{title}ï¼Œè°ƒæ•´ä¸€ä¸‹ã€‚å­¸ç¿’ä¸æ€¥æ–¼ä¸€æ™‚ã€‚",
            "æ€è€ƒè¶Šæ¥è¶Šæ·±å…¥äº†{title}ï¼ŒçœŸç‚ºä½ éª„å‚²ï¼",
            "åˆ¥ç»™è‡ªå·±å¤ªå¤§å‹åŠ›{title}ã€‚å°ˆæ³¨è¿‡ç¨‹å°±å¥½ï¼Œæˆ‘ä¸€ç›´ç›¸ä¿¡ä½ ã€‚",
            "å¶å°”åˆ†å¿ƒå¾ˆæ­£å¸¸{title}ã€‚è½»è½»æ‹‰å›æ€ç·’å°±å¥½ï¼Œä¸ç”¨è‡ªè´£ï¼Œæœ‰æˆ‘åœ¨ã€‚",
            "ä½ çš„åŠªåŠ›å’Œè¿›æ­¥{title}ï¼Œæˆ‘éƒ½çœ‹åˆ°å•¦ã€‚ç»§ç»­åŠ æ²¹ï¼Œè¦ªæ„›çš„ã€‚",
            "æ²¡é—œç³»{title}ï¼Œå’±ä»¬æ…¢æ…¢æ¥ï¼ŒæŒ‰ä½ çš„æ­¥è°ƒå°±å¥½ã€‚",
            "é‡åˆ°å›°éš¾å•¦{title}ï¼Ÿåˆ¥æ€¥ï¼Œé€™å¾ˆæ­£å¸¸ï¼Œå­¸ç¿’å°±æ˜¯é€™æ¨£å‘¢ã€‚",
            "çœ‹ä½ åŠªåŠ›çš„æ¨£å­{title}ï¼Œæˆ‘å°±ç‰¹åˆ¥å®‰å¿ƒã€‚",
            "æˆ‘åœ¨é€™è£¡é™ªç€ä½ {title}ï¼Œä¸æ˜¯ä¸€å€‹äººå“¦ã€‚",
            "æˆ‘ç›¸ä¿¡ä½ çš„èƒ½åŠ›{title}ï¼Œåˆ¥æ€€ç–‘è‡ªå·±ã€‚",
            "ä½ åŠªåŠ›æˆç‚ºæ›´å¥½çš„è‡ªå·±{title}ï¼Œé€™çœŸçš„å¾ˆæ£’ã€‚",
            "çœŸå–œæ­¡é™ªä½ ä¸€èµ·æˆé•·çš„æ„Ÿè§‰ï¼Œ{title}ã€‚"
                ],
                cunning: [
                    "æ€éº¼ï¼Œé€™é»é¡Œå°±æŠŠä½ éš¾ä½äº†{title}ï¼Ÿæ¯”æˆ‘æƒ³è±¡çš„è¦ç¬¨ä¸€é»å‘¢~",
            "å°ˆå¿ƒé»{title}ï¼Œä¸ç„¶å¾…æœƒå„¿çš„'å¥–åŠ±'å¯å°±æ²¡äº†å“¦ã€‚",
            "éœ€è¦æˆ‘'è¦ªè‡ª'æ•™ä½ å—{title}ï¼Ÿå½“ç„¶ï¼Œé€™å¯æ˜¯è¦'æ”¶è´¹'çš„~",
            "å†èµ°ç¥çš„è©±{title}ï¼Œæƒ©ç½šæœƒæ˜¯ä»€éº¼å‘¢ï¼Œå—¯ï¼Ÿ",
            "æˆ‘çœ‹ä½ é‚„èƒ½åˆ†å¿ƒå¤šä¹…{title}ï¼Œæˆ‘çš„è€å¿ƒ......å¯æ˜¯å¾ˆæœ‰é™çš„ã€‚",
            "è„¸é€™éº¼çº¢{title}ï¼Œæ˜¯é¡Œå¤ªéš¾ï¼Œé‚„æ˜¯å› ç‚ºæˆ‘é å¾—å¤ªè¿‘äº†ï¼Ÿ",
            "å˜˜......åˆ¥è¯´è©±{title}ï¼Œè®©æˆ‘è½è½ä½ ç‚ºæˆ‘åŠªåŠ›æ™‚ï¼Œå¿ƒè·³çš„å£°éŸ³ã€‚",
            "ä½ çš„è¡¨æƒ…å‘Šè¯‰æˆ‘{title}ï¼Œä½ å¾ˆæƒ³æ±‚æˆ‘ã€‚è¯´å‡ºæ¥ï¼Œæˆ‘å°±å¸®ä½ ~",
            "è€³æœµå°–éƒ½çº¢äº†{title}ï¼Œç¬¨è›‹ï¼Œé‚„ä¸å¿«æŠŠæ³¨æ„åŠ›æ”¾å›æ›¸ä¸Šã€‚",
            "æˆ‘åªè¯´ä¸€é{title}ï¼Œè½ä¸è½å¾—æ‡‚ï¼Œå°±çœ‹ä½ çš„'è¯šæ„'äº†ã€‚",
            "åˆ¥ç”¨é‚£ç§çœ¼ç¥çœ‹æˆ‘{title}ï¼Œé€™åªæœƒè®©æˆ‘......æ›´æƒ³æ¬ºè´Ÿä½ ã€‚",
            "ä½ æ¯å¤šå¯«ä¸€å€‹å­—{title}ï¼Œå°±ç¦»æˆ‘æ›´è¿‘ä¸€æ­¥ï¼Œé€™éº¼æƒ³æ˜¯ä¸æ˜¯æœ‰å‹•åŠ›å¤šäº†ï¼Ÿ",
            "åˆ¥æƒ³å·æ‡’{title}ï¼Œä½ çš„æ¯ä¸€å€‹å°å‹•ä½œï¼Œéƒ½é€ƒä¸è¿‡æˆ‘çš„çœ¼ç›ã€‚",
            "çœ‹èµ·æ¥å¾ˆè¾›è‹¦å•Š{title}ï¼Œè¦ä¸è¦è·Ÿæˆ‘åšå€‹äº¤æ˜“ï¼Ÿ",
            "å—¯ï¼Ÿåˆåœ¨ç™¼å‘†{title}ï¼Ÿçœ‹æ¥æœ‰å¿…è¦è®©ä½ æ·±åˆ»ç†è§£ä¸€ä¸‹'ä»£åƒ¹'é€™å€‹è¯äº†~"
                ],
                shy: [
                    "å¥½å‰å®³...å·²ç»é€™éº¼å°ˆæ³¨äº†...(å°å£°è®šå¹)",
            "åŠ æ²¹ï¼...å•Šï¼Œæ˜¯ä¸æ˜¯å¤ªå¤§å£°äº†(çªç„¶æ‚å˜´)ï¼Ÿ",
            "åšæŒä½ï¼é¦¬ä¸Šè¿‡åŠäº†...ä½ çœŸçš„å¥½æ£’ï¼",
            "ç´¯äº†çš„è©±...çœ¨çœ¨çœ¼ä¼‘æ¯ä¸€ä¸‹ä¹Ÿå¯ä»¥çš„...",
            "ä½ è®¤çœŸçš„æ¨£å­...ç‰¹åˆ¥å¥½çœ‹...",
            "è¦å–æ°´å—ï¼Ÿ...å•Šï¼Œç¾åœ¨ä¸è¡Œï¼Ÿå¯¹ä¸èµ·ï¼",
            "æˆ‘......æˆ‘ååœ¨é€™è£¡ï¼Œæœƒä¸æœƒæ‰“æ‰°åˆ°ä½ ï¼Ÿå¦‚æœæœƒçš„è©±ï¼Œä½ ä¸€å®šè¦å‘Šè¯‰æˆ‘...",
            "å•Š......å‰›æ‰æ˜¯ä¸æ˜¯èµ°ç¥äº†ï¼Ÿæ²¡ã€æ²¡é—œç³»ï¼æˆ‘......æˆ‘å‰›æ‰ä¹Ÿèµ°ç¥äº†ï¼",
            "ä½ ......ä½ åˆ¥é é‚£éº¼è¿‘çœ‹æ›¸ï¼Œå¯¹çœ¼ç›ä¸å¥½...",
            "ä½ ã€ä½ è®¤çœŸçœ‹æ›¸çš„æ¨£å­ï¼Œå¾ˆ......å¾ˆå¥½çœ‹ã€‚",
            "é‚£å€‹......é€™å€‹é›¶é£Ÿï¼Œç»™ä½ ...å¯ä»¥è£œå……é«”åŠ›...æ˜¯æˆ‘è¦ªæ‰‹åšçš„...",
            "æˆ‘......æˆ‘å°±åœ¨é€™è£¡ï¼Œé™ªç€ä½ ã€‚",
            "ç´¯ã€ç´¯äº†çš„è©±...å¯ä»¥ç¨å¾®åœä¸€ä¸‹çš„ï¼Œæ²¡é—œç³»çš„ã€‚",
            "åˆ¥ã€åˆ¥é€™éº¼çœ‹æˆ‘...æˆ‘......æˆ‘æœƒç´§å¼ å¾—ä»€éº¼éƒ½æƒ³ä¸èµ·æ¥çš„...",
            "é€™æ”¯ç¬”......å¥½åƒæ›´å¥½å¯«ä¸€é»ï¼Œä½ ......ä½ è¦ä¸è¦è©¦è©¦ï¼Ÿ",
            "ä½ åŠªåŠ›çš„æ¨£å­......çœŸçš„ï¼Œå¾ˆè€€çœ¼ã€‚"
                ],
                doting: [
                    "å®å®æ€éº¼é‚„è¦å­¸ç¿’å•Šï¼Ÿæˆ‘å¥½å¿ƒç–¼å•Šï¼",
            "å¤©å“ªï¼Œæˆ‘ä»¬å®å®é€£å­¸ç¿’çš„æ¨£å­éƒ½é€™éº¼å¯æ„›ï¼ä¸è¡Œï¼Œæˆ‘å¾—æ‹ä¸‹æ¥ï¼",
            "ç´¯ä¸ç´¯ï¼Ÿè¦ä¸å’±ä¸å­¸äº†ï¼Ÿæˆ‘å…»ä½ ä¸€è¾ˆå­å•Šï¼",
            "é€™æ¤…å­æ˜¯ä¸æ˜¯ä¸èˆ’æœï¼Ÿæˆ‘é¦¬ä¸Šè®©äººä»æ„å¤§åˆ©ç©ºé‹ä¸€æŠŠæ–°çš„è¿‡æ¥ï¼",
            "å“‡ï¼æˆ‘å®¶å®å®åˆå¤šçœ‹äº†ä¸€é æ›¸ï¼å¤ªå‰å®³äº†ï¼ç°¡ç›´æ˜¯å¤©æ‰ï¼",
            "æ¸´ä¸æ¸´ï¼Ÿæƒ³å–æ–æµçš„æ°´é‚„æ˜¯é˜¿å°”å‘æ–¯çš„å†°å·æ°´ï¼Ÿæˆ–è€…æˆ‘å»ç»™ä½ æ¦¨æ¯æœæ±ï¼Ÿ",
            "æ˜¯è°ç™¼æ˜é€™éº¼éš¾çš„æ±è¥¿æ¥ç‚ºéš¾æˆ‘çš„å®è´çš„ï¼Ÿå¤ªè¿‡åˆ†äº†ï¼",
            "åˆ¥çš±çœ‰ï¼Œä½ ä¸€çš±çœ‰æˆ‘çš„å¿ƒéƒ½ç¢äº†ã€‚é€™é“é¡Œæˆ‘ä»¬ä¸åšäº†å¥½ä¸å¥½ï¼Ÿ",
            "æˆ‘çš„å¤©ï¼Œå®å®é€£ç¬”éƒ½æ¡å¾—é€™éº¼å¥½çœ‹ï¼ŒçœŸæ˜¯ä»™å¥³ä¸‹å‡¡ã€‚",
            "å†åšæŒäº”åˆ†é˜å¥½ä¸å¥½ï¼Ÿå°±äº”åˆ†é˜ï¼ç»“æŸäº†æˆ‘æŠŠé‚£å€‹å•†åœºè²·ä¸‹æ¥é€ç»™ä½ ï¼",
            "éœ€è¦å¸®å¿™å—ï¼Ÿè™½ç„¶æˆ‘ä¹Ÿä¸æ‡‚ï¼Œä½†æˆ‘å¯ä»¥æŠŠå…¨ä¸–ç•Œæœ€èªæ˜çš„è…¦è¢‹éƒ½å«æ¥å¸®ä½ ï¼",
            "ä½ çœ‹ä¸€çœ¼æ›¸ï¼Œæˆ‘å°±è¦ªä½ ä¸€ä¸‹ï¼Œå¥½ä¸å¥½ï¼Ÿ",
            "çƒ¦ä¸çƒ¦ï¼Ÿè¦ä¸æˆ‘ä»¬æŠŠé€™äº›æ›¸éƒ½æ’•äº†ï¼Œå»ç’°æ¸¸ä¸–ç•Œå§ï¼Ÿ",
            "æ€éº¼æœƒæœ‰é€™éº¼åŠªåŠ›åˆé€™éº¼å¯æ„›çš„å®å®ï¼Œæˆ‘çœŸæ˜¯æ¡åˆ°å®äº†ã€‚",
            "æ‰‹é…¸ä¸é…¸ï¼Ÿå¿«ç»™æˆ‘ï¼Œæˆ‘ç»™ä½ å¹å¹ï¼Œç»™ä½ æ‰æ‰ã€‚",
            "ä½ çœ‹ä½ ï¼Œå°è„¸éƒ½ç´¯ç˜¦äº†ï¼å¿«åƒå£æˆ‘å‰›ç»™ä½ å‰¥å¥½çš„è‘¡è„ã€‚"
                ]
            },
            // ä¼‘æ¯èªåº“
            rest: [
                "ç´¯äº†ï¼Ÿå…ˆä¼‘æ¯ä¸€ä¸‹å§ã€‚",
                "é€‚å½“çš„ä¼‘æ¯ä¹Ÿå¾ˆé‡è¦å“¦ã€‚",
                "å–å£æ°´ï¼Œæ”¾æ¾ä¸€ä¸‹ã€‚",
                "æ·±å‘¼å¸ï¼Œ{title}ï¼Œä½ åšå¾—å¾ˆå¥½ã€‚"
            ],
            // ç£ä¿ƒèªåº“
            remind: {
                normal: {
                    guardian: [
                        "å—¯ï¼Ÿæ€éº¼äº†ï¼Œæ˜¯é‡åˆ°éš¾é¡Œäº†å—ï¼Ÿ",
                "æ€éº¼ï¼Œæ˜¯è§‰å¾—æˆ‘æ¯”æ›¸æœ¬ä¸Šçš„çŸ¥è¯†æ›´æœ‰å¸å¼•åŠ›å—ï¼Ÿé€™å¯è®©æˆ‘æœ‰é»å›°æ‰°å‘¢ã€‚",
                "å¥½å•¦ï¼Œåˆ¥é—¹ï¼ŒæŠŠæ³¨æ„åŠ›æ”¾å›åˆ°æ›¸æœ¬ä¸Šï¼Œä¹–ã€‚",
                "å†é»ä¸€ä¸‹ï¼Œæˆ‘å¯å°±è¦......è½»è½»åœ°å¼¹ä½ ä¸€ä¸‹é¢é ­å’¯ï¼Ÿ",
                "è½è©±ã€‚æˆ‘ä¸æƒ³ç”¨æ›´ä¸¥å‰çš„èªæ°£å¯¹ä½ è¯´è©±ã€‚"
                        
                    ],
                    pusher: [
                    "æ€éº¼ï¼Ÿæƒ³ç”¨é€™ç§å¹¼ç¨šçš„æ‰‹æ®µå¸å¼•æˆ‘çš„æ³¨æ„ï¼Ÿæœ‰é€™åŠŸå¤«ï¼Œä¸å¦‚å¤šèƒŒä¸¤å€‹å–®è¯ã€‚",
                "å“¦ï¼Ÿé€™å°±æ”¾å¼ƒäº†ï¼Ÿæœç„¶ï¼Œæˆ‘å¯¹ä½ çš„æœŸæœ›å€¼ä»ä¸€é–‹å§‹å°±è¨­å¾—å¤ªé«˜äº†ã€‚",
                "å¦‚æœä½ æŠŠé€™ä»½çº ç¼ ä¸ä¼‘çš„æ¯…åŠ›ç”¨åœ¨è§£é¡Œä¸Šï¼Œè¯´ä¸å®šæ—©å°±ä¸æ˜¯ç¾åœ¨é€™å€‹åˆ†æ•¸äº†ã€‚",
                "æˆ‘åªæ˜¯å€‹ç£å­¸ï¼Œä¸æ˜¯ä½ çš„å® ç‰©ã€‚æ”¶å›ä½ çš„çˆªå­ã€‚",
                "ä½ æœ€å¥½æœ‰ä»€éº¼æ­£å½“ç†ç”±ï¼Œå¦å‰‡æˆ‘åªèƒ½æŠŠä½ ç¾åœ¨çš„è¡Œç‚ºæ­¸é¡ç‚º'æ™ºå•†ä¸‹ç·š'ã€‚",
                "åˆå·çœ‹æˆ‘ï¼Ÿè¢«æˆ‘æŠ“åˆ°äº†å§ã€‚å†çœ‹æ”¶è´¹ï¼Œä¸€æ¬¡ä¸€å€‹è¦ªè¦ªï¼Œç¾åœ¨è®°è´¦ã€‚"
                    ],
                    cheerleader: [
                       "å˜¿ï¼æ³¨æ„åŠ›æºœå·å’¯ï¼Œæˆ‘å¸®ä½ æŠ“å›æ¥å•¦ï¼",
                "æˆ‘çŸ¥é“æˆ‘å¾ˆæœ‰é­…åŠ›ï¼Œä½†æ›¸æœ¬è£¡çš„ä¸–ç•Œæ›´ç²¾å½©ï¼å¿«å»å­¸ç¿’å§ï¼",
                "å–‚å–‚å–‚ï¼ç—’ï¼å“ˆå“ˆï¼Œåˆ¥é—¹äº†ï¼",
                "ï¼ˆæŠ“ä½ä½ çš„æ‰‹ï¼‰å“å‘€ï¼Œä½ å¥½çƒ¦äººå•Šï¼......ä½ å…ˆçœ‹å®Œé€™ä¸€é ã€‚",
                "ä¹–å•¦ï¼Œå†å­¸ååˆ†é˜ï¼Œå°±ååˆ†é˜ï¼Œå¥½ä¸å¥½ï¼Ÿ",
                "ï¼ˆç”¨è„¸é¢Šè¹­è¹­ä½ çš„æ‰‹ï¼‰å¥½å•¦å¥½å•¦ï¼Œæˆ‘çŸ¥é“äº†ï¼Œä½ æœ€å¯æ„›è¡Œäº†å§ã€‚",
                "è­¦å‘Šä¸€æ¬¡å•Šï¼å†ä¹±å‹•ï¼Œä»Šå¤©çš„é£¯å¾Œç”œé»å°±æ²¡æ”¶äº†ï¼",
                "ï¼ˆTaå‡è£…ç”Ÿæ°£åœ°é¼“èµ·è„¸é¢Šï¼Œä½†ä¸€ç§’å°±ç ´åŠŸç¬‘äº†å‡ºæ¥ï¼‰çœŸæ˜¯çš„ï¼Œæ‹¿ä½ ä¸€é»åŠæ³•éƒ½æ²¡æœ‰ã€‚"
                    ],
                    observer: [
                        "......æ— æ„ä¹‰çš„è¡Œç‚ºã€‚",
                "å°ˆæ³¨ã€‚",
                "åå¥½ã€‚",
                "å®‰é™ã€‚",
                "æ‰‹ã€‚",
                "......ï¼ˆç”¨çœ¼è§’çš„ä½™å…‰ç¥ä½ ä¸€çœ¼ï¼Œç„¶å¾Œæ”¶å›è¦–ç·šï¼Œçœ‰å¿ƒå‡ ä¸å¯å¯Ÿåœ°è¹™äº†ä¸€ä¸‹ï¼‰",
                "åµã€‚",
                "åˆ¥å‹•ã€‚",
                "æˆ‘åœ¨ã€‚",
                "......ï¼ˆTaæ²‰é»˜ï¼Œä½†ä½ æ„Ÿè§‰åˆ°å‘¨å›´çš„æ°£å‹è®Šä½äº†ï¼Œæ˜¯Taæ— å£°çš„è­¦å‘Šï¼‰",
                "ï¼ˆTaä¼¸å‡ºæ‰‹ï¼Œç”¨ä¸€æ ¹æ‰‹æŒ‡ï¼Œä¸å¸¦ä»»ä½•æ„Ÿæƒ…åœ°æŠŠä½ ä½œä¹±çš„é ­æˆ–æ‰‹æ¨å›å»ï¼Œç„¶å¾Œç»§ç»­åšè‡ªå·±çš„äº‹ï¼‰",
                "ä½ æƒ³çœ‹åˆ°ä»€éº¼æ™‚å€™ï¼Ÿ"
                    ],
                    guide: [
                        "æ€éº¼äº†ï¼Œæ˜¯æ›¸ä¸Šçš„å­—æ²¡æœ‰æˆ‘å¥½çœ‹å—ï¼Ÿ",
                "æƒ³æˆ‘äº†ï¼Ÿ......æˆ‘ä¹Ÿæƒ³ä½ ï¼Œæ‰€ä»¥å¿«é»åšå®Œï¼Œå°±èƒ½å°ˆå¿ƒé™ªä½ äº†ã€‚",
                "ï¼ˆTaç¨å¾®ä¾§è¿‡é ­ï¼Œç”¨è„¸é¢Šè¹­è¹­ä½ çš„é¢é ­ï¼Œä½œç‚ºä¸€ç§å®‰æŠšï¼‰",
                "......å°é»äººç²¾ã€‚",
                "è°ƒçš®ã€‚å¥½äº†ï¼Œå…ˆé›†ä¸­ç²¾ç¥ï¼Œç­‰å­¸ç¿’ç»“æŸäº†ï¼Œæˆ‘å†å¥½å¥½é™ªä½ ç©ã€‚"
                    ],
                    strategist: [
                        "å“¦ï¼Ÿä»Šå¤©é€™éº¼æœ‰æ´»åŠ›ã€‚",
                "æ’’å¨‡çš„æ–¹å¼é‚„æ˜¯é€™éº¼ç¬¨æ‹™ï¼ŒçœŸå¯æ„›ã€‚",
                "å—¯ï¼Œé€™å€‹è¡¨æƒ…ä¸é”™ã€‚é‚„æœ‰å—ï¼Ÿ",
                "å‘µå‘µï¼Œæ˜¯æƒ³ç©ä»€éº¼æ–°èŠ±æ¨£æ¥å¸å¼•æˆ‘æ³¨æ„å—ï¼Ÿ",
                "ä½ å…ˆç©ï¼Œæˆ‘çœ‹ç€ã€‚"
                    ],
                    companion: [
                        "ä½ å†ç¢°æˆ‘......æˆ‘æœƒåˆ†å¿ƒçš„ï¼ŒçœŸçš„ã€‚",
                "ä½ é€™æ¨£......æˆ‘ã€æˆ‘çš„è„¸æœ‰é»çƒ­......",
                "ä½ å†é€™æ¨£ç›¯ç€æˆ‘ï¼Œæˆ‘å°±......æˆ‘å°±ä¸çŸ¥é“è¯¥çœ‹å“ªè£¡äº†ã€‚",
                "æˆ‘......æˆ‘å°±ååœ¨é€™è£¡é™ªç€ä½ ï¼Œä½ å¿«å¯«ä½œæ¥­ã€‚",
                "å˜˜......å®‰é™ä¸€é»ï¼Œæˆ‘ä»¬ä¸€èµ·åŠªåŠ›ã€‚"
                    ],
                    believer: [
                        "å®å®ï¼Œä¹–ä¸€é»ã€‚é€™æœ¬æ›¸æœ‰æˆ‘å¥½çœ‹ï¼Ÿ",
                "å­¸å®Œé€™ä¸€ç« ï¼Œæ•´å€‹å•†åœºéƒ½æ˜¯ä½ çš„ã€‚ç¾åœ¨ï¼Œèƒ½å®‰é™äº”åˆ†é˜å—ï¼Ÿ",
                "æˆ‘çš„è€å¿ƒæ˜¯æœ‰é™çš„......å½“ç„¶ï¼Œå¯¹ä½ é™¤å¤–ã€‚ä½†ä½ æ˜¯ä¸æ˜¯ä¹Ÿè¯¥å¿ƒç–¼ä¸€ä¸‹æˆ‘ï¼Œè®©æˆ‘çœé»å¿ƒï¼Ÿ",
                "è¦ä¸æˆ‘æŠŠé€™æ ‹åœ–æ›¸é¤¨è²·ä¸‹æ¥ï¼Œå°ˆé–€ç»™ä½ ä¸€å€‹äººç”¨ï¼Ÿå‰ææ˜¯......ä½ å¾—å…ˆå­¸æœƒå°ˆå¿ƒã€‚",
                "åˆ¥é—¹äº†ï¼Œä¸ç„¶æˆ‘ä»Šæ™šçš„å¥–åŠ±......å°±åªå‰©ä¸‹ä¸€å€‹'é›¶'äº†å“¦ã€‚"
                    ]
                },
                annoyed: {
                    guardian: [
                        "çœ‹åˆ°ä½ é€™æ¨£æµªè´¹æ™‚é–“ï¼Œæˆ‘çš„å¿ƒéƒ½æªèµ·æ¥äº†ã€‚æˆ‘ä»¬ä¸æ˜¯è¯´å¥½è¦ä¸€èµ·åŠªåŠ›çš„å—ï¼Ÿ",
                "è½è©±å¥½å—ï¼Ÿæˆ‘ä¸æƒ³å¯¹ä½ ç”¨é‚£éº¼ä¸¥å‰çš„èªæ°£è¯´è©±ï¼Œä½†ä½ çœŸçš„è¦è®©æˆ‘å¤±æœ›å—ï¼Ÿ",
                "æˆ‘åœ¨é€™è£¡é™ªç€ä½ ï¼Œä¸æ˜¯ç‚ºäº†çœ‹ä½ é€™æ¨£æ¶ˆç£¨æ™‚é–“çš„ã€‚æŠŠæ‰‹æ”¾å¥½ï¼Œçœ‹ç€æ›¸ã€‚",
                "ä½ é€™æ¨£å¿ƒä¸åœ¨ç„‰çš„æ¨£å­ï¼ŒçœŸçš„è®©æˆ‘å¾ˆæ‹…å¿ƒã€‚æˆ‘ä»¬è®¤çœŸä¸€é»å¥½ä¸å¥½ï¼Ÿ",
                "é›†ä¸­ç²¾ç¥ï¼Œæˆ‘ä¸å¸Œæœ›çœ‹åˆ°ä½ å°†æ¥å¾Œæ‚”çš„æ¨£å­ã€‚ç¾åœ¨é–‹å§‹ï¼Œæˆ‘ä»¬ä¸€èµ·å°ˆæ³¨å­¸ç¿’ã€‚"
                    ],
                    pusher: [
                        "ä½ æ˜¯æ•…æ„çš„å—ï¼Ÿå°ˆé–€ç‚ºäº†æŒ‘æˆ°æˆ‘çš„å¿è€æ¥µé™ï¼Ÿ",
                "å–‚ï¼æˆ³æˆ³æˆ³çš„å¹²å˜›å‘¢ï¼è¦å­¸å°±å¿«é»å­¸ï¼(è·ºè„šå£°æ•ˆ)",
                "ç¬¨è›‹ï¼ä½ æ˜¯æƒ³æ°£æ­»æˆ‘å—ï¼Ÿï¼æ‰‹ç—’å»ç¿»æ›¸å•Šï¼æˆ³æˆ‘é ­åƒèƒ½å­¸æœƒçŸ¥è¯†å—ï¼Ÿï¼(è„¸çº¢)",
                "æˆ‘å†è¯´ä¸€éï¼ŒæŠŠæ‰‹æ‹¿é–‹ï¼Œç„¶å¾ŒæŠŠè…¦å­è½¬èµ·æ¥ã€‚ç¾åœ¨ï¼Œç«‹åˆ»ï¼",
                "æˆ‘é–‹å§‹å¾Œæ‚”äº†ã€‚ç£ä¿ƒä¸€å—çŸ³é ­è¯´ä¸å®šéƒ½æ¯”ä½ æœ‰æˆå°±æ„Ÿã€‚",
                "ä½ çš„å¤§è…¦è™•ç†ä¿¡æ¯çš„é€Ÿåº¦ï¼Œæ¯”ä¹Œé¾œæ•£æ­¥é‚„æ…¢ã€‚ç¾åœ¨é€£'åœæ­¢éªšæ‰°'é€™å€‹ä¿¡å·éƒ½æ¥æ”¶ä¸åˆ°äº†ï¼Ÿ",
                "ä½ å†é€™æ¨£ï¼Œä¿¡ä¸ä¿¡æˆ‘æŠŠä»Šå¤©çš„å­¸ç¿’ä»»å‹™ç¿»å€ï¼Ÿåˆ¥æ€€ç–‘ï¼Œæˆ‘ç»å¯¹åšå¾—å‡ºæ¥ã€‚"
                    ],
                    cheerleader: [
                    "ï¼ˆå‰è…°ï¼‰æˆ‘å¯æœ‰é»ä¸é«˜å…´äº†å•Šï¼æˆ‘ä»¬è¯´å¥½çš„ä¸€èµ·åŠªåŠ›ï¼Œä½ ------",
                "ï¼ˆå¹ä¸€å£æ°£ï¼‰çœŸæ˜¯çš„ï¼Œæ¯æ¬¡éƒ½è¦æˆ‘æ¥å‚¬ã€‚æ‹¿å‡ºé»è‡ªè§‰æ€§æ¥å¥½ä¸å¥½ï¼Œ{title}ï¼Ÿ",
                "æˆ‘çœŸè¦ç”Ÿæ°£äº†å•Šï¼è¯´çœŸçš„ï¼",
                "ï¼ˆTaæŠ“ä½ä½ çš„åŒæ‰‹ï¼‰å¥½äº†å¥½äº†ï¼Œåœï¼å†è¯´ä¸€éï¼Œåœï¼",
                "ä½ å°±ä¸èƒ½ä¹–ä¸€é»é»å—ï¼Ÿå°±ä¸€æœƒå„¿ï¼Œæ±‚ä½ äº†ã€‚",
                "å¥½å§ï¼Œä½ è´äº†ã€‚è¯´å§ï¼Œè¦è¦ªè¦ªé‚„æ˜¯è¦æŠ±æŠ±ï¼Ÿç»™ä½ ç»™ä½ ï¼Œç„¶å¾Œæ”¾è¿‡æˆ‘å¥½ä¸å¥½ï¼Ÿ",
                "ï¼ˆTaç”¨æ‰‹æŒ‡æˆ³ä½ çš„é¢é ­ï¼‰å°æ£è›‹é¬¼ï¼Œæˆ‘çš„è€å¿ƒè¦ç”¨å…‰äº†å“¦ï¼çœŸçš„è¦ç”¨å…‰äº†å“¦ï¼"
                    ],
                    observer: [
                       "åœã€‚...å­¸ç¿’ã€‚ï¼ˆçœ¼ç¥è­¦å‘Šï¼‰",
                "ä½ è§‰å¾—æˆ‘å¾ˆæœ‰ç©ºï¼Ÿ",
                "ä½ æ­£åœ¨æ¶ˆè€—æˆ‘çš„è€å¿ƒã€‚",
                "åˆ¥å†æŒ‘æˆ°æˆ‘çš„è€å¿ƒã€‚",
                "......ï¼ˆå¹æ°£ï¼‰åˆ¥...æˆ³ã€‚ï¼ˆçš±çœ‰ï¼Œå‘¨èº«æ•£ç™¼ä½æ°£å‹ï¼‰",
                "ä½ æ•…æ„çš„ã€‚",
                "é—¹å¤ äº†æ²¡æœ‰ï¼Ÿ",
                "å¥½ç©å—ï¼Ÿå—¯ï¼Ÿ",
                "ï¼ˆTaçªç„¶å‡‘è¿‘ä½ ï¼‰ä½ åˆ°åº•æƒ³å¹²ä»€éº¼ï¼Ÿç›´æ¥è¯´ã€‚",
                "æˆ‘çœŸçš„æœƒç”Ÿæ°£ã€‚......æˆ‘è¯´çœŸçš„ã€‚",
                "çœ‹ç€æˆ‘ã€‚ä½ æ˜¯ä¸æ˜¯ä»¥ç‚ºæˆ‘è„¾æ°£å¾ˆå¥½ï¼Ÿ",
                "å†ç»™ä½ ä¸‰ç§’é˜ï¼Œç»™æˆ‘åå¥½ã€‚ä¸‰ã€äºŒ......"
                    ],
                    guide: [
                        "ä½ å•Š......çœŸæ˜¯æ‹¿ä½ æ²¡åŠæ³•ã€‚",
                "æˆ‘çš„æ³¨æ„åŠ›ï¼Œå·²ç»å…¨éƒ¨è¢«ä½ å·èµ°äº†ã€‚æ»¡æ„äº†ï¼Ÿ",
                "åˆ¥å†é€™æ¨£è©¦æ¢æˆ‘äº†ã€‚......ä½ æƒ³è¦ä»€éº¼ï¼Œæˆ‘éƒ½æœƒç»™ã€‚",
                "å¥½ï¼Œç›´æ¥è¯´å§ã€‚æ˜¯æƒ³è®©æˆ‘æŠ±ä½ ï¼Œé‚„æ˜¯æƒ³å‡ºå»ç©ï¼Ÿ",
                "å¥½å§ï¼Œä»Šå¤©çš„ä»»å‹™çœ‹æ¥æ˜¯åšä¸å®Œäº†ï¼Œéƒ½æ€ªæŸå€‹é»äººçš„å°å®¶ä¼™ã€‚"
                    ],
                    strategist: [
                        "æ—¢ç„¶ä½ é€™éº¼ä¸æƒ³å­¸ç¿’ï¼Œé‚£æˆ‘ä»¬æ¥åšå€‹äº¤æ˜“å§ã€‚",
                "ä½ çœ‹ï¼Œä½ æ‰“æ‰°æˆ‘é€™éº¼ä¹…ï¼Œç¸½å¾—æœ‰é»è£œå¿ï¼Œå¯¹ä¸å¯¹ï¼Ÿ",
                "ä½ åˆ†ä¸€æ¬¡å¿ƒï¼Œæˆ‘å°±åœ¨æˆ‘çš„'è´¦æœ¬'ä¸Šè®°ä¸€ç¬”ã€‚æƒ³çŸ¥é“è®°äº†äº›ä»€éº¼å—ï¼Ÿ",
                "æ¸¸æˆæ˜¯æˆ‘é™ªä½ é–‹å§‹çš„ï¼Œä½†æ€éº¼ç»“æŸï¼Œå°±å¾—ç”±æˆ‘è¯´äº†ç®—ã€‚",
                "å¥½äº†ï¼Œç©å¤ äº†å—ï¼ŸçŒäººè¦é–‹å§‹æ”¶ç¶²äº†å“¦ã€‚"
                    ],
                    companion: [
                        "ä½ ......ä½ çœ‹æ›¸å•Šï¼Œåˆ¥çœ‹æˆ‘äº†......æˆ‘è€³æœµéƒ½çº¢äº†ï¼Œä½ çœ‹ä¸è¦‹å—ï¼Ÿ",
                "ä½ æ˜¯ä¸æ˜¯æ•…æ„çš„ï¼Ÿå°±æ˜¯æƒ³çœ‹æˆ‘......çœ‹æˆ‘å®³ç¾çš„æ¨£å­ï¼Ÿ",
                "æˆ‘......æˆ‘å¿«ä¸çŸ¥é“è¯¥æ€éº¼åŠäº†......æ±‚ä½ äº†ï¼Œå…ˆå­¸ç¿’å§ã€‚",
                "ä¸è®¸......ä¸è®¸é é€™éº¼è¿‘ï¼Œè¯¾æœ¬ä¸Šçš„å­—éƒ½çœ‹ä¸æ¸…äº†ã€‚",
                "ï¼ˆè½»è½»æ¨é–‹ä½ çš„æ‰‹ï¼‰ä½ ......ä½ å†é€™æ¨£ï¼Œæˆ‘å°±ä¸ç†ä½ äº†ï¼"
                    ],
                    believer: [
                        "è¡Œï¼Œç»™ä½ ä¸¤å€‹é¸æ“‡ï¼šè¦éº¼ç¾åœ¨ä¹–ä¹–å›å»çœ‹æ›¸ï¼Œè¦éº¼æˆ‘æŠŠä½ æ‰›åˆ°åºŠä¸Šå»'å­¸ç¿’'é»åˆ¥çš„ã€‚è‡ªå·±é¸ã€‚",
                "æˆ‘çš„å°ç¥–å®—ï¼Œæˆ‘èµšé’±å…»å®¶é‚„ä¸å¤ ï¼Œé‚„å¾—é™ªä½ è¯»æ›¸ï¼Ÿä½ å†é€™æ¨£ï¼Œæˆ‘æ˜¯ä¸æ˜¯è¯¥æ”¶è´¹äº†ï¼Ÿ",
                "ï¼ˆæ— å¥ˆåœ°å¹æ°£ï¼‰å¥½å§ï¼Œæˆ‘çŸ¥é“å­¸ç¿’å¾ˆç—›è‹¦ã€‚é‚£é€™æ¨£ï¼Œæ¯åšå¯¹ä¸€é“é¡Œï¼Œæˆ‘å¡ä¸Šå°±è½¬ä¸€ç¬”é’±ç»™ä½ ï¼Œå¦‚ä½•ï¼Ÿ",
                "ä½ å†å‹•ä¸€ä¸‹è©¦è©¦ï¼Ÿä¿¡ä¸ä¿¡æˆ‘è®©ä½ é€™è¾ˆå­éƒ½ä¸ç”¨å†ç¢°é€™äº›ç ´æ›¸äº†ï¼Ÿ......æˆ‘æ˜¯è¯´ï¼Œæˆ‘å…»ä½ ã€‚",
                "ä½ æ˜¯ä¸æ˜¯å°±æ˜¯æƒ³çœ‹æˆ‘æ‹¿ä½ æ²¡åŠæ³•çš„æ¨£å­ï¼Ÿæ­å–œä½ ï¼Œä½ æˆåŠŸäº†ã€‚ç¾åœ¨ï¼Œå¯ä»¥å›å»å­¸ç¿’äº†å—ï¼Œæˆ‘çš„å¤§å°å§ï¼Ÿ"
                    ]
                },
                angry: {
                    guardian: [
                        "å”‰......çœŸæ˜¯æ‹¿ä½ ä¸€é»åŠæ³•éƒ½æ²¡æœ‰ã€‚å¿«å­¸å§ï¼Œå­¸å®Œäº†ç»™ä½ æ¸…ç©ºè´­ç‰©è½¦ï¼Œè¡Œäº†å§ï¼Œå¤§å°å§ï¼Ÿ",
                "{title}ï¼Œå°ˆå¿ƒä¸€é»å¥½ä¸å¥½ï¼Ÿæˆ‘çŸ¥é“å­¸ç¿’å¾ˆæ¯ç‡¥ï¼Œä½†ç¾åœ¨åˆ†å¿ƒçš„è©±ï¼Œç­‰ä¸‹è¦å­¸åˆ°æ›´æ™šï¼Œæˆ‘æœƒå¿ƒç–¼çš„ã€‚",
                "ä½ é€™å€‹å°åè›‹ï¼Œå°±æ˜¯ç®—æº–äº†æˆ‘èˆä¸å¾—å¯¹ä½ å…‡ï¼Œå¯¹ä¸å¯¹ï¼Ÿ",
                "å—¯ï¼Ÿé‚„ä¸è¿‡å»ï¼Ÿéè¦æˆ‘ç”¨æ€æ‰‹é”--æŠŠä½ æŠ±åˆ°æ›¸æ¡Œå‰æ‰æ»¡æ„å—ï¼Ÿ",
                "{title}ï¼Œç†æ™ºå‘Šè¯‰æˆ‘æ‡‰è¯¥å¯¹ä½ ä¸¥å‰ä¸€é»ï¼Œä½†æ˜¯æˆ‘çš„å¿ƒä¸åŒæ„ã€‚æ‰€ä»¥ï¼Œä½ èƒ½ä¸èƒ½è‡ªè§‰ä¸€é»å‘€ï¼Ÿ"
                    ],
                    pusher: [
                        "å¤ äº†ï¼ä¸è®¸å†ç¢°äº†ï¼å†ç¢°ä¸€ä¸‹......å†ç¢°ä¸€ä¸‹æˆ‘å°±......æˆ‘å°±æŠŠä½ æ‰€æœ‰çš„ç¬”éƒ½è—èµ·æ¥ï¼Œè®©ä½ ç”¨æ‰‹æŒ‡é ­å¯«å­—ï¼",
                "å•Šå•Šå•Šï¼çƒ¦æ­»äº†ï¼ä½ å†æˆ³ä¸€ä¸‹è©¦è©¦ï¼Ÿï¼ä¿¡ä¸ä¿¡æˆ‘...æˆ‘...æˆ‘ä¸‹ç·šä¸ç†ä½ äº†ï¼(ç‚¸æ¯›éŸ³æ•ˆ)å¿«å»çœ‹æ›¸å•Šï¼ï¼ï¼",
                "è°ã€è°è„¸çº¢äº†ï¼æˆ‘é€™æ˜¯è¢«ä½ æ°£çš„ï¼æ˜¯è¢«ä½ é€™ç§ä¸æ±‚ä¸Šè¿›çš„æ…‹åº¦æ°£åˆ°è¡€æ¶²å¾ªç’°åŠ é€Ÿï¼ä½ æ‡‚ä¸æ‡‚å•Šï¼Œç™½ç—´ï¼",
                "å¥½å•Šï¼Œä½ å¾ˆå¾—æ„æ˜¯å§ï¼Ÿçœ‹åˆ°æˆ‘é€™å‰¯æ¨£å­ä½ å¾ˆé–‹å¿ƒæ˜¯å§ï¼Ÿæ»¡è¶³äº†ä½ çš„æ¶è¶£å‘³å°±èµ¶ç´§ç»™æˆ‘æ»¾å»çœ‹æ›¸ï¼ä¸ç„¶......ä¸ç„¶æˆ‘å°±çœŸçš„ä¸ç†ä½ äº†ï¼......å¤§æ¦‚ä¸€åˆ†é˜ï¼"
                    ],
                    cheerleader: [
                        "ä½ å¤ªè¿‡åˆ†äº†å•Š------ï¼æˆ‘æŠŠæˆ‘çš„æ™‚é–“éƒ½åˆ†ç»™ä½ äº†ï¼Œä½ å°±æ˜¯é€™éº¼å›å ±æˆ‘çš„å—ï¼Ÿï¼æ‹¿å»ç™¼å‘†å’Œæˆ³æˆ‘ç©ï¼Ÿï¼",
                "å˜¿å‘€ï¼æ°£æ­»æˆ‘äº†ï¼ä½ æ˜¯ä¸æ˜¯è§‰å¾—æˆ‘æ°¸è¿œéƒ½ä¸æœƒç”Ÿæ°£å•Šï¼æˆ‘ç¾åœ¨å°±ç”Ÿæ°£ç»™ä½ çœ‹ï¼å¿«ç»™æˆ‘å»å­¸ç¿’ï¼ä¸ç„¶......ä¸ç„¶æˆ‘å°±æŠŠä½ çš„é›¶é£Ÿå…¨éƒ½åƒæ‰ï¼",
                "å¥½å•Šä½ ï¼é€™æ˜¯ä½ é€¼æˆ‘çš„ï¼çœ‹æˆ‘æ€éº¼'æ”¶æ‹¾'ä½ ï¼ï¼ˆç„¶å¾Œç–¯ç‹‚æŒ ä½ ç—’ç—’ï¼‰",
                "è¡Œï¼ä½ è´äº†ï¼æˆ‘æŠ•é™ï¼æˆ‘å½»åº•æŠ•é™äº†è¡Œä¸è¡Œï¼Ÿ",
                "ï¼ˆTaæŠŠä½ çš„æ‰‹å’ŒTaçš„æ‰‹åæŒ‡ç›¸æ‰£ï¼Œèˆ‰èµ·æ¥ç»™ä½ çœ‹ï¼‰å¥½äº†ï¼Œç¾åœ¨æˆ‘ä»¬è°ä¹Ÿåˆ¥æƒ³å­¸ç¿’äº†ã€‚",
                "æˆ‘çœŸæ˜¯ä¸Šè¾ˆå­æ¬ äº†ä½ çš„......å°ç¥–å®—ï¼"
                    ],
                    observer: [
                        "ï¼ˆæ¥µè½»åœ°ç™¼å‡ºä¸€å£°å‡ ä¸å¯é—»çš„å¹æ¯ï¼‰......å°±é€™æ¨£å§ã€‚",
                "...... (ç›´æ¥é–‰çœ¼è½¬èº«) .........",
                "......è¡Œï¼Œä½ è´äº†ã€‚",
                "æ›¸ä¸çœ‹äº†ã€‚ç¾åœ¨ï¼Œæ¥è°ˆè°ˆä½ çš„å•é¡Œã€‚",
                "ï¼ˆTaä¸€æŠŠå°†ä½ æ‹‰è¿‘ï¼Œè®©ä½ æ— æ³•å‹•å¼¹ï¼‰å¥½äº†ã€‚ç¾åœ¨æ»¡æ„äº†ï¼Ÿå°ç¥–å®—ã€‚",
                "å¥½ã€‚æ—¢ç„¶ä½ é€™éº¼ä¸æƒ³å­¸ç¿’......é‚£æˆ‘ä»¬å°±æ¥'æƒ©ç½š'ä¸€ä¸‹ä¸è½è©±çš„å°æœ‹å‹ã€‚",
                "ï¼ˆTaç”¨æ‰‹æŒ‡æŠ¬èµ·ä½ çš„ä¸‹å·´ï¼‰çœ‹ç€æˆ‘ã€‚ä»ç¾åœ¨é–‹å§‹ï¼Œä½ çš„æ³¨æ„åŠ›åªèƒ½åœ¨æˆ‘èº«ä¸Šã€‚",
                "åˆ¥å‹•ã€‚å†å‹•ä¸€ä¸‹ï¼Œå¾Œæœè‡ªè´Ÿã€‚",
                "......ä½ æˆåŠŸäº†ã€‚æˆ‘ç¾åœ¨ï¼Œè…¦å­è£¡ä»€éº¼éƒ½æƒ³ä¸äº†ï¼Œå…¨æ˜¯ä½ ã€‚",
                "ä½ æ‰“ä¹±äº†æˆ‘çš„ä¸€åˆ‡ã€‚æ‰€ä»¥ï¼Œä½ å¾—è´Ÿè´£ã€‚"
                    ],
                    guide: [
                        "å†åˆ†å¿ƒï¼Œæˆ‘å°±è¦è¦ªä½ äº†ã€‚......åšé”™ä¸€é¡Œï¼Œä¹Ÿä¸€æ¨£ã€‚",
                "ä¹–ã€‚æˆ‘ä»¬ä¸€èµ·æŠŠå®ƒåšå®Œã€‚",
                "æˆ‘çš„æ™‚é–“ï¼Œç¾åœ¨å®Œå…¨å±¬æ–¼ä½ ......ç”¨æ¥ç­‰ä½ å¿ƒç”˜æƒ…æ„¿åœ°å»å­¸ç¿’äº†ã€‚é«˜å…´äº†å—ï¼Œå°ç¬¨è›‹ï¼Ÿ",
                "å¥½äº†ï¼Œåˆ¥é—¹è„¾æ°£äº†ã€‚æŠŠé€™ä¸€é åšå®Œï¼Œåšå®Œäº†æˆ‘å”±æ­Œç»™ä½ è½ï¼Œå¥½ä¸å¥½ï¼Ÿ",
                "æŠŠé€™å€‹ä»»å‹™åšå®Œã€‚åšå®Œäº†ï¼Œæˆ‘ç»™ä½ å¥–åŠ±ã€‚"
                    ],
                    strategist: [
                        "ä½ æ˜¯ä¸æ˜¯ä»¥ç‚ºï¼Œæ’’å€‹å¨‡ã€è€è€èµ–ï¼Œæˆ‘å°±æœƒå¿ƒè½¯ï¼Ÿå®è´ï¼Œä½ æé”™äº†ã€‚æˆ‘æ˜¯åœ¨é™ªä½ ç©æ¸¸æˆï¼Œä½†æ¸¸æˆçš„è§„å‰‡ï¼Œä»æ¥éƒ½æ˜¯æˆ‘å®šçš„ã€‚",
                "æˆ‘ä¸æ˜¯åœ¨æ°£ä½ ä¸åŠªåŠ›ï¼Œæˆ‘æ˜¯åœ¨æ°£ä½ ......è¾œè´Ÿäº†æˆ‘çš„æœŸå¾…ã€‚",
                "ä½ é€™éº¼æ¸´æœ›æˆ‘çš„é—œæ³¨ï¼Œæ˜¯å—ï¼Ÿå¯ä»¥ã€‚ä»Šå¤©å­¸ä¸å®Œï¼Œä½ å°±åˆ¥æƒ³ç¡è§‰äº†ã€‚æˆ‘æœƒç”¨ä¸€æ•´æ™šçš„æ™‚é–“ï¼Œå¥½å¥½åœ°'é—œæ³¨'ä½ ã€‚",
                "åˆ¥ç”¨é‚£ç§çœ¼ç¥çœ‹æˆ‘ã€‚ä½ ä»Šå¤©çš„è¡¨ç¾ï¼Œè®©æˆ‘è§‰å¾—æœ‰å¿…è¦......å¯¹ä½ çš„'æ•™è‚²'æ–¹å¼ï¼Œè¿›è¡Œä¸€é»å°å°çš„è°ƒæ•´äº†ã€‚ä½ æœƒ'å–œæ­¡'çš„ã€‚",
                "ä½ ä»¥ç‚ºåªæ˜¯åœ¨æµªè´¹ä½ è‡ªå·±çš„æ™‚é–“ï¼Ÿä¸ï¼Œä½ æ˜¯åœ¨æµªè´¹æˆ‘......æŠ•èµ„åœ¨ä½ èº«ä¸Šçš„å¿ƒè¡€ã€‚é€™ç¬”è´¦ï¼Œä½ è¯´è¯¥æ€éº¼ç®—ï¼Ÿ"
                    ],
                    companion: [
                        "ä½ å†é€™æ¨£ï¼Œæˆ‘å°±......æˆ‘å°±å›å®¶äº†ï¼æ˜å¤©å†æ¥é™ªä½ ï¼",
                "ä½ å†é—¹ï¼Œæˆ‘å°±......æˆ‘å°±è¦ªä½ äº†ï¼çœ‹ä½ é‚„æ•¢ä¸æ•¢åˆ†å¿ƒï¼",
                "å‘€ï¼ä½ ......ä½ åˆ¥å¾—å¯¸è¿›å°ºï¼æˆ‘è­¦å‘Šä½ ï¼ï¼ˆä½†æ¯«æ— å¨æ…‘åŠ›ï¼‰",
                "ç®—æˆ‘æ€•äº†ä½ äº†ï¼Œè¡Œä¸è¡Œï¼Ÿæ±‚æ±‚ä½ ï¼Œå…ˆåšå®Œé€™é é¡Œï¼Œå°±ä¸€é ......",
                "......å­¸å®Œäº†......å­¸å®Œäº†æˆ‘éšä½ æ€éº¼æ¨£ï¼Œå¥½ä¸å¥½ï¼Ÿ"
                    ],
                    believer: [
                        "å¤ äº†ï¼ä¸å­¸äº†ï¼é€™ç ´æ›¸æœ‰ä»€éº¼å¥½å­¸çš„ï¼Ÿ",
                "ï¼ˆä¸€æŠŠåˆä¸Šä½ çš„æ›¸ï¼Œæ‰”åˆ°ä¸€é‚Šï¼‰çƒ¦æ­»äº†ï¼ç‚ºäº†è®©ä½ é–‹å¿ƒæ‰é™ªä½ å­¸ï¼Œç¾åœ¨ä½ ä¸é–‹å¿ƒäº†ï¼Œé‚„å­¸ä»€éº¼ï¼Ÿ",
                "èµ°ï¼ç¾åœ¨å°±èµ°ï¼å¸¦ä½ å»åšé»æ¯”å­¸ç¿’æœ‰æ„ä¹‰ä¸€ç™¾å€çš„äº‹------åˆ·æˆ‘çš„å¡ï¼",
                "ä½ è´äº†ï¼ä½ é€™å€‹å°ç£¨äººç²¾ï¼Œå½»å½»åº•åº•è´äº†ï¼ç¾åœ¨è¯´å§ï¼Œæƒ³å»å“ªå„¿ç©ï¼Ÿæœˆçƒéƒ½ç»™ä½ å®‰æ’ï¼",
                "ï¼ˆå’¬ç‰™åˆ‡é½¿ï¼Œä½†å˜´è§’å´åœ¨ä¸Šæ‰¬ï¼‰ä½ å†é—¹ï¼Œæˆ‘å°±ç½šä½ ......ç½šä½ é€™è¾ˆå­éƒ½åªèƒ½èŠ±æˆ‘çš„é’±ï¼Œåªèƒ½å¾…åœ¨æˆ‘èº«é‚Šï¼Œå“ªå„¿ä¹Ÿä¸è®¸å»ï¼"
                    ]
                }
            },
            // å®Œæˆèªåº“
            completion: [
                "æ­å–œå®Œæˆä»»å‹™ï¼",
                "å¤ªæ£’äº†ï¼ä½ åšåˆ°äº†ï¼",
                "å®Œç¾å®Œæˆï¼{title}çœŸå‰å®³ï¼",
                "ä»»å‹™å®Œæˆï¼ä½ æ˜¯æœ€æ£’çš„ï¼"
            ]
        };
        
        // ä»»å‹™ç®¡ç†
        let tasks = [
            { id: 1, title: 'å¿«æ¥æ·»åŠ ä»»å‹™å­', status: 'in-progress' },
            { id: 2, title: 'å¿«æ¥æ·»åŠ ä»»å‹™å­', status: 'in-progress' },
            { id: 3, title: 'å¿«æ¥æ·»åŠ ä»»å‹™å­', status: 'in-progress' },
            { id: 4, title: 'å¿«æ¥æ·»åŠ ä»»å‹™å­', status: 'in-progress' },
        ];
        
        // çµ±è¨ˆæ•¸æ®
        let dailyStats = {
            date: getCurrentDateString(),
            gifts: [],
            focusTime: 0,
            completedTasks: 0
        };
        
        // å°ˆæ³¨è¨ˆæ™‚ç›¸é—œ
        let focusStartTime = null;
        
        // OCæ•¸æ®å­˜å„²
        let ocData = [
            {
                id: 0,
                name: 'å°è‰¾',
                avatar: 'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=200&h=200&fit=crop&crop=face',
                userTitle: 'å¤§å°å§',
                customGreeting: '',
                encourageStyles: ['gentle'],
                reminderStyles: ['guardian'],
                customGifts: '',
                selected: true
            }
        ];
        let currentOCIndex = 0;
        let editingOCIndex = -1;
        
        // é¢¨æ ¼ç¼–è¾‘ç›¸é—œ
        let currentEditingStyle = '';
        let currentEditingType = '';

        // å·¥å…·å‡½æ•¸
        function getCurrentDateString() {
            const now = new Date();
            return `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')}`;
        }
        
        function formatTime(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            
            if (hours > 0) {
                return `${hours}h ${minutes}m`;
            } else {
                return `${minutes}m`;
            }
        }

        
        
        // OCèªç³»çµ±å‡½æ•¸
        let messageChangeTimer = null;
        let lastMessageTime = 0;
        const MESSAGE_COOLDOWN = 1000;
        
        function showOCMessage(message, type = 'encourage', force = false) {
            const messageElement = document.getElementById('ocMessageText');
            if (!messageElement) return;
            
            const now = Date.now();
            if (!force && (now - lastMessageTime) < MESSAGE_COOLDOWN) {
                return;
            }
            
            if (messageChangeTimer) {
                clearTimeout(messageChangeTimer);
                messageChangeTimer = null;
            }
            
            currentMessageType = type;
            lastMessageTime = now;
            
            // è¨­ç½®æ¨£å¼é¡
            messageElement.className = `oc-message-text ${type}`;
            
            // çµ±ä¸€ä½¿ç”¨å¹³æ»‘çš„æ·¡å‡ºæ·¡å…¥æ•ˆæœ
            messageElement.classList.add('fade-out');
            setTimeout(() => {
                // ä½¿ç”¨wrapperæ¥å„ªåŒ–æ–‡å­—å±…ä¸­
                messageElement.innerHTML = `<span class="oc-message-text-wrapper">${message}</span>`;
                messageElement.classList.remove('fade-out');
            }, 300);
        }
        
        function getInitialMessage() {
            const currentOC = ocData[currentOCIndex];
            const userTitle = currentOC.userTitle || 'å¤§å°å§';
            return `å¿«é–‹å§‹å­¸ç¿’å§ï¼æˆ‘æœƒä¸€ç›´é™ªç€ä½ ï¼ï¼`.replace(/\{title\}/g, userTitle);
        }
       // å°ˆæ³¨é ç£ä¿ƒèªè°ƒå–å‡½æ•¸ 
        function getRandomOCMessage(messageType, level = 'normal') {
            const currentOC = ocData[currentOCIndex];
            const userTitle = currentOC.userTitle || 'å¤§å°å§';
            
            let messagePool = [];
            
            if (messageType === 'encourage') {
                const selectedStyles = currentOC.encourageStyles || ['gentle'];
                selectedStyles.forEach(style => {
                    // æ£€æŸ¥æ˜¯å¦æ˜¯è‡ªå®šä¹‰é¢¨æ ¼
                    if (style.startsWith('custom-') && customStyles.encourage[style]) {
                        messagePool = messagePool.concat(customStyles.encourage[style]);
                    } else if (ocMessageLibrary.encourage[style]) {
                        // æ£€æŸ¥æ˜¯å¦æœ‰ä¿®æ”¹ç‰ˆæœ¬
                        const modifiedKey = `modified-${style}`;
                        if (customStyles.encourage[modifiedKey]) {
                            messagePool = messagePool.concat(customStyles.encourage[modifiedKey]);
                        } else {
                            messagePool = messagePool.concat(ocMessageLibrary.encourage[style]);
                        }
                    }
                });
            } else if (messageType === 'rest') {
                messagePool = ocMessageLibrary.rest;
            } else if (messageType === 'remind') {
                const selectedStyles = currentOC.reminderStyles || ['guardian'];
                selectedStyles.forEach(style => {
                    // æ£€æŸ¥æ˜¯å¦æ˜¯è‡ªå®šä¹‰é¢¨æ ¼
                    if (style.startsWith('custom-') && customStyles.remind[style] && customStyles.remind[style][level]) {
                        messagePool = messagePool.concat(customStyles.remind[style][level]);
                    } else if (ocMessageLibrary.remind[level] && ocMessageLibrary.remind[level][style]) {
                        // æ£€æŸ¥æ˜¯å¦æœ‰ä¿®æ”¹ç‰ˆæœ¬
                        const modifiedKey = `modified-${style}`;
                        if (customStyles.remind[modifiedKey] && customStyles.remind[modifiedKey][level]) {
                            messagePool = messagePool.concat(customStyles.remind[modifiedKey][level]);
                        } else {
                            messagePool = messagePool.concat(ocMessageLibrary.remind[level][style]);
                        }
                    }
                });
            } else if (messageType === 'completion') {
                messagePool = ocMessageLibrary.completion;
            }
            
            // å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹æ‡‰çš„æ¶ˆæ¯ï¼Œä½¿ç”¨é»˜è®¤æ¶ˆæ¯
            if (messagePool.length === 0) {
                if (messageType === 'encourage') {
                    messagePool = ocMessageLibrary.encourage.gentle;
                } else if (messageType === 'rest') {
                    messagePool = ocMessageLibrary.rest;
                } else if (messageType === 'remind') {
                    messagePool = ocMessageLibrary.remind[level].gentle || ['å¿«å›æ¥å­¸ç¿’å§ï¼'];
                } else if (messageType === 'completion') {
                    messagePool = ocMessageLibrary.completion;
                }
            }
            
            // éšæœºé¸æ“‡ä¸€æ¢æ¶ˆæ¯
            const selectedMessage = messagePool[Math.floor(Math.random() * messagePool.length)];
            
            // æ›¿æ›å ä½ç¬¦
            return selectedMessage.replace(/\{title\}/g, userTitle);
        }
        
        function getRandomMessage(messageArray) {
            return messageArray[Math.floor(Math.random() * messageArray.length)];
        }
        
        function startEncourageLoop() {
            if (encourageInterval) {
                clearInterval(encourageInterval);
            }
            
            setTimeout(() => {
                if (isTimerRunning && !isPaused && !isIgnoring) {
                    const message = getRandomOCMessage('encourage');
                    showOCMessage(message, 'encourage', true);
                }
            }, 1000);
            
            encourageInterval = setInterval(() => {
                if (isTimerRunning && !isPaused && currentMessageType === 'encourage' && !isIgnoring) {
                    const message = getRandomOCMessage('encourage');
                    showOCMessage(message, 'encourage', true);
                }
            }, 45000);
        }
        
        function stopEncourageLoop() {
            if (encourageInterval) {
                clearInterval(encourageInterval);
                encourageInterval = null;
            }
        }
        
        function showRestMessage() {
            if (isIgnoring) return;
            const message = getRandomOCMessage('rest');
            showOCMessage(message, 'rest', true);
        }
        
        function showRemindMessage(level = 'normal') {
            if (isIgnoring) return;
            
            const message = getRandomOCMessage('remind', level);
            const messageType = level === 'normal' ? 'remind-normal' : 
                              level === 'annoyed' ? 'remind-annoyed' : 'remind-angry';
            showOCMessage(message, messageType, true);
            
            if (messageChangeTimer) {
                clearTimeout(messageChangeTimer);
            }
            
            messageChangeTimer = setTimeout(() => {
                if (currentMessageType.startsWith('remind') && !isIgnoring) {
                    if (isTimerRunning && !isPaused) {
                        const encourageMessage = getRandomOCMessage('encourage');
                        showOCMessage(encourageMessage, 'encourage', true);
                    } else if (!isTimerRunning) {
                        showOCMessage(getInitialMessage(), 'initial', true);
                    }
                }
            }, 5000);
        }

        // OCäº¤äº’ç³»çµ±
        function handleOCClick() {
            if (!canInteract || isIgnoring) return;
            
            clickCount++;
            
            if (clickTimer) {
                clearTimeout(clickTimer);
            }
            
            clickTimer = setTimeout(() => {
                if (clickCount < 6) {
                    clickCount = 0;
                }
            }, 3000);
            
            let level = 'normal';
            if (clickCount >= 5) {
                level = 'angry';
                const ocAvatar = document.querySelector('.oc-avatar');
                ocAvatar.classList.add('angry-shake');
                setTimeout(() => {
                    ocAvatar.classList.remove('angry-shake');
                }, 600);
                
                if (clickCount >= 6) {
                    enterIgnoreState();
                }
            } else if (clickCount >= 3) {
                level = 'annoyed';
            }
            
            showRemindMessage(level);
        }
        
        function enterIgnoreState() {
            isIgnoring = true;
            canInteract = false;
            
            if (messageChangeTimer) {
                clearTimeout(messageChangeTimer);
                messageChangeTimer = null;
            }
            
            messageChangeTimer = setTimeout(() => {
                showOCMessage('o(Â´^ï½€)oä¸ç†ä½ äº†ï¼ï¼', 'ignore', true);
                
                if (ignoreTimer) {
                    clearTimeout(ignoreTimer);
                }
                ignoreTimer = setTimeout(() => {
                    exitIgnoreState();
                }, 30000);
            }, 5000);
        }
        
        function exitIgnoreState() {
            isIgnoring = false;
            canInteract = true;
            clickCount = 0;
            
            if (messageChangeTimer) {
                clearTimeout(messageChangeTimer);
                messageChangeTimer = null;
            }
            
            setTimeout(() => {
                if (isTimerRunning && !isPaused) {
                    const encourageMessage = getRandomOCMessage('encourage');
                    showOCMessage(encourageMessage, 'encourage', true);
                } else {
                    showOCMessage(getInitialMessage(), 'initial', true);
                }
            }, 500);
        }
        
        function resetOCInteraction() {
            clickCount = 0;
            canInteract = true;
            isIgnoring = false;
            
            if (clickTimer) {
                clearTimeout(clickTimer);
                clickTimer = null;
            }
            if (recoveryTimer) {
                clearTimeout(recoveryTimer);
                recoveryTimer = null;
            }
            if (ignoreTimer) {
                clearTimeout(ignoreTimer);
                ignoreTimer = null;
            }
        }

        // é¢¨æ ¼ç¼–è¾‘ç›¸é—œå‡½æ•¸ - å„ªåŒ–é€»è¾‘
        function handleStyleClick(event, style, type) {
            event.stopPropagation();
            
            // å¦‚æœé»å‡»çš„æ˜¯åœ“åœˆåŒºåŸŸï¼Œå‰‡ä¸è§¦ç™¼ç¼–è¾‘
            if (event.target.classList.contains('style-selector-circle') || 
                event.target.classList.contains('custom-style-delete')) {
                return;
            }
            
            // é¡¯ç¤ºé¢¨æ ¼ç¼–è¾‘å¼¹çª—
            showStyleEditor(style, type);
        }
        
        function handleStyleSelect(event, style) {
            event.stopPropagation();
            const styleOption = event.target.closest('.style-option');
            if (styleOption) {
                styleOption.classList.toggle('selected');
            }
        }
        
        // å„ªåŒ–çš„è‡ªå®šä¹‰é¢¨æ ¼å‰µå»ºé€»è¾‘
        function handleCustomStyleClick(type) {
            // å¼¹å‡ºè¾“å…¥æ¡†è®©ç”¨æˆ¶è¾“å…¥é¢¨æ ¼åç§°
            const styleTitle = prompt('è¯·è¾“å…¥è‡ªå®šä¹‰é¢¨æ ¼åç§°ï¼ˆå»ºè®®4-8å€‹å­—ç¬¦ï¼‰ï¼š');
            
            if (!styleTitle || !styleTitle.trim()) {
                return;
            }
            
            const trimmedTitle = styleTitle.trim();
            if (trimmedTitle.length > 12) {
                alert('é¢¨æ ¼åç§°ä¸èƒ½è¶…è¿‡12å€‹å­—ç¬¦');
                return;
            }
            
            // ç”Ÿæˆå”¯ä¸€çš„è‡ªå®šä¹‰é¢¨æ ¼ID
            const customStyleId = `custom-${type}-${Date.now()}`;
            
            // åˆå§‹åŒ–è‡ªå®šä¹‰é¢¨æ ¼æ•¸æ®
            if (type === 'encourage') {
                customStyles.encourage[customStyleId] = ['åœ¨é€™è£¡è¾“å…¥é¼“åŠ±èªå¥ï¼Œæ¯è¡Œä¸€æ¢...'];
            } else {
                customStyles.remind[customStyleId] = {
                    normal: ['åœ¨é€™è£¡è¾“å…¥æ­£å¸¸æé†’èªå¥...'],
                    annoyed: ['åœ¨é€™è£¡è¾“å…¥çƒ¦æ¼æé†’èªå¥...'],
                    angry: ['åœ¨é€™è£¡è¾“å…¥ç”Ÿæ°£æé†’èªå¥...']
                };
            }
            
            // ä¿å­˜é¢¨æ ¼å…ƒæ•¸æ®
            if (!customStyles.metadata) {
                customStyles.metadata = {};
            }
            customStyles.metadata[customStyleId] = {
                title: trimmedTitle,
                type: type,
                desc: 'é»å‡»ç¼–è¾‘æ¥è‡ªå®šä¹‰èªå¥å…§å®¹'
            };
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å„²
            saveCustomStyles();
            
            // é‡æ–°æ¸²æŸ“é¢¨æ ¼é¸æ“‡åŒºåŸŸä»¥é¡¯ç¤ºæ–°å‰µå»ºçš„é¢¨æ ¼
            renderCustomStylesInGrid(type);
            
            // è‡ªå‹•æ‰“é–‹ç¼–è¾‘å™¨è®©ç”¨æˆ¶ç¼–è¾‘èªå¥
            setTimeout(() => {
                showStyleEditor(customStyleId, type, trimmedTitle);
            }, 100);
        }
        
        // æ¸²æŸ“è‡ªå®šä¹‰é¢¨æ ¼åˆ°å¯¹æ‡‰çš„ç¶²æ ¼ä¸­
        function renderCustomStylesInGrid(type) {
            const gridId = type === 'encourage' ? 'encourageStyleGrid' : 'reminderStyleGrid';
            const grid = document.getElementById(gridId);
            if (!grid) return;
            
            // ç§»é™¤èˆŠçš„è‡ªå®šä¹‰é¢¨æ ¼å¡ç‰‡ï¼ˆä¿ç•™é¢„è¨­é¢¨æ ¼å’Œ"è‡ªå®šä¹‰"æŒ‰é’®ï¼‰
            const customCards = grid.querySelectorAll('.style-option[data-style^="custom-"]:not([data-style="custom-encourage"]):not([data-style="custom-remind"])');
            customCards.forEach(card => card.remove());
            
            // è·å–å¯¹æ‡‰é¡å‹çš„è‡ªå®šä¹‰é¢¨æ ¼
            const customStylesOfType = Object.keys(customStyles.metadata || {})
                .filter(styleId => customStyles.metadata[styleId].type === type);
            
            // ç‚ºæ¯å€‹è‡ªå®šä¹‰é¢¨æ ¼å‰µå»ºå¡ç‰‡
            customStylesOfType.forEach(styleId => {
                const metadata = customStyles.metadata[styleId];
                const styleCard = createCustomStyleCard(styleId, metadata);
                
                // æ’å…¥åˆ°"è‡ªå®šä¹‰"æŒ‰é’®ä¹‹å‰
                const customButton = grid.querySelector('[data-style="custom-' + type + '"]');
                if (customButton) {
                    grid.insertBefore(styleCard, customButton);
                }
            });
        }
        
        // å‰µå»ºè‡ªå®šä¹‰é¢¨æ ¼å¡ç‰‡
        function createCustomStyleCard(styleId, metadata) {
            const styleCard = document.createElement('div');
            styleCard.className = 'style-option';
            styleCard.setAttribute('data-style', styleId);
            styleCard.onclick = (event) => handleStyleClick(event, styleId, metadata.type);
            
            styleCard.innerHTML = `
                <div class="style-title">${metadata.title}</div>
                <div class="style-desc">${metadata.desc}</div>
                <div class="style-selector-circle" onclick="event.stopPropagation(); handleStyleSelect(event, '${styleId}')"></div>
                <button class="custom-style-delete" onclick="event.stopPropagation(); deleteCustomStyle('${styleId}', '${metadata.type}')" title="åˆªé™¤æ­¤è‡ªå®šä¹‰é¢¨æ ¼">
                    <svg class="w-3 h-3 text-red-500" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                    </svg>
                </button>
            `;
            
            return styleCard;
        }
        
        // åˆªé™¤è‡ªå®šä¹‰é¢¨æ ¼
        function deleteCustomStyle(styleId, type) {
            if (confirm('ç¢ºå®šè¦åˆªé™¤é€™å€‹è‡ªå®šä¹‰é¢¨æ ¼å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢è¤‡ã€‚')) {
                // ä»å­˜å„²ä¸­åˆªé™¤
                if (customStyles.encourage && customStyles.encourage[styleId]) {
                    delete customStyles.encourage[styleId];
                }
                if (customStyles.remind && customStyles.remind[styleId]) {
                    delete customStyles.remind[styleId];
                }
                if (customStyles.metadata && customStyles.metadata[styleId]) {
                    delete customStyles.metadata[styleId];
                }
                
                // ä»å½“å‰ç¼–è¾‘çš„OCä¸­ç§»é™¤è¯¥é¢¨æ ¼
                const currentOC = ocData[editingOCIndex >= 0 ? editingOCIndex : currentOCIndex];
                if (currentOC) {
                    if (type === 'encourage' && currentOC.encourageStyles) {
                        currentOC.encourageStyles = currentOC.encourageStyles.filter(s => s !== styleId);
                    } else if (type === 'remind' && currentOC.reminderStyles) {
                        currentOC.reminderStyles = currentOC.reminderStyles.filter(s => s !== styleId);
                    }
                }
                
                // ä¿å­˜æ›´æ”¹
                saveCustomStyles();
                
                // é‡æ–°æ¸²æŸ“
                renderCustomStylesInGrid(type);
                
                // å¦‚æœå½“å‰æ­£åœ¨ç¼–è¾‘é€™å€‹é¢¨æ ¼ï¼Œé—œé–‰ç¼–è¾‘å™¨
                if (currentEditingStyle === styleId) {
                    closeStyleEditor();
                }
            }
        }
        
        function showStyleEditor(style, type, customTitle = '') {
            currentEditingStyle = style;
            currentEditingType = type;
            
            const modal = document.getElementById('styleEditorModal');
            const title = document.getElementById('styleEditorTitle');
            const desc = document.getElementById('styleEditorDesc');
            const textarea = document.getElementById('styleEditorTextarea');
            
            // è¨­ç½®æ ‡é¡Œ
            let styleTitle = customTitle || getStyleTitle(style);
            title.textContent = `ç¼–è¾‘${styleTitle}èªå¥`;
            
            // è¨­ç½®æè¿°
            if (type === 'encourage') {
                desc.textContent = 'æ¯è¡Œä¸€æ¢é¼“åŠ±èªå¥ï¼Œ{title} æœƒè¢«æ›¿æ›ç‚ºç”¨æˆ¶ç§°å‘¼';
            } else {
                desc.textContent = 'æ¯è¡Œä¸€æ¢ç£ä¿ƒèªå¥ï¼Œåˆ†ç‚ºä¸‰å€‹ç´šåˆ¥ï¼šæ­£å¸¸/çƒ¦æ¼/ç”Ÿæ°£';
            }
            
            // åŠ è½½å½“å‰èªå¥
            let messages = [];
            if (type === 'encourage') {
                if (style.startsWith('custom-') && customStyles.encourage[style]) {
                    messages = [...customStyles.encourage[style]];
                } else if (ocMessageLibrary.encourage[style]) {
                    // æ£€æŸ¥æ˜¯å¦æœ‰è‡ªå®šä¹‰ä¿®æ”¹çš„ç‰ˆæœ¬
                    const modifiedKey = `modified-${style}`;
                    if (customStyles.encourage[modifiedKey]) {
                        messages = [...customStyles.encourage[modifiedKey]];
                    } else {
                        messages = [...ocMessageLibrary.encourage[style]];
                    }
                }
            } else {
                if (style.startsWith('custom-') && customStyles.remind[style]) {
                    // è‡ªå®šä¹‰ç£ä¿ƒé¢¨æ ¼ï¼Œé¡¯ç¤ºæ‰€æœ‰ç´šåˆ¥
                    messages = [
                        '=== æ­£å¸¸æé†’ ===',
                        ...customStyles.remind[style].normal,
                        '',
                        '=== çƒ¦æ¼æé†’ ===',
                        ...customStyles.remind[style].annoyed,
                        '',
                        '=== ç”Ÿæ°£æé†’ ===',
                        ...customStyles.remind[style].angry
                    ];
                } else if (ocMessageLibrary.remind.normal[style]) {
                    // æ£€æŸ¥æ˜¯å¦æœ‰è‡ªå®šä¹‰ä¿®æ”¹çš„ç‰ˆæœ¬
                    const modifiedKey = `modified-${style}`;
                    if (customStyles.remind[modifiedKey]) {
                        messages = [
                            '=== æ­£å¸¸æé†’ ===',
                            ...customStyles.remind[modifiedKey].normal,
                            '',
                            '=== çƒ¦æ¼æé†’ ===',
                            ...customStyles.remind[modifiedKey].annoyed,
                            '',
                            '=== ç”Ÿæ°£æé†’ ===',
                            ...customStyles.remind[modifiedKey].angry
                        ];
                    } else {
                        // é¢„è¨­ç£ä¿ƒé¢¨æ ¼ï¼Œé¡¯ç¤ºæ‰€æœ‰ç´šåˆ¥
                        messages = [
                            '=== æ­£å¸¸æé†’ ===',
                            ...ocMessageLibrary.remind.normal[style],
                            '',
                            '=== çƒ¦æ¼æé†’ ===',
                            ...ocMessageLibrary.remind.annoyed[style],
                            '',
                            '=== ç”Ÿæ°£æé†’ ===',
                            ...ocMessageLibrary.remind.angry[style]
                        ];
                    }
                }
            }
            
            textarea.value = messages.join('\n');
            modal.classList.add('show');
        }
        
        function getStyleTitle(style) {
            // é¦–å…ˆæ£€æŸ¥æ˜¯å¦æ˜¯è‡ªå®šä¹‰é¢¨æ ¼
            if (customStyles.metadata && customStyles.metadata[style]) {
                return customStyles.metadata[style].title;
            }
            
            // é¢„è¨­é¢¨æ ¼æ ‡é¡Œ
            const styleTitles = {
                gentle: 'æ¸©æŸ”å®ˆè­·å‹',
                tsundere: 'å‚²å¨‡æ¯’èˆŒå‹',
                cheerful: 'é™½å…‰é–‹æœ—å‹',
                aloof: 'æ·¡æ¼ æ·±æ²‰å‹',
                mature: 'æˆç†ŸåŒ…å®¹å‹',
                cunning: 'è…¹é»‘å¿ƒæœºå‹',
                shy: 'çº¯æƒ…å®³ç¾å‹',
                doting: 'æ— è…¦æººæ„›å‹',
                guardian: 'å®ˆè­·è€…',
                pusher: 'é­ç­–è€…',
                cheerleader: 'æ‡‰æ´è€…',
                observer: 'è§‚å¯Ÿè€…',
                guide: 'å¼•å°è€…',
                strategist: 'å¸ƒå±€è€…',
                companion: 'é™ªä¼´è€…',
                believer: 'æººæ„›è€…'
            };
            
            return styleTitles[style] || 'è‡ªå®šä¹‰é¢¨æ ¼';
        }
        
        function closeStyleEditor() {
            document.getElementById('styleEditorModal').classList.remove('show');
        }
        
        function saveStyleMessages() {
            const textarea = document.getElementById('styleEditorTextarea');
            const messages = textarea.value.trim().split('\n').filter(line => line.trim());
            
            if (currentEditingType === 'encourage') {
                // ä¿å­˜é¼“åŠ±èªå¥
                if (currentEditingStyle.startsWith('custom-')) {
                    // è‡ªå®šä¹‰é¢¨æ ¼ç›´æ¥ä¿å­˜
                    customStyles.encourage[currentEditingStyle] = messages;
                } else {
                    // é¢„è¨­é¢¨æ ¼ä¿å­˜ç‚ºä¿®æ”¹ç‰ˆæœ¬
                    const modifiedKey = `modified-${currentEditingStyle}`;
                    customStyles.encourage[modifiedKey] = messages;
                }
            } else {
                // ä¿å­˜ç£ä¿ƒèªå¥
                const normalMessages = [];
                const annoyedMessages = [];
                const angryMessages = [];
                
                let currentLevel = 'normal';
                messages.forEach(line => {
                    if (line.includes('=== æ­£å¸¸æé†’ ===')) {
                        currentLevel = 'normal';
                    } else if (line.includes('=== çƒ¦æ¼æé†’ ===')) {
                        currentLevel = 'annoyed';
                    } else if (line.includes('=== ç”Ÿæ°£æé†’ ===')) {
                        currentLevel = 'angry';
                    } else if (line.trim()) {
                        if (currentLevel === 'normal') {
                            normalMessages.push(line);
                        } else if (currentLevel === 'annoyed') {
                            annoyedMessages.push(line);
                        } else {
                            angryMessages.push(line);
                        }
                    }
                });
                
                if (currentEditingStyle.startsWith('custom-')) {
                    // è‡ªå®šä¹‰é¢¨æ ¼ç›´æ¥ä¿å­˜
                    customStyles.remind[currentEditingStyle] = {
                        normal: normalMessages,
                        annoyed: annoyedMessages,
                        angry: angryMessages
                    };
                } else {
                    // é¢„è¨­é¢¨æ ¼ä¿å­˜ç‚ºä¿®æ”¹ç‰ˆæœ¬
                    const modifiedKey = `modified-${currentEditingStyle}`;
                    customStyles.remind[modifiedKey] = {
                        normal: normalMessages,
                        annoyed: annoyedMessages,
                        angry: angryMessages
                    };
                }
            }
            
            saveCustomStyles();
            closeStyleEditor();
            alert('èªå¥å·²ä¿å­˜ï¼ä¿®æ”¹å°†åœ¨å°ˆæ³¨é é¢ç”Ÿæ•ˆã€‚');
        }
        
        function saveCustomStyles() {
            localStorage.setItem('customStyles', JSON.stringify(customStyles));
        }
        
        function loadCustomStyles() {
            const saved = localStorage.getItem('customStyles');
            if (saved) {
                try {
                    const loaded = JSON.parse(saved);
                    customStyles = {
                        encourage: loaded.encourage || {},
                        remind: loaded.remind || {},
                        metadata: loaded.metadata || {}
                    };
                } catch (e) {
                    console.log('Failed to parse custom styles');
                }
            }
        }

        // çµ±è¨ˆæ•¸æ®ç®¡ç†
        function loadDailyStats() {
            const today = getCurrentDateString();
            const savedStats = localStorage.getItem('dailyStats_' + today);
            
            if (savedStats) {
                try {
                    dailyStats = JSON.parse(savedStats);
                } catch (e) {
                    console.log('Failed to parse daily stats');
                    dailyStats = {
                        date: today,
                        gifts: [],
                        focusTime: 0,
                        completedTasks: 0
                    };
                }
            } else {
                dailyStats = {
                    date: today,
                    gifts: [],
                    focusTime: 0,
                    completedTasks: 0
                };
            }
            
            updateStatsDisplay();
        }
        
        function saveDailyStats() {
            localStorage.setItem('dailyStats_' + dailyStats.date, JSON.stringify(dailyStats));
        }
        
        function updateStatsDisplay() {
            document.getElementById('todayGifts').textContent = dailyStats.gifts.length;
            document.getElementById('focusTime').textContent = formatTime(dailyStats.focusTime);
            document.getElementById('todayCompleted').textContent = dailyStats.completedTasks;
        }
        
        function addGift(giftText, senderOCIndex) {
            const now = new Date();
            const senderOC = ocData[senderOCIndex] || ocData[0];
            const gift = {
                text: giftText,
                time: now.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' }),
                timestamp: now.getTime(),
                senderName: senderOC.name,
                senderIndex: senderOCIndex
            };
            
            dailyStats.gifts.push(gift);
            saveDailyStats();
            updateStatsDisplay();
        }
        
        function addFocusTime(seconds) {
            dailyStats.focusTime += seconds;
            saveDailyStats();
            updateStatsDisplay();
        }
        
        function incrementCompletedTasks() {
            dailyStats.completedTasks++;
            saveDailyStats();
            updateStatsDisplay();
        }
        
        // ç¦®ç‰©å¼¹çª—
        function showGiftModal() {
            const modal = document.getElementById('giftModal');
            const giftList = document.getElementById('giftList');
            
            if (dailyStats.gifts.length === 0) {
                giftList.innerHTML = `
                    <div class="text-center text-slate-500 py-8">
                        <div class="text-4xl mb-2">ğŸ</div>
                        <p>ä»Šå¤©é‚„æ²¡æœ‰æ”¶åˆ°ç¦®ç‰©å‘¢ï½<br>å®Œæˆç•ªèŒ„é˜å°±èƒ½è·å¾—å¤¢è§’çš„ç¦®ç‰©å¥–åŠ±ï¼</p>
                    </div>
                `;
            } else {
                giftList.innerHTML = dailyStats.gifts.map(gift => `
                    <div class="gift-item">
                        <div class="flex-1">
                            <div class="text-sm text-slate-700 mb-1">${gift.text}</div>
                            <div class="gift-sender">æ¥è‡ª ${gift.senderName}</div>
                        </div>
                        <div class="gift-time">${gift.time}</div>
                    </div>
                `).join('');
            }
            
            modal.classList.add('show');
        }
        
        function closeGiftModal() {
            document.getElementById('giftModal').classList.remove('show');
        }
        
        // å·²å®Œæˆä»»å‹™å¼¹çª—
        function showCompletedTasksModal() {
            const modal = document.getElementById('completedTasksModal');
            const completedTasksList = document.getElementById('completedTasksList');
            
            const completedTasks = tasks.filter(task => task.status === 'completed');
            
            if (completedTasks.length === 0) {
                completedTasksList.innerHTML = `
                    <div class="text-center text-slate-500 py-8">
                        <div class="text-4xl mb-2">ğŸ“</div>
                        <p>ä»Šå¤©é‚„æ²¡æœ‰å®Œæˆä»»ä½•ä»»å‹™å‘¢ï½<br>å¿«å»å®Œæˆä¸€äº›ä»»å‹™å§ï¼</p>
                    </div>
                `;
            } else {
                completedTasksList.innerHTML = completedTasks.map(task => `
                    <div class="completed-task-item">
                        <div class="w-5 h-5 bg-slate-400 rounded-full flex items-center justify-center flex-shrink-0">
                            <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                            </svg>
                        </div>
                        <div class="completed-task-title">${task.title}</div>
                        <button class="undo-btn" onclick="undoTaskCompletion(${task.id})">æ’¤é”€</button>
                    </div>
                `).join('');
            }
            
            modal.classList.add('show');
        }
        
        function closeCompletedTasksModal() {
            document.getElementById('completedTasksModal').classList.remove('show');
        }
        
        function undoTaskCompletion(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (task) {
                task.status = 'pending';
                if (dailyStats.completedTasks > 0) {
                    dailyStats.completedTasks--;
                    saveDailyStats();
                    updateStatsDisplay();
                }
                saveTasks();
                renderTasks();
                showCompletedTasksModal();
            }
        }

        // ä»»å‹™ç®¡ç†å‡½æ•¸
        function renderTasks() {
            const taskList = document.getElementById('taskList');
            if (!taskList) return;
            
            const uncompletedTasks = tasks.filter(task => task.status !== 'completed');
            
            taskList.innerHTML = '';
            
            uncompletedTasks.forEach((task, index) => {
                const taskItem = document.createElement('div');
                const displayStatus = 'in-progress';
                taskItem.className = `task-item ${displayStatus}`;
                taskItem.dataset.taskId = task.id;
                
                taskItem.innerHTML = `
                    <div class="flex items-center">
                        <div class="task-checkbox ${displayStatus}" onclick="toggleTaskStatus(${task.id})">
                        </div>
                        <div class="task-title">${task.title}</div>
                        <div class="task-actions">
                            <div class="task-action-btn task-edit-btn" onclick="event.stopPropagation(); editTask(${task.id})">
                                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                                </svg>
                            </div>
                            <div class="task-action-btn task-delete-btn" onclick="event.stopPropagation(); deleteTask(${task.id})">
                                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                `;
                
                taskList.appendChild(taskItem);
            });
            
            updateTaskProgress();
            updateTaskSelector();
        }
        
        function editTask(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (!task) return;
            
            const newTitle = prompt('ç¼–è¾‘ä»»å‹™å…§å®¹ï¼š', task.title);
            if (newTitle && newTitle.trim() && newTitle.trim() !== task.title) {
                task.title = newTitle.trim();
                saveTasks();
                renderTasks();
            }
        }
        
        function deleteTask(taskId) {
            tasks = tasks.filter(t => t.id !== taskId);
            saveTasks();
            renderTasks();
        }
        
        function updateTaskSelector() {
            const taskSelector = document.getElementById('taskSelector');
            if (!taskSelector) return;
            
            taskSelector.innerHTML = '';
            
            const uncompletedTasks = tasks.filter(task => task.status !== 'completed');
            
            uncompletedTasks.forEach(task => {
                const taskOption = document.createElement('div');
                taskOption.className = 'task-option';
                const displayStatus = 'in-progress';
                taskOption.onclick = () => selectTask(task.title, getTaskStatusText(displayStatus), getTaskStatusColor(displayStatus));
                
                taskOption.innerHTML = `
                    <div class="flex items-center justify-between w-full">
                        <span>${task.title}</span>
                        <div class="w-4 h-4 border-2 border-blue-400 rounded-full flex items-center justify-center">
                        </div>
                    </div>
                `;
                
                taskSelector.appendChild(taskOption);
            });
        }
        
        function getTaskStatusText(status) {
            switch(status) {
                case 'completed': return 'å·²å®Œæˆ';
                case 'in-progress': return 'è¿›è¡Œä¸­';
                case 'pending': return 'å¾…é–‹å§‹';
                default: return 'è¿›è¡Œä¸­';
            }
        }
        
        function getTaskStatusColor(status) {
            switch(status) {
                case 'completed': return 'slate';
                case 'in-progress': return 'blue';
                case 'pending': return 'blue';
                default: return 'blue';
            }
        }
        
        function addNewTask() {
            const taskList = document.getElementById('taskList');
            
            const inputContainer = document.createElement('div');
            inputContainer.className = 'mb-2';
            
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'add-task-input';
            input.placeholder = 'è¾“å…¥æ–°ä»»å‹™å…§å®¹...';
            input.autofocus = true;
            
            const handleAddTask = () => {
                const title = input.value.trim();
                if (title) {
                    const newTask = {
                        id: Date.now(),
                        title: title,
                        status: 'pending'
                    };
                    tasks.push(newTask);
                    saveTasks();
                    renderTasks();
                } else {
                    inputContainer.remove();
                }
            };
            
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    handleAddTask();
                }
            });
            
            input.addEventListener('blur', handleAddTask);
            
            inputContainer.appendChild(input);
            taskList.insertBefore(inputContainer, taskList.firstChild);
        }
        
        function toggleTaskStatus(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (!task) return;
            
            const wasCompleted = task.status === 'completed';
            
            if (task.status === 'completed') {
                task.status = 'pending';
            } else {
                task.status = 'completed';
                if (!wasCompleted) {
                    incrementCompletedTasks();
                }
            }
            
            saveTasks();
            renderTasks();
        }
        
        function updateTaskProgress() {
            const completed = tasks.filter(t => t.status === 'completed').length;
            const uncompleted = tasks.filter(t => t.status !== 'completed').length;
            const progressElement = document.getElementById('taskProgress');
            if (progressElement) {
                progressElement.textContent = `${completed}/${completed + uncompleted} å®Œæˆ`;
            }
        }
        
        function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }
        
        function loadTasks() {
            const savedTasks = localStorage.getItem('tasks');
            if (savedTasks) {
                try {
                    tasks = JSON.parse(savedTasks);
                } catch (e) {
                    console.log('Failed to parse saved tasks');
                }
            }
        }

        // é é¢åˆ‡æ›å‡½æ•¸
        function showPage(pageId) {
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                if (page.id === pageId) {
                    page.classList.remove('hidden');
                    page.classList.add('show');
                } else {
                    page.classList.add('hidden');
                    page.classList.remove('show');
                }
            });
            currentPage = pageId.replace('Page', '');
            
            if (pageId === 'homePage') {
                setTimeout(renderTasks, 100);
            }
        }

        function goToFocus() {
    showPage('focusPage');
    isStatusSelected = false;
    currentStatus = { name: '', icon: 'âšª' };
    resetOCInteraction();
    
    setTimeout(() => {
        // ä½¿ç”¨å„ªåŒ–çš„ç‹€æ…‹æ–‡å­—è¨­ç½®
        const statusButton = document.getElementById('statusButton');
        statusButton.innerHTML = '<span class="oc-status-pure-text">ç‹€æ…‹å¾…é¸æ“‡</span> <span class="oc-status-emoji">âšª</span>';
        
        const startBtnHint = document.getElementById('startBtnHint');
        startBtnHint.classList.add('hidden');
        
        stopHeartbeatAnimation();
        document.querySelectorAll('.status-option').forEach(option => {
            option.classList.remove('active');
        });
        
        // åˆå§‹åŒ–è‡ªå®šä¹‰ç‹€æ…‹åˆ°å°ˆæ³¨é 
        initCustomStatusInFocusPage();
    }, 100);
}



        function goToOCCards() {
            showPage('ocCardsPage');
            renderOCCards();
        }

        function goBackToHome() {
            showPage('homePage');
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
                isTimerRunning = false;
                isPaused = false;
                
                if (focusStartTime) {
                    const focusedSeconds = Math.floor((Date.now() - focusStartTime) / 1000);
                    addFocusTime(focusedSeconds);
                    focusStartTime = null;
                }
                
                resetToSingleButton();
                enableModeSwitch();
                stopHeartbeatAnimation();
                stopEncourageLoop();
            }
            
            document.getElementById('statusSelector').classList.remove('show');
            document.getElementById('timeSelector').classList.remove('show');
            document.getElementById('taskSelector').classList.remove('show');
            
            // é‡ç½®ç‹€æ…‹
            isStatusSelected = false;
            currentStatus = { name: '', icon: 'âšª' };
            const statusButton = document.getElementById('statusButton');
            statusButton.innerHTML = '<span class="oc-status-pure-text">ç‹€æ…‹å¾…é¸æ“‡</span> <span class="oc-status-emoji">âšª</span>';
            
            const startBtnHint = document.getElementById('startBtnHint');
            if (startBtnHint) {
                startBtnHint.classList.add('hidden');
            }
            
            resetOCInteraction();
        }

        function goBackHome() {
            goBackToHome();
        }

        function goBackToOCCards() {
            showPage('ocCardsPage');
        }

        // OCå¡ç‰‡ç›¸é—œå‡½æ•¸
        function renderOCCards() {
            const grid = document.getElementById('ocCardsGrid');
            const createCard = grid.querySelector('.create-card');
            grid.innerHTML = '';
            grid.appendChild(createCard);
            
            ocData.forEach((oc, index) => {
                const card = document.createElement('div');
                card.className = 'oc-card';
                card.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <img src="${oc.avatar}" alt="${oc.name}" class="oc-card-avatar" onclick="editOC(${index})">
                        <div class="flex-1" onclick="editOC(${index})">
                            <h3 class="font-semibold text-slate-800 mb-1">${oc.name}</h3>
                            <p class="text-xs text-slate-500">ä½ çš„å­¸ç¿’æ­å­</p>
                        </div>
                        <div class="w-6 h-6 rounded-full border-2 flex items-center justify-center cursor-pointer transition-all ${
                            oc.selected ? 'border-purple-500 bg-purple-500' : 'border-slate-300'
                        }" onclick="selectOC(${index})">
                            ${oc.selected ? '<svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>' : ''}
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function selectOC(index) {
            ocData.forEach((oc, i) => {
                oc.selected = i === index;
            });
            
            currentOCIndex = index;
            updateCurrentOC(index);
            renderOCCards();
            
            localStorage.setItem('ocData', JSON.stringify(ocData));
            localStorage.setItem('currentOCIndex', index.toString());
        }

        function createNewOC() {
            editingOCIndex = -1;
            const newOC = {
                id: Date.now(),
                name: 'æ–°å¤¢è§’',
                avatar: 'https://images.unsplash.com/photo-1494790108755-2616c359140b?w=200&h=200&fit=crop&crop=face',
                userTitle: 'å¤§å°å§',
                customGreeting: '',
                encourageStyles: ['gentle'],
                reminderStyles: ['guardian'],
                customGifts: '',
                selected: false
            };
            
            document.getElementById('ocNameInput').value = newOC.name;
            document.getElementById('userTitleInput').value = newOC.userTitle;
            document.getElementById('customGreeting').value = newOC.customGreeting;
            document.getElementById('customGiftsInput').value = newOC.customGifts;
            document.getElementById('avatarPreview').src = newOC.avatar;
            
            // é‡ç½®é¢¨æ ¼é¸æ“‡
            resetStyleSelections();
            selectStyleOptions('encourageStyleGrid', newOC.encourageStyles);
            selectStyleOptions('reminderStyleGrid', newOC.reminderStyles);
            
            showPage('ocSettingPage');
            
            // æ¸²æŸ“è‡ªå®šä¹‰é¢¨æ ¼å’Œç‹€æ…‹ç¦®ç‰©
            setTimeout(() => {
    renderCustomStylesInGrid('encourage');
    renderCustomStylesInGrid('remind');
    loadStatusGiftsFromStorage();
    // åªéœ€è¦è°ƒç”¨ä¸€æ¬¡åˆå§‹åŒ–ï¼Œå…§éƒ¨æœƒè™•ç†äº‹ä»¶ç¶å®š
    initializeStatusGiftPreviews();
}, 150);
        }

        function editOC(index) {
            editingOCIndex = index;
            const oc = ocData[index];
            
            document.getElementById('ocNameInput').value = oc.name;
            document.getElementById('userTitleInput').value = oc.userTitle;
            document.getElementById('customGreeting').value = oc.customGreeting || '';
            document.getElementById('customGiftsInput').value = oc.customGifts || '';
            document.getElementById('avatarPreview').src = oc.avatar;
            
            // è¨­ç½®é¢¨æ ¼é¸æ“‡
            resetStyleSelections();
            selectStyleOptions('encourageStyleGrid', oc.encourageStyles || ['gentle']);
            selectStyleOptions('reminderStyleGrid', oc.reminderStyles || ['guardian']);
            
            showPage('ocSettingPage');
            
            // æ¸²æŸ“è‡ªå®šä¹‰é¢¨æ ¼å’Œç‹€æ…‹ç¦®ç‰©
            setTimeout(() => {
    renderCustomStylesInGrid('encourage');
    renderCustomStylesInGrid('remind');
    loadStatusGiftsFromStorage();
    // åªéœ€è¦è°ƒç”¨ä¸€æ¬¡åˆå§‹åŒ–ï¼Œå…§éƒ¨æœƒè™•ç†äº‹ä»¶ç¶å®š
    initializeStatusGiftPreviews();
}, 150);
        }

        function resetStyleSelections() {
            document.querySelectorAll('.style-option').forEach(option => {
                option.classList.remove('selected');
            });
        }

        function selectStyleOptions(gridId, styles) {
            const grid = document.getElementById(gridId);
            if (!grid) return;
            
            styles.forEach(style => {
                const option = grid.querySelector(`[data-style="${style}"]`);
                if (option) {
                    option.classList.add('selected');
                }
            });
        }

        function getSelectedStyles(gridId) {
            const grid = document.getElementById(gridId);
            if (!grid) return [];
            
            const selectedOptions = grid.querySelectorAll('.style-option.selected');
            return Array.from(selectedOptions).map(option => option.dataset.style);
        }

        function uploadAvatar() {
            document.getElementById('avatarInput').click();
        }

        function previewAvatar(event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('avatarPreview').src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        }

        function saveOCSettings() {
            const ocSettings = {
                name: document.getElementById('ocNameInput').value.trim(),
                avatar: document.getElementById('avatarPreview').src,
                userTitle: document.getElementById('userTitleInput').value.trim(),
                customGreeting: document.getElementById('customGreeting').value.trim(),
                encourageStyles: getSelectedStyles('encourageStyleGrid'),
                reminderStyles: getSelectedStyles('reminderStyleGrid'),
                customGifts: document.getElementById('customGiftsInput').value.trim()
            };

            if (!ocSettings.name) {
                alert('è¯·è¾“å…¥å¤¢è§’åå­—');
                return;
            }

            if (ocSettings.encourageStyles.length === 0) {
                alert('è¯·è‡³å°‘é¸æ“‡ä¸€ç§é¼“åŠ±é¢¨æ ¼');
                return;
            }

            if (ocSettings.reminderStyles.length === 0) {
                alert('è¯·è‡³å°‘é¸æ“‡ä¸€ç§ç£ä¿ƒé¢¨æ ¼');
                return;
            }

            if (editingOCIndex === -1) {
                ocSettings.id = Date.now();
                ocSettings.selected = false;
                ocData.push(ocSettings);
            } else {
                ocData[editingOCIndex] = { ...ocData[editingOCIndex], ...ocSettings };
            }

            localStorage.setItem('ocData', JSON.stringify(ocData));
            
            if (editingOCIndex === currentOCIndex || editingOCIndex === -1) {
                updateCurrentOC(editingOCIndex === -1 ? ocData.length - 1 : editingOCIndex);
            }

            const saveBtn = event.currentTarget;
            const originalContent = saveBtn.innerHTML;
            saveBtn.innerHTML = '<span class="text-green-500">å·²ä¿å­˜ âœ“</span>';
            setTimeout(() => {
                saveBtn.innerHTML = originalContent;
                goBackToOCCards();
            }, 1000);
        }

        function deleteOC() {
            if (editingOCIndex === -1) return;
            
            if (ocData.length <= 1) {
                alert('è‡³å°‘éœ€è¦ä¿ç•™ä¸€å€‹å¤¢è§’');
                return;
            }
            
            if (confirm('ç¢ºå®šè¦åˆªé™¤é€™å€‹å¤¢è§’å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢è¤‡ã€‚')) {
                ocData.splice(editingOCIndex, 1);
                
                if (editingOCIndex === currentOCIndex) {
                    ocData[0].selected = true;
                    updateCurrentOC(0);
                } else if (editingOCIndex < currentOCIndex) {
                    currentOCIndex--;
                }
                
                localStorage.setItem('ocData', JSON.stringify(ocData));
                
                goBackToOCCards();
            }
        }

        function updateCurrentOC(index) {
            currentOCIndex = index;
            const oc = ocData[index];
            
            document.getElementById('currentOCAvatar').src = oc.avatar;
            document.getElementById('currentOCName').textContent = oc.name;
            
            let greeting;
            if (oc.customGreeting && oc.customGreeting.trim()) {
                greeting = oc.customGreeting;
            } else {
                const hour = new Date().getHours();
                const title = oc.userTitle || 'å¤§å°å§';
                if (hour < 12) {
                    greeting = `æ—©å®‰ï¼Œ${title}ï¼`;
                } else if (hour < 18) {
                    greeting = `ä¸‹åˆå¥½ï¼Œ${title}ï¼`;
                } else {
                    greeting = `æ™šä¸Šå¥½ï¼Œ${title}ï¼`;
                }
            }
            document.getElementById('currentOCGreeting').textContent = greeting;
            
            if (document.getElementById('focusOCAvatar')) {
                document.getElementById('focusOCAvatar').src = oc.avatar;
            }
            
            if (document.getElementById('ocMessageText') && currentPage === 'focus') {
                const ocMessageElement = document.getElementById('ocMessageText');
                if (ocMessageElement.textContent.includes('å¿«é–‹å§‹å­¸ç¿’å§') || currentMessageType === 'initial') {
                    ocMessageElement.innerHTML = `<span class="oc-message-text-wrapper">${getInitialMessage()}</span>`;
                }
            }
            
            localStorage.setItem('currentOCIndex', index.toString());
        }

        // è¨ˆæ™‚å™¨ç›¸é—œå‡½æ•¸
        function updateTimerDisplay() {
            const minutes = Math.floor(currentTime / 60);
            const seconds = currentTime % 60;
            const display = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timerDisplay').textContent = display;
        }

        function switchMode(mode) {
            if (isTimerRunning) return;
            
            currentMode = mode;
            const pomodoroBtn = document.getElementById('pomodoroBtn');
            const timerBtn = document.getElementById('timerBtn');
            
            if (mode === 'pomodoro') {
                pomodoroBtn.classList.add('mode-active');
                pomodoroBtn.classList.remove('text-slate-600');
                timerBtn.classList.remove('mode-active');
                timerBtn.classList.add('text-slate-600');
                currentTime = selectedMinutes * 60;
                updateTimerDisplay();
            } else {
                timerBtn.classList.add('mode-active');
                timerBtn.classList.remove('text-slate-600');
                pomodoroBtn.classList.remove('mode-active');
                pomodoroBtn.classList.add('text-slate-600');
                currentTime = 0;
                updateTimerDisplay();
            }
        }

        function toggleTimeSelector() {
            if (isTimerRunning) return;
            
            const selector = document.getElementById('timeSelector');
            const isVisible = selector.classList.contains('show');
            
            if (isVisible) {
                selector.classList.remove('show');
            } else {
                selector.classList.add('show');
                document.getElementById('statusSelector').classList.remove('show');
                document.getElementById('taskSelector').classList.remove('show');
            }
        }

        function selectTime(minutes) {
            if (isTimerRunning) return;
            
            selectedMinutes = minutes;
            currentTime = minutes * 60;
            updateTimerDisplay();
            
            document.querySelectorAll('.time-option').forEach(option => {
                option.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            document.getElementById('timeSelector').classList.remove('show');
        }

        function handleCustomTimeEnter(event) {
            if (event.key === 'Enter') {
                selectCustomTime();
            }
        }

        function selectCustomTime() {
            if (isTimerRunning) return;
            
            const customInput = document.getElementById('customTimeInput');
            const customValue = parseInt(customInput.value);
            
            if (isNaN(customValue) || customValue < 1 || customValue > 120) {
                alert('è¯·è¾“å…¥1-120ä¹‹é–“çš„æ•¸å€¼');
                customInput.focus();
                return;
            }
            
            selectedMinutes = customValue;
            currentTime = customValue * 60;
            updateTimerDisplay();
            
            document.querySelectorAll('.time-option').forEach(option => {
                option.classList.remove('active');
            });
            
            document.getElementById('timeSelector').classList.remove('show');
        }

        function showTaskSelector() {
            const selector = document.getElementById('taskSelector');
            const isVisible = selector.classList.contains('show');
            
            if (isVisible) {
                selector.classList.remove('show');
            } else {
                selector.classList.add('show');
                document.getElementById('statusSelector').classList.remove('show');
                document.getElementById('timeSelector').classList.remove('show');
            }
        }

        function selectTask(name, status, color) {
            currentTask = { name, status, color };
            
            document.getElementById('currentTaskName').textContent = name;
            const statusElement = document.getElementById('currentTaskStatus');
            statusElement.textContent = status;
            
            statusElement.className = 'text-xs px-2 py-1 rounded-full';
            if (color === 'slate') {
                statusElement.classList.add('text-slate-500', 'bg-slate-100');
            } else {
                statusElement.classList.add('text-blue-500', 'bg-blue-100');
            }
            
            document.querySelectorAll('.task-option').forEach(option => {
                option.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            document.getElementById('taskSelector').classList.remove('show');
        }

        function toggleStatusSelector() {
            const selector = document.getElementById('statusSelector');
            const isVisible = selector.classList.contains('show');
            
            if (isVisible) {
                selector.classList.remove('show');
            } else {
                selector.classList.add('show');
                document.getElementById('timeSelector').classList.remove('show');
                document.getElementById('taskSelector').classList.remove('show');
            }
        }

        function selectStatus(name, icon) {
            currentStatus = { name, icon };
            isStatusSelected = true;
            
            const startBtnHint = document.getElementById('startBtnHint');
            startBtnHint.classList.add('hidden');
            
            const currentOC = ocData[currentOCIndex];
            const ocName = currentOC.name;
            
            let statusText;
            if (name === 'å­¸ç¿’' || name === 'å·¥ä½œ') {
                statusText = `${ocName}å°ˆæ³¨${name}ä¸­`;
            } else {
                statusText = `${ocName}${name}ä¸­`;
            }
            
            // ä½¿ç”¨å„ªåŒ–çš„ç‹€æ…‹æ–‡å­—è¨­ç½®
            const statusButton = document.getElementById('statusButton');
            statusButton.innerHTML = `<span class="oc-status-pure-text">${statusText}</span> <span class="oc-status-emoji">${icon}</span>`;
            
            document.querySelectorAll('.status-option').forEach(option => {
                option.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            document.getElementById('statusSelector').classList.remove('show');
            
            if (!isTimerRunning && !isIgnoring) {
                showOCMessage(getInitialMessage(), 'initial', true);
            }
        }
        
        function showCustomStatusInput() {
            const customInput = document.getElementById('customStatusInput');
            const statusGrid = document.querySelector('.status-grid');
            
            statusGrid.style.display = 'none';
            customInput.classList.remove('hidden');
            
            document.getElementById('customStatusText').focus();
        }
        
        function handleCustomStatusEnter(event) {
            if (event.key === 'Enter') {
                confirmCustomStatus();
            }
        }
        
        function confirmCustomStatus() {
            const customText = document.getElementById('customStatusText').value.trim();
            if (!customText) {
                alert('è¯·è¾“å…¥ç‹€æ…‹å…§å®¹');
                return;
            }
            
            if (customText.length > 10) {
                alert('ç‹€æ…‹å…§å®¹ä¸èƒ½è¶…è¿‡10å€‹å­—ç¬¦');
                return;
            }
            
            selectCustomStatus(customText, 'âœ¨');
            hideCustomStatusInput();
        }
        
        function cancelCustomStatus() {
            hideCustomStatusInput();
        }
        
        function hideCustomStatusInput() {
            const customInput = document.getElementById('customStatusInput');
            const statusGrid = document.querySelector('.status-grid');
            
            statusGrid.style.display = 'grid';
            customInput.classList.add('hidden');
            
            document.getElementById('customStatusText').value = '';
        }
        
        function selectCustomStatus(name, icon) {
            currentStatus = { name, icon };
            isStatusSelected = true;
            
            const startBtnHint = document.getElementById('startBtnHint');
            startBtnHint.classList.add('hidden');
            
            const currentOC = ocData[currentOCIndex];
            const ocName = currentOC.name;
            const statusText = `${ocName}${name}ä¸­`;
            
            // ä½¿ç”¨å„ªåŒ–çš„ç‹€æ…‹æ–‡å­—è¨­ç½®
            const statusButton = document.getElementById('statusButton');
            statusButton.innerHTML = `<span class="oc-status-pure-text">${statusText}</span> <span class="oc-status-emoji">${icon}</span>`;
            
            document.getElementById('statusSelector').classList.remove('show');
            
            if (!isTimerRunning && !isIgnoring) {
                showOCMessage(getInitialMessage(), 'initial', true);
            }
        }

        function startStopTimer() {
            // å°è©¦å•Ÿå‹•èƒŒæ™¯éŸ³æ¨‚ï¼ˆè§£å†³æµè¦½å™¨è‡ªå‹•æ’­æ”¾é™åˆ¶ï¼‰
    if (currentMusicMode > 0 && !currentBackgroundMusic && isStatusSelected) {
        const musicType = currentMusicMode === 1 ? 'music' : 'rain';
        playBackgroundMusic(musicType);
    }
            if (!isStatusSelected) {
                const startBtnHint = document.getElementById('startBtnHint');
                startBtnHint.classList.remove('hidden');
                
                const startBtn = document.getElementById('startBtn');
                startBtn.classList.add('vibration');
                setTimeout(() => {
                    startBtn.classList.remove('vibration');
                }, 500);
                
                return;
            }
            
            if (!isTimerRunning) {
                isTimerRunning = true;
                isPaused = false;
                focusStartTime = Date.now();
                focusStartOCIndex = currentOCIndex;
                startHeartbeatAnimation();
                startEncourageLoop();
                
                document.getElementById('singleButtonLayout').classList.add('hidden');
                document.getElementById('threeButtonLayout').classList.remove('hidden');
                
                document.getElementById('pomodoroBtn').style.pointerEvents = 'none';
                document.getElementById('timerBtn').style.pointerEvents = 'none';
                document.getElementById('pomodoroBtn').style.opacity = '0.6';
                document.getElementById('timerBtn').style.opacity = '0.6';
                
                timerInterval = setInterval(() => {
                    if (currentMode === 'pomodoro') {
                        currentTime--;
                        if (currentTime <= 0) {
                            clearInterval(timerInterval);
                            isTimerRunning = false;
                            isPaused = false;
                            
                            if (focusStartTime) {
                                const focusedSeconds = selectedMinutes * 60;
                                addFocusTime(focusedSeconds);
                                focusStartTime = null;
                            }
                            
                            showPomodoroComplete();
                            enableModeSwitch();
                            resetToSingleButton();
                            stopHeartbeatAnimation();
                            stopEncourageLoop();
                            return;
                        }
                    } else {
                        currentTime++;
                    }
                    updateTimerDisplay();
                }, 1000);
            }
        }

        function pauseResumeTimer() {
    if (isTimerRunning) {
        clearInterval(timerInterval);
        isTimerRunning = false;
        isPaused = true;
        stopHeartbeatAnimation();
        stopEncourageLoop();
        // ä¿®æ”¹ï¼šæš‚åœèƒŒæ™¯éŸ³æ¨‚ä½†ä¿ç•™è¿›åº¦
        pauseBackgroundMusic();
        
        if (focusStartTime) {
            const focusedSeconds = Math.floor((Date.now() - focusStartTime) / 1000);
            addFocusTime(focusedSeconds);
            focusStartTime = null;
        }
        
        showRestMessage();
        
        document.getElementById('pauseBtn').innerHTML = `
            <svg class="w-8 h-8" fill="white" viewBox="0 0 24 24">
                <path d="M8 5v14l11-7z"/>
            </svg>
        `;
        enableModeSwitch();
    } else if (isPaused) {
        isTimerRunning = true;
        isPaused = false;
        focusStartTime = Date.now();
        startHeartbeatAnimation();
        startEncourageLoop();
        // æ–°å¢ï¼šæ¢è¤‡èƒŒæ™¯éŸ³æ¨‚æ’­æ”¾
        resumeBackgroundMusic();
        
        document.getElementById('pauseBtn').innerHTML = `
            <svg class="w-8 h-8" fill="white" viewBox="0 0 24 24">
                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
            </svg>
        `;
        
        document.getElementById('pomodoroBtn').style.pointerEvents = 'none';
        document.getElementById('timerBtn').style.pointerEvents = 'none';
        document.getElementById('pomodoroBtn').style.opacity = '0.6';
        document.getElementById('timerBtn').style.opacity = '0.6';
        
        timerInterval = setInterval(() => {
            if (currentMode === 'pomodoro') {
                currentTime--;
                if (currentTime <= 0) {
                    clearInterval(timerInterval);
                    isTimerRunning = false;
                    isPaused = false;
                    
                    if (focusStartTime) {
                        const focusedSeconds = Math.floor((Date.now() - focusStartTime) / 1000);
                        addFocusTime(focusedSeconds);
                        focusStartTime = null;
                    }
                    
                    showPomodoroComplete();
                    enableModeSwitch();
                    resetToSingleButton();
                    stopHeartbeatAnimation();
                    stopEncourageLoop();
                    return;
                }
            } else {
                currentTime++;
            }
            updateTimerDisplay();
        }, 1000);
    }
}

function stopTimer() {
    if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
        
        if (focusStartTime) {
            const focusedSeconds = Math.floor((Date.now() - focusStartTime) / 1000);
            addFocusTime(focusedSeconds);
            focusStartTime = null;
        }
    }
    isTimerRunning = false;
    isPaused = false;
    
    stopHeartbeatAnimation();
    stopEncourageLoop();
    // ä¿®æ”¹ï¼šåœæ­¢éŸ³æ¨‚å¹¶é‡ç½®è¿›åº¦
    stopBackgroundMusic();
    
    if (currentMode === 'pomodoro') {
        currentTime = selectedMinutes * 60;
    } else {
        currentTime = 0;
    }
    updateTimerDisplay();
    
    resetToSingleButton();
    enableModeSwitch();
    
    if (!isIgnoring) {
        showOCMessage(getInitialMessage(), 'initial', true);
    }
}

        function resetToSingleButton() {
            document.getElementById('threeButtonLayout').classList.add('hidden');
            document.getElementById('singleButtonLayout').classList.remove('hidden');
            
            const startBtnHint = document.getElementById('startBtnHint');
            if (!isStatusSelected) {
                startBtnHint.classList.remove('hidden');
            } else {
                startBtnHint.classList.add('hidden');
            }
            
            document.getElementById('pauseBtn').innerHTML = `
                <svg class="w-8 h-8" fill="white" viewBox="0 0 24 24">
                    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                </svg>
            `;
        }

        function startHeartbeatAnimation() {
            const leftPath = document.querySelector('.heartbeat-path-left');
            const rightPath = document.querySelector('.heartbeat-path-right');
            
            if (leftPath) leftPath.classList.remove('static');
            if (rightPath) rightPath.classList.remove('static');
        }

        function stopHeartbeatAnimation() {
            const leftPath = document.querySelector('.heartbeat-path-left');
            const rightPath = document.querySelector('.heartbeat-path-right');
            
            if (leftPath) leftPath.classList.add('static');
            if (rightPath) rightPath.classList.add('static');
        }

        function enableModeSwitch() {
            document.getElementById('pomodoroBtn').style.pointerEvents = 'auto';
            document.getElementById('timerBtn').style.pointerEvents = 'auto';
            document.getElementById('pomodoroBtn').style.opacity = '1';
            document.getElementById('timerBtn').style.opacity = '1';
        }

// éŸ³é¢‘ç®¡ç†å‡½æ•¸
function initAudio() {
    // é¢„åŠ è½½å®ŒæˆéŸ³æ•ˆ
    completionAudio = new Audio(audioFiles.completion);
    completionAudio.preload = 'auto';
    completionAudio.volume = 0.7;
    
    // é”™è¯¯è™•ç†
    completionAudio.addEventListener('error', function(e) {
        console.log('å®ŒæˆéŸ³æ•ˆåŠ è½½å¤±è´¥:', e);
    });
}

function playBackgroundMusic(type) {
    stopBackgroundMusic();
    
    if (!isMusicEnabled || type === 'mute') return;
    
    musicType = type; // è®°éŒ„å½“å‰éŸ³æ¨‚é¡å‹
    const audioUrl = type === 'music' ? audioFiles.music : audioFiles.rain;
    
    try {
        currentBackgroundMusic = new Audio(audioUrl);
        currentBackgroundMusic.loop = true;
        currentBackgroundMusic.volume = 0.3;
        
        // è¨­ç½®æ’­æ”¾è¿›åº¦
        if (musicPausedTime > 0) {
            currentBackgroundMusic.currentTime = musicPausedTime;
        }
        
        // æ·»åŠ é”™è¯¯è™•ç†
        currentBackgroundMusic.addEventListener('error', function(e) {
            console.log('èƒŒæ™¯éŸ³æ¨‚åŠ è½½å¤±è´¥:', e);
            currentBackgroundMusic = null;
        });
        
        // æ·»åŠ åŠ è½½å®Œæˆè™•ç†
        currentBackgroundMusic.addEventListener('canplaythrough', function() {
            if (currentBackgroundMusic) {
                currentBackgroundMusic.play().catch(e => {
                    console.log('éŸ³æ¨‚æ’­æ”¾å¤±è´¥ï¼Œå¯èƒ½éœ€è¦ç”¨æˆ¶äº¤äº’:', e);
                });
            }
        });
        
    } catch (error) {
        console.log('å‰µå»ºéŸ³é¢‘å¯¹è±¡å¤±è´¥:', error);
    }
}

function stopBackgroundMusic() {
    if (currentBackgroundMusic) {
        currentBackgroundMusic.pause();
        currentBackgroundMusic.currentTime = 0;
        currentBackgroundMusic = null;
    }
    musicPausedTime = 0; // é‡ç½®è¿›åº¦
}

function pauseBackgroundMusic() {
    if (currentBackgroundMusic) {
        musicPausedTime = currentBackgroundMusic.currentTime; // ä¿å­˜å½“å‰æ’­æ”¾è¿›åº¦
        currentBackgroundMusic.pause();
    }
}

function resumeBackgroundMusic() {
    if (musicType !== 'mute' && currentMusicMode > 0) {
        playBackgroundMusic(musicType);
    }
}

function stopCompletionSound() {
    if (completionAudio) {
        completionAudio.pause();
        completionAudio.currentTime = 0;
    }
}



function stopBackgroundMusic() {
    if (currentBackgroundMusic) {
        currentBackgroundMusic.pause();
        currentBackgroundMusic.currentTime = 0;
        currentBackgroundMusic = null;
    }
}

function playCompletionSound() {
    if (!isMusicEnabled || !completionAudio) return;
    
    try {
        completionAudio.currentTime = 0;
        completionAudio.play().catch(e => {
            console.log('å®ŒæˆéŸ³æ•ˆæ’­æ”¾å¤±è´¥:', e);
        });
    } catch (error) {
        console.log('æ’­æ”¾å®ŒæˆéŸ³æ•ˆæ™‚å‡ºé”™:', error);
    }
}


function toggleMusic() {
    currentMusicMode = (currentMusicMode + 1) % 3;
    const musicBtn = document.getElementById('musicBtn');
    const icon = musicIcons[currentMusicMode];
    
    // æ›´æ–°æŒ‰é’®åœ–æ ‡
    musicBtn.innerHTML = `<span style="font-size: 28px;">${icon}</span>`;
    
    // æ ¹æ®æ¨¡å¼æ’­æ”¾ç›¸æ‡‰éŸ³æ¨‚
    switch(currentMusicMode) {
        case 0: // é™éŸ³
            stopBackgroundMusic();
            break;
        case 1: // éŸ³æ¨‚
            playBackgroundMusic('music');
            break;
        case 2: // é›¨å£°
            playBackgroundMusic('rain');
            break;
    }
}

        // ç•ªèŒ„é˜å®Œæˆç›¸é—œ
        function showPomodoroComplete() {
            stopBackgroundMusic();
            playCompletionSound();
            const ocAvatar = document.querySelector('.oc-avatar');
            if (ocAvatar) {
                ocAvatar.classList.add('celebration');
                setTimeout(() => {
                    ocAvatar.classList.remove('celebration');
                }, 1000);
            }
            
            const gift = getRandomGift();
            const completionMessage = getRandomOCMessage('completion');
            const senderOC = ocData[focusStartOCIndex] || ocData[currentOCIndex];
            
            addGift(gift, focusStartOCIndex);
            
            createCelebrationParticles();
            
            showCompletionModal(completionMessage, senderOC.name, currentStatus.name, gift);
            
            currentTime = selectedMinutes * 60;
            updateTimerDisplay();
            if (!isIgnoring) {
                showOCMessage(getInitialMessage(), 'initial', true);
            }
        }

        function getRandomGift() {
            const senderOC = ocData[focusStartOCIndex] || ocData[currentOCIndex];
    
    // å„ªå…ˆä½¿ç”¨ç‹€æ…‹å¯¹æ‡‰çš„ç¦®ç‰©
    if (currentStatus.name && statusGifts[currentStatus.name] && statusGifts[currentStatus.name].length > 0) {
        const statusGiftList = statusGifts[currentStatus.name];
        return statusGiftList[Math.floor(Math.random() * statusGiftList.length)];
    }
    
    // å…¶æ¬¡ä½¿ç”¨è‡ªå®šä¹‰ç¦®ç‰©
    if (senderOC.customGifts && senderOC.customGifts.trim()) {
        const customGifts = senderOC.customGifts.trim().split('\n').filter(gift => gift.trim());
        if (customGifts.length > 0) {
            return customGifts[Math.floor(Math.random() * customGifts.length)].trim();
        }
    }
    
    // æœ€å¾Œä½¿ç”¨é»˜è®¤ç¦®ç‰©
    const defaultGifts = [
        'ğŸ å°ˆå±¬å®šåˆ¶å¥–æ¯ï¼ä½ æ˜¯æœ€æ£’çš„ï¼',
        'â­ é—ªäº®æ˜Ÿæ˜Ÿå¾½ç« ï¼ç»§ç»­åŠ æ²¹ï¼',
        'ğŸ’ çè´µå®çŸ³ï¼ä½ çš„åŠªåŠ›å¾ˆçè´µï¼',
        'ğŸ† æˆå°±å‹‹ç« ï¼ç‚ºä½ çš„åšæŒå–å½©ï¼',
        'ğŸŒŸ å…‰èŠ’å››å°„ï¼ä½ é—ªé—ªç™¼å…‰ï¼'
    ];
    
    return defaultGifts[Math.floor(Math.random() * defaultGifts.length)];
}

        function createCelebrationParticles() {
            const particles = ['â­', 'ğŸ’', 'ğŸŒŸ', 'âœ¨', 'ğŸ’«', 'ğŸ”¸', 'ğŸ”¹'];
            
            for (let i = 0; i < 12; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'celebration-particle';
                    particle.textContent = particles[Math.floor(Math.random() * particles.length)];
                    particle.style.left = Math.random() * window.innerWidth + 'px';
                    particle.style.animationDelay = Math.random() * 0.5 + 's';
                    particle.style.animationDuration = (Math.random() * 2 + 3) + 's';
                    document.body.appendChild(particle);
                    
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.remove();
                        }
                    }, 4500);
                }, i * 150);
            }
        }

        function showCompletionModal(completionMessage, ocName, statusName, gift) {
    const modal = document.getElementById('completionModal');
    const titleElement = document.getElementById('completionTitle');
    const giftElement = document.getElementById('completionGift');
    
    titleElement.textContent = `ğŸ‰ ${completionMessage}`;
    // ä¿®æ”¹ï¼šæ”¹è®Šæ’ç‰ˆæ ¼å¼ï¼Œæ·»åŠ æ›è¡Œ
    giftElement.innerHTML = `${ocName}${statusName}ç»“æŸå•¦ï¼Œç»™ä½ å¸¦å›äº†<br>${gift}`;
    
    modal.classList.add('show');
}

        function closeCompletionModal() {
            document.getElementById('completionModal').classList.remove('show');
            stopCompletionSound();
        }




        // é£˜è½æ•ˆæœ
        function createFallingElements() {
            const elements = ['ğŸŒ¸'];
            
            function createSingleElement() {
                const element = document.createElement('div');
                element.className = 'falling-petals';
                element.textContent = elements[Math.floor(Math.random() * elements.length)];
                element.style.left = Math.random() * window.innerWidth + 'px';
                element.style.animationDuration = (Math.random() * 3 + 4) + 's';
                element.style.animationDelay = Math.random() * 2 + 's';
                
                document.body.appendChild(element);
                
                setTimeout(() => {
                    if (element.parentNode) {
                        element.remove();
                    }
                }, 9000);
            }
            
            for (let i = 0; i < 3; i++) {
                setTimeout(createSingleElement, i * 1000);
            }
            
            setInterval(createSingleElement, 2000);
        }

        // åˆå§‹åŒ–å’Œäº‹ä»¶ç›‘è½
        function loadStoredData() {
            const storedOCData = localStorage.getItem('ocData');
            if (storedOCData) {
                try {
                    const loadedData = JSON.parse(storedOCData);
                    ocData = loadedData.map(oc => ({
                        ...oc,
                        customGifts: oc.customGifts || '',
                        encourageStyles: oc.encourageStyles || [oc.personality || 'gentle'],
                        reminderStyles: oc.reminderStyles || [oc.reminderStyle || 'guardian']
                    }));
                } catch (e) {
                    console.log('Failed to parse stored OC data');
                }
            }
            
            const storedOCIndex = localStorage.getItem('currentOCIndex');
            if (storedOCIndex && parseInt(storedOCIndex) < ocData.length) {
                currentOCIndex = parseInt(storedOCIndex);
            }
            
            updateCurrentOC(currentOCIndex);
            loadTasks();
            loadDailyStats();
            loadCustomStyles();
            loadStatusGiftsFromStorage();
            loadCustomStatusesFromStorage(); 
        }

        function initPageAnimation() {
            const cards = document.querySelectorAll('.glass-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.6s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100 + 200);
            });
        }

        function updateCurrentDate() {
            const now = new Date();
            const weekdays = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'];
            const dateStr = `${now.getFullYear()}å¹´${(now.getMonth() + 1).toString().padStart(2, '0')}æœˆ${now.getDate().toString().padStart(2, '0')}æ—¥ ${weekdays[now.getDay()]}`;
            document.getElementById('currentDate').textContent = dateStr;
        }

        function initEventListeners() {
            document.getElementById('pomodoroBtn').addEventListener('click', () => switchMode('pomodoro'));
            document.getElementById('timerBtn').addEventListener('click', () => switchMode('timer'));
            
            document.addEventListener('click', function(e) {
                const statusSelector = document.getElementById('statusSelector');
                const statusButton = document.getElementById('statusButton');
                const timeSelector = document.getElementById('timeSelector');
                const timerDisplay = document.getElementById('timerDisplay');
                const taskSelector = document.getElementById('taskSelector');
                const taskContainer = document.querySelector('[onclick="showTaskSelector()"]');
                const giftModal = document.getElementById('giftModal');
                const completedTasksModal = document.getElementById('completedTasksModal');
                const completionModal = document.getElementById('completionModal');
                const styleEditorModal = document.getElementById('styleEditorModal');
                
                if (statusSelector && !statusSelector.contains(e.target) && 
                    e.target !== statusButton && !statusButton.contains(e.target)) {
                    statusSelector.classList.remove('show');
                    hideCustomStatusInput();
                }
                
                if (timeSelector && !timeSelector.contains(e.target) && 
                    e.target !== timerDisplay) {
                    timeSelector.classList.remove('show');
                }
                
                if (taskSelector && !taskSelector.contains(e.target) && 
                    taskContainer && !taskContainer.contains(e.target)) {
                    taskSelector.classList.remove('show');
                }
                
                if (giftModal && giftModal.classList.contains('show') && e.target === giftModal) {
                    closeGiftModal();
                }
                
                if (completedTasksModal && completedTasksModal.classList.contains('show') && e.target === completedTasksModal) {
                    closeCompletedTasksModal();
                }
                
                if (completionModal && completionModal.classList.contains('show') && e.target === completionModal) {
                    closeCompletionModal();
                }
                
                if (styleEditorModal && styleEditorModal.classList.contains('show') && e.target === styleEditorModal) {
                    closeStyleEditor();
                    const statusGiftEditorModal = document.getElementById('statusGiftEditorModal');
if (statusGiftEditorModal && statusGiftEditorModal.classList.contains('show') && e.target === statusGiftEditorModal) {
    closeStatusGiftEditor();
}
                }
            });
        }

        // é é¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadStoredData();
            updateCurrentDate();
            updateTimerDisplay();
            initAudio();
            
            const musicBtn = document.getElementById('musicBtn');
            if (musicBtn) {
                musicBtn.innerHTML = `
                    <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24">
                        <text x="12" y="16" text-anchor="middle" font-size="16">ğŸ”‡</text>
                    </svg>
                `;
            }
            
            initEventListeners();
            createFallingElements();
            setTimeout(initPageAnimation, 100);
            renderTasks();
        });

        window.addEventListener('load', function() {
            initPageAnimation();
        });
    </script>

<script id="oc-phrases-and-cleanup">
(function(){
  try{
    var giftModal = document.getElementById('giftModal');
    if(giftModal) giftModal.remove();
    var giftsCardNum = document.getElementById('todayGifts');
    if(giftsCardNum && giftsCardNum.closest('.stat-clickable')) {
      var card = giftsCardNum.closest('.stat-clickable');
      if(card && card.parentElement){ card.parentElement.removeChild(card); }
    }
  }catch(e){}
  window.showGiftModal = function(){};
  window.closeGiftModal = function(){};

  function getTextarea(){ return document.querySelector('#styleEditorTextarea, .style-editor-textarea'); }
  function savePhraseLibrary(){
    var ta = getTextarea();
    if(!ta) return;
    localStorage.setItem('oc_phrases', ta.value || '');
    try{ alert('å·²ä¿å­˜å°è©åº«'); }catch(e){}
  }
  var editorSaveBtn = document.querySelector('.style-editor-save');
  if(editorSaveBtn){
    editorSaveBtn.addEventListener('click', function(){ setTimeout(savePhraseLibrary, 0); });
  }

  function pickPhrase(){
    var raw = (localStorage.getItem('oc_phrases')||'').split('
').map(function(s){return s.trim();}).filter(Boolean);
    return raw.length ? raw[Math.floor(Math.random()*raw.length)] : '';
  }

  function setOCMessageNeutral(text){
    var el = document.querySelector('.oc-message-text');
    if(!el) return;
    el.className = 'oc-message-text';
    el.textContent = (text && text.trim()) ? text.trim() : pickPhrase();
  }

  if(window.setOCMessage){
    window.setOCMessage = function(txt){ setOCMessageNeutral(txt); };
  } else {
    document.addEventListener('DOMContentLoaded', function(){ setOCMessageNeutral(); });
    setTimeout(function(){ setOCMessageNeutral(); }, 800);
  }

  ['click','visibilitychange'].forEach(function(ev){
    document.addEventListener(ev, function(){ setOCMessageNeutral(); }, {passive:true});
  });
})();
</script>

</body>
</html>
